"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("pages/dashboard/institution",{

/***/ "./hooks/useContract.ts":
/*!******************************!*\
  !*** ./hooks/useContract.ts ***!
  \******************************/
/***/ (function(module, __webpack_exports__, __webpack_require__) {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   useContract: function() { return /* binding */ useContract; }\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"./node_modules/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var wagmi__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! wagmi */ \"./node_modules/wagmi/dist/esm/exports/index.js\");\n/* harmony import */ var viem__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! viem */ \"./node_modules/viem/_esm/index.js\");\n/* harmony import */ var _contracts_ExamManagement_json__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../contracts/ExamManagement.json */ \"./contracts/ExamManagement.json\");\n/* harmony import */ var _chakra_ui_react__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @chakra-ui/react */ \"./node_modules/@chakra-ui/react/dist/index.mjs\");\n\n\n\n\n\nconst EXAM_MANAGEMENT_ADDRESS = \"0x15B70b2C305c684Ef6335b64b0CA430e481c3ac5\" || 0;\nconst CERTIFICATES_ADDRESS = \"0x91F73a8778C82983253fEC5C0a63f87beA461AFd\" || 0;\nconst EXAMINATIONS_ADDRESS = \"0x1cE1DF501cF629b04c6B647e5A7BDE8245BcE02A\" || 0;\nconst IDENTITY_ADDRESS = \"0xb8F6dE405c3A2876d0a14Fa08Ee5D92793bFbbA1\" || 0;\nconst SECURITY_UTILS_ADDRESS = \"0x705D62Df2879E56545e9A9A6381c6a8e200e390c\" || 0;\nconst TARGET_CHAIN_ID = 1337; // Local network chain ID\nconst useContract = ()=>{\n    const { address: account } = (0,wagmi__WEBPACK_IMPORTED_MODULE_2__.useAccount)();\n    const publicClient = (0,wagmi__WEBPACK_IMPORTED_MODULE_2__.usePublicClient)();\n    const { data: walletClient } = (0,wagmi__WEBPACK_IMPORTED_MODULE_2__.useWalletClient)();\n    const chainId = (0,wagmi__WEBPACK_IMPORTED_MODULE_2__.useChainId)();\n    const { connect } = (0,wagmi__WEBPACK_IMPORTED_MODULE_2__.useConnect)();\n    const toast = (0,_chakra_ui_react__WEBPACK_IMPORTED_MODULE_3__.useToast)();\n    const [state, setState] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)({\n        examManagementContract: null,\n        certificatesContract: null,\n        examinationsContract: null,\n        identityContract: null,\n        securityUtilsContract: null,\n        isConnected: false,\n        isInitialized: false,\n        isLoading: false,\n        networkSwitchAttempted: false,\n        initializationAttempted: false,\n        initializationError: null,\n        retryCount: 0,\n        lastInitAttemptTime: 0\n    });\n    // Handle initial connection check\n    (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(()=>{\n        const checkConnection = async ()=>{\n            if (!account && !state.initializationAttempted) {\n                toast({\n                    title: \"يرجى توصيل المحفظة | Please Connect Wallet\",\n                    description: \"يجب توصيل المحفظة للمتابعة | Wallet connection is required to continue\",\n                    status: \"warning\",\n                    duration: 5000,\n                    isClosable: true\n                });\n                setState((prev)=>({\n                        ...prev,\n                        initializationAttempted: true\n                    }));\n            }\n        };\n        checkConnection();\n    }, [\n        account,\n        state.initializationAttempted,\n        toast\n    ]);\n    // Initialize contracts only when wallet is connected and on correct network\n    (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(()=>{\n        let isMounted = true;\n        let retryTimeout;\n        const initialize = async ()=>{\n            if (!isMounted) return;\n            // Log all dependencies state\n            console.log(\"Checking dependencies:\", {\n                account,\n                chainId,\n                hasWalletClient: !!walletClient,\n                hasPublicClient: !!publicClient,\n                targetChainId: TARGET_CHAIN_ID,\n                isCorrectNetwork: chainId === TARGET_CHAIN_ID\n            });\n            // Wait for all required dependencies\n            if (!account || !walletClient || !publicClient) {\n                console.log(\"Waiting for dependencies...\");\n                return;\n            }\n            // Prevent rapid re-initialization attempts\n            const now = Date.now();\n            if (now - state.lastInitAttemptTime < 2000) {\n                return;\n            }\n            setState((prev)=>({\n                    ...prev,\n                    isLoading: true,\n                    lastInitAttemptTime: now\n                }));\n            try {\n                // Double check network after dependencies are loaded\n                const network = await publicClient.getChainId();\n                console.log(\"Current network:\", network, \"Expected:\", TARGET_CHAIN_ID);\n                const isCorrectNetwork = network === TARGET_CHAIN_ID;\n                if (!isCorrectNetwork) {\n                    if (window.ethereum) {\n                        try {\n                            await window.ethereum.request({\n                                method: \"wallet_switchEthereumChain\",\n                                params: [\n                                    {\n                                        chainId: \"0x\".concat(TARGET_CHAIN_ID.toString(16))\n                                    }\n                                ]\n                            });\n                            // Wait for network switch and verify\n                            await new Promise((resolve)=>setTimeout(resolve, 2000));\n                            const newChainId = await publicClient.getChainId();\n                            if (newChainId !== TARGET_CHAIN_ID) {\n                                throw new Error(\"فشل في تبديل الشبكة | Network switch failed\");\n                            }\n                        } catch (switchError) {\n                            if (switchError.code === 4902) {\n                                await window.ethereum.request({\n                                    method: \"wallet_addEthereumChain\",\n                                    params: [\n                                        {\n                                            chainId: \"0x\".concat(TARGET_CHAIN_ID.toString(16)),\n                                            chainName: \"Ganache Local\",\n                                            rpcUrls: [\n                                                \"http://127.0.0.1:7545\"\n                                            ],\n                                            nativeCurrency: {\n                                                name: \"ETH\",\n                                                symbol: \"ETH\",\n                                                decimals: 18\n                                            }\n                                        }\n                                    ]\n                                });\n                            } else {\n                                throw new Error(\"يرجى تغيير الشبكة إلى الشبكة المحلية | Please switch to local network\");\n                            }\n                        }\n                    } else {\n                        throw new Error(\"يرجى تثبيت MetaMask | Please install MetaMask\");\n                    }\n                }\n                if (!EXAM_MANAGEMENT_ADDRESS) {\n                    throw new Error(\"عنوان العقد غير متوفر | Contract address not available\");\n                }\n                console.log(\"Initializing ExamManagement contract at:\", EXAM_MANAGEMENT_ADDRESS);\n                // Initialize read contract\n                const examManagement = (0,viem__WEBPACK_IMPORTED_MODULE_4__.getContract)({\n                    address: EXAM_MANAGEMENT_ADDRESS,\n                    abi: _contracts_ExamManagement_json__WEBPACK_IMPORTED_MODULE_1__.abi,\n                    client: publicClient\n                });\n                // Verify contract exists\n                const code = await publicClient.getBytecode({\n                    address: EXAM_MANAGEMENT_ADDRESS\n                });\n                if (!code || code === \"0x\") {\n                    throw new Error(\"العقد غير موجود على هذا العنوان | Contract not found at address\");\n                }\n                // Create base contract with read methods\n                const baseContract = {\n                    isInstitution: async (address)=>{\n                        return await examManagement.read.isInstitution([\n                            address\n                        ]);\n                    },\n                    getInstitution: async (address)=>{\n                        return await examManagement.read.getInstitution([\n                            address\n                        ]);\n                    },\n                    getInstitutionExams: async (address)=>{\n                        return await examManagement.read.getInstitutionExams([\n                            address\n                        ]);\n                    },\n                    getExamResults: async (examId)=>{\n                        return await examManagement.read.getExamResults([\n                            examId\n                        ]);\n                    },\n                    write: {}\n                };\n                // Initialize write methods if wallet is connected\n                if (walletClient) {\n                    console.log(\"Initializing write methods...\");\n                    const examManagementWrite = (0,viem__WEBPACK_IMPORTED_MODULE_4__.getContract)({\n                        address: EXAM_MANAGEMENT_ADDRESS,\n                        abi: _contracts_ExamManagement_json__WEBPACK_IMPORTED_MODULE_1__.abi,\n                        client: walletClient\n                    });\n                    baseContract.write = {\n                        updateInstitutionProfile: async (params)=>{\n                            const hash = await examManagementWrite.write.updateInstitutionProfile(params.args);\n                            return {\n                                wait: async ()=>{\n                                    await publicClient.waitForTransactionReceipt({\n                                        hash\n                                    });\n                                }\n                            };\n                        },\n                        submitExamResults: async (params)=>{\n                            const hash = await examManagementWrite.write.submitExamResults(params.args);\n                            return {\n                                wait: async ()=>{\n                                    await publicClient.waitForTransactionReceipt({\n                                        hash\n                                    });\n                                }\n                            };\n                        },\n                        registerStudents: async (params)=>{\n                            const hash = await examManagementWrite.write.registerStudents(params.args);\n                            return {\n                                wait: async ()=>{\n                                    await publicClient.waitForTransactionReceipt({\n                                        hash\n                                    });\n                                }\n                            };\n                        },\n                        updateExamStatus: async (params)=>{\n                            const hash = await examManagementWrite.write.updateExamStatus(params.args);\n                            return {\n                                wait: async ()=>{\n                                    await publicClient.waitForTransactionReceipt({\n                                        hash\n                                    });\n                                }\n                            };\n                        },\n                        createExam: async (params)=>{\n                            const hash = await examManagementWrite.write.createExam(params.args);\n                            return {\n                                wait: async ()=>{\n                                    await publicClient.waitForTransactionReceipt({\n                                        hash\n                                    });\n                                }\n                            };\n                        },\n                        issueCertificate: async (params)=>{\n                            const hash = await examManagementWrite.write.issueCertificate(params.args);\n                            return {\n                                wait: async ()=>{\n                                    await publicClient.waitForTransactionReceipt({\n                                        hash\n                                    });\n                                }\n                            };\n                        }\n                    };\n                }\n                // Test contract by calling a read method\n                try {\n                    await baseContract.isInstitution(account);\n                    console.log(\"Contract read test successful\");\n                } catch (error) {\n                    console.error(\"Contract read test failed:\", error);\n                    throw new Error(\"فشل في الاتصال بالعقد | Failed to connect to contract\");\n                }\n                if (isMounted) {\n                    setState((prev)=>({\n                            ...prev,\n                            examManagementContract: baseContract,\n                            isConnected: true,\n                            isInitialized: true,\n                            isLoading: false,\n                            initializationError: null,\n                            retryCount: 0\n                        }));\n                    console.log(\"Contract initialization successful\");\n                }\n            } catch (error) {\n                console.error(\"Contract initialization error:\", error);\n                if (isMounted) {\n                    if (state.retryCount < 3) {\n                        const delay = Math.min(2000 * Math.pow(2, state.retryCount), 8000);\n                        console.log(\"Retrying in \".concat(delay, \"ms... (Attempt \").concat(state.retryCount + 1, \"/3)\"));\n                        retryTimeout = setTimeout(()=>{\n                            setState((prev)=>({\n                                    ...prev,\n                                    retryCount: prev.retryCount + 1,\n                                    isLoading: false\n                                }));\n                        }, delay);\n                    } else {\n                        setState((prev)=>({\n                                ...prev,\n                                isInitialized: false,\n                                isLoading: false,\n                                initializationError: error instanceof Error ? error.message : \"Unknown error\",\n                                retryCount: 0\n                            }));\n                        toast({\n                            title: \"خطأ في تهيئة العقود | Contract Initialization Error\",\n                            description: \"\".concat(error instanceof Error ? error.message : \"Unknown error\", \" | يرجى التأكد من اتصال المحفظة والشبكة الصحيحة\"),\n                            status: \"error\",\n                            duration: 8000,\n                            isClosable: true\n                        });\n                    }\n                }\n            }\n        };\n        initialize();\n        return ()=>{\n            isMounted = false;\n            if (retryTimeout) {\n                clearTimeout(retryTimeout);\n            }\n        };\n    }, [\n        account,\n        chainId,\n        walletClient,\n        publicClient,\n        state.retryCount,\n        state.lastInitAttemptTime,\n        toast\n    ]);\n    // Event listener for network changes\n    (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(()=>{\n        var _window_ethereum;\n        if ( true && ((_window_ethereum = window.ethereum) === null || _window_ethereum === void 0 ? void 0 : _window_ethereum.on)) {\n            const handleChainChanged = async (newChainId)=>{\n                console.log(\"Network changed to:\", newChainId);\n                const expectedChainId = \"0x\".concat(TARGET_CHAIN_ID.toString(16));\n                if (newChainId !== expectedChainId) {\n                    console.log(\"Wrong network detected, resetting contracts...\");\n                    setState((prev)=>({\n                            ...prev,\n                            examManagementContract: null,\n                            certificatesContract: null,\n                            examinationsContract: null,\n                            identityContract: null,\n                            securityUtilsContract: null,\n                            isInitialized: false,\n                            initializationAttempted: false,\n                            initializationError: \"يرجى تغيير الشبكة إلى الشبكة المحلية | Please switch to local network\",\n                            retryCount: 0\n                        }));\n                    // Reload the page to ensure clean state\n                    window.location.reload();\n                }\n            };\n            window.ethereum.on(\"chainChanged\", handleChainChanged);\n            return ()=>{\n                var _window_ethereum;\n                if ((_window_ethereum = window.ethereum) === null || _window_ethereum === void 0 ? void 0 : _window_ethereum.removeListener) {\n                    window.ethereum.removeListener(\"chainChanged\", handleChainChanged);\n                }\n            };\n        }\n    }, []);\n    return {\n        examManagementContract: state.examManagementContract,\n        certificatesContract: state.certificatesContract,\n        examinationsContract: state.examinationsContract,\n        identityContract: state.identityContract,\n        securityUtilsContract: state.securityUtilsContract,\n        account,\n        isConnected: state.isConnected,\n        isInitialized: state.isInitialized,\n        isLoading: state.isLoading,\n        isCorrectNetwork: chainId === TARGET_CHAIN_ID,\n        initializationError: state.initializationError\n    };\n};\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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UUFBUSxDQUFDcUQsY0FBYyxDQUFDLGdCQUFnQko7Z0JBQ2pEO1lBQ0Y7UUFDRjtJQUNGLEdBQUcsRUFBRTtJQUVMLE9BQU87UUFDTG5GLHdCQUF3QkYsTUFBTUUsc0JBQXNCO1FBQ3BEQyxzQkFBc0JILE1BQU1HLG9CQUFvQjtRQUNoREMsc0JBQXNCSixNQUFNSSxvQkFBb0I7UUFDaERDLGtCQUFrQkwsTUFBTUssZ0JBQWdCO1FBQ3hDQyx1QkFBdUJOLE1BQU1NLHFCQUFxQjtRQUNsRGI7UUFDQWMsYUFBYVAsTUFBTU8sV0FBVztRQUM5QkMsZUFBZVIsTUFBTVEsYUFBYTtRQUNsQ0MsV0FBV1QsTUFBTVMsU0FBUztRQUMxQnFCLGtCQUFrQmpDLFlBQVlQO1FBQzlCc0IscUJBQXFCWixNQUFNWSxtQkFBbUI7SUFDaEQ7QUFDRixFQUFFIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vX05fRS8uL2hvb2tzL3VzZUNvbnRyYWN0LnRzPzRmMzIiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgdXNlRWZmZWN0LCB1c2VTdGF0ZSB9IGZyb20gJ3JlYWN0JztcbmltcG9ydCB7IHVzZUFjY291bnQsIHVzZVB1YmxpY0NsaWVudCwgdXNlV2FsbGV0Q2xpZW50LCB1c2VDaGFpbklkLCB1c2VDb25uZWN0IH0gZnJvbSAnd2FnbWknO1xuaW1wb3J0IHsgZ2V0Q29udHJhY3QgfSBmcm9tICd2aWVtJztcbmltcG9ydCBFeGFtTWFuYWdlbWVudEFCSSBmcm9tICcuLi9jb250cmFjdHMvRXhhbU1hbmFnZW1lbnQuanNvbic7XG5pbXBvcnQgQ2VydGlmaWNhdGVzQUJJIGZyb20gJy4uL2NvbnRyYWN0cy9DZXJ0aWZpY2F0ZXMuanNvbic7XG5pbXBvcnQgRXhhbWluYXRpb25zQUJJIGZyb20gJy4uL2NvbnRyYWN0cy9FeGFtaW5hdGlvbnMuanNvbic7XG5pbXBvcnQgSWRlbnRpdHlBQkkgZnJvbSAnLi4vY29udHJhY3RzL0lkZW50aXR5Lmpzb24nO1xuaW1wb3J0IFNlY3VyaXR5VXRpbHNBQkkgZnJvbSAnLi4vY29udHJhY3RzL1NlY3VyaXR5VXRpbHMuanNvbic7XG5pbXBvcnQgeyB1c2VUb2FzdCB9IGZyb20gJ0BjaGFrcmEtdWkvcmVhY3QnO1xuXG5jb25zdCBFWEFNX01BTkFHRU1FTlRfQUREUkVTUyA9IHByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX0VYQU1fTUFOQUdFTUVOVF9DT05UUkFDVF9BRERSRVNTIHx8ICcnO1xuY29uc3QgQ0VSVElGSUNBVEVTX0FERFJFU1MgPSBwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19DRVJUSUZJQ0FURVNfQ09OVFJBQ1RfQUREUkVTUyB8fCAnJztcbmNvbnN0IEVYQU1JTkFUSU9OU19BRERSRVNTID0gcHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfRVhBTUlOQVRJT05TX0NPTlRSQUNUX0FERFJFU1MgfHwgJyc7XG5jb25zdCBJREVOVElUWV9BRERSRVNTID0gcHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfSURFTlRJVFlfQ09OVFJBQ1RfQUREUkVTUyB8fCAnJztcbmNvbnN0IFNFQ1VSSVRZX1VUSUxTX0FERFJFU1MgPSBwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19TRUNVUklUWV9VVElMU19DT05UUkFDVF9BRERSRVNTIHx8ICcnO1xuY29uc3QgVEFSR0VUX0NIQUlOX0lEID0gMTMzNzsgLy8gTG9jYWwgbmV0d29yayBjaGFpbiBJRFxuXG5pbnRlcmZhY2UgRXhhbU1hbmFnZW1lbnRDb250cmFjdCB7XG4gIGlzSW5zdGl0dXRpb246IChhZGRyZXNzOiBzdHJpbmcpID0+IFByb21pc2U8Ym9vbGVhbj47XG4gIGdldEluc3RpdHV0aW9uOiAoYWRkcmVzczogc3RyaW5nKSA9PiBQcm9taXNlPGFueT47XG4gIGdldEluc3RpdHV0aW9uRXhhbXM6IChhZGRyZXNzOiBzdHJpbmcpID0+IFByb21pc2U8YW55W10+O1xuICBnZXRFeGFtUmVzdWx0czogKGV4YW1JZDogc3RyaW5nKSA9PiBQcm9taXNlPGFueVtdPjtcbiAgcHJvdmlkZXI/OiBhbnk7XG4gIHJ1bm5lcj86IGFueTtcbiAgd3JpdGU6IHtcbiAgICB1cGRhdGVJbnN0aXR1dGlvblByb2ZpbGU6IChwYXJhbXM6IHtcbiAgICAgIGFyZ3M6IFtcbiAgICAgICAgbmFtZTogc3RyaW5nLFxuICAgICAgICBtaW5pc3RyeTogc3RyaW5nLFxuICAgICAgICB1bml2ZXJzaXR5OiBzdHJpbmcsXG4gICAgICAgIGNvbGxlZ2U6IHN0cmluZyxcbiAgICAgICAgZGVzY3JpcHRpb246IHN0cmluZyxcbiAgICAgICAgbG9nbzogc3RyaW5nLFxuICAgICAgICB3ZWJzaXRlOiBzdHJpbmcsXG4gICAgICAgIGVtYWlsOiBzdHJpbmcsXG4gICAgICAgIHBob25lOiBzdHJpbmdcbiAgICAgIF1cbiAgICB9KSA9PiBQcm9taXNlPHsgd2FpdDogKCkgPT4gUHJvbWlzZTx2b2lkPiB9PjtcbiAgICBzdWJtaXRFeGFtUmVzdWx0czogKHBhcmFtczoge1xuICAgICAgYXJnczogW2V4YW1JZDogc3RyaW5nLCByZXN1bHRzOiBhbnlbXV0sXG4gICAgICBjaGFpbklkPzogbnVtYmVyXG4gICAgfSkgPT4gUHJvbWlzZTx7IHdhaXQ6ICgpID0+IFByb21pc2U8dm9pZD4gfT47XG4gICAgcmVnaXN0ZXJTdHVkZW50czogKHBhcmFtczoge1xuICAgICAgYXJnczogW2V4YW1JZDogc3RyaW5nLCBzdHVkZW50czogc3RyaW5nW11dLFxuICAgICAgY2hhaW5JZD86IG51bWJlclxuICAgIH0pID0+IFByb21pc2U8eyB3YWl0OiAoKSA9PiBQcm9taXNlPHZvaWQ+IH0+O1xuICAgIHVwZGF0ZUV4YW1TdGF0dXM6IChwYXJhbXM6IHtcbiAgICAgIGFyZ3M6IFtleGFtSWQ6IHN0cmluZywgc3RhdHVzOiBzdHJpbmddLFxuICAgICAgY2hhaW5JZD86IG51bWJlclxuICAgIH0pID0+IFByb21pc2U8eyB3YWl0OiAoKSA9PiBQcm9taXNlPHZvaWQ+IH0+O1xuICAgIGNyZWF0ZUV4YW06IChwYXJhbXM6IHtcbiAgICAgIGFyZ3M6IFt0aXRsZTogc3RyaW5nLCBkZXNjcmlwdGlvbjogc3RyaW5nLCBkYXRlOiBudW1iZXJdLFxuICAgICAgY2hhaW5JZD86IG51bWJlclxuICAgIH0pID0+IFByb21pc2U8eyB3YWl0OiAoKSA9PiBQcm9taXNlPHZvaWQ+IH0+O1xuICAgIGlzc3VlQ2VydGlmaWNhdGU6IChwYXJhbXM6IHtcbiAgICAgIGFyZ3M6IFtzdHVkZW50OiBzdHJpbmcsIHRpdGxlOiBzdHJpbmcsIGRlc2NyaXB0aW9uOiBzdHJpbmddLFxuICAgICAgY2hhaW5JZD86IG51bWJlclxuICAgIH0pID0+IFByb21pc2U8eyB3YWl0OiAoKSA9PiBQcm9taXNlPHZvaWQ+IH0+O1xuICB9O1xufVxuXG5pbnRlcmZhY2UgQ2VydGlmaWNhdGVzQ29udHJhY3Qge1xuICBnZXRJbnN0aXR1dGlvbkNlcnRpZmljYXRlczogKGFkZHJlc3M6IHN0cmluZykgPT4gUHJvbWlzZTxhbnlbXT47XG4gIHdyaXRlOiB7XG4gICAgaXNzdWVDZXJ0aWZpY2F0ZTogKHBhcmFtczoge1xuICAgICAgYXJnczogW3N0dWRlbnRBZGRyZXNzOiBzdHJpbmcsIHRpdGxlOiBzdHJpbmcsIGRlc2NyaXB0aW9uOiBzdHJpbmddLFxuICAgICAgY2hhaW5JZD86IG51bWJlclxuICAgIH0pID0+IFByb21pc2U8eyB3YWl0OiAoKSA9PiBQcm9taXNlPHZvaWQ+IH0+O1xuICB9O1xufVxuXG5pbnRlcmZhY2UgRXhhbWluYXRpb25zQ29udHJhY3Qge1xuICAvLyBBZGQgZXhhbWluYXRpb24gY29udHJhY3QgbWV0aG9kcyBoZXJlXG4gIHdyaXRlOiB7XG4gICAgY3JlYXRlRXhhbWluYXRpb246IChwYXJhbXM6IHtcbiAgICAgIGFyZ3M6IFtpcGZzSGFzaDogc3RyaW5nLCBzdGFydFRpbWU6IG51bWJlciwgZW5kVGltZTogbnVtYmVyXSxcbiAgICAgIGNoYWluSWQ/OiBudW1iZXJcbiAgICB9KSA9PiBQcm9taXNlPHsgd2FpdDogKCkgPT4gUHJvbWlzZTx2b2lkPiB9PjtcbiAgICByZWdpc3RlckZvckV4YW06IChwYXJhbXM6IHtcbiAgICAgIGFyZ3M6IFtleGFtSWQ6IHN0cmluZ10sXG4gICAgICBjaGFpbklkPzogbnVtYmVyXG4gICAgfSkgPT4gUHJvbWlzZTx7IHdhaXQ6ICgpID0+IFByb21pc2U8dm9pZD4gfT47XG4gIH07XG59XG5cbmludGVyZmFjZSBJZGVudGl0eUNvbnRyYWN0IHtcbiAgLy8gQWRkIGlkZW50aXR5IGNvbnRyYWN0IG1ldGhvZHMgaGVyZVxuICB3cml0ZToge1xuICAgIHJlZ2lzdGVySWRlbnRpdHk6IChwYXJhbXM6IHtcbiAgICAgIGFyZ3M6IFtuYW1lOiBzdHJpbmcsIGVtYWlsOiBzdHJpbmddLFxuICAgICAgY2hhaW5JZD86IG51bWJlclxuICAgIH0pID0+IFByb21pc2U8eyB3YWl0OiAoKSA9PiBQcm9taXNlPHZvaWQ+IH0+O1xuICB9O1xufVxuXG5pbnRlcmZhY2UgU2VjdXJpdHlVdGlsc0NvbnRyYWN0IHtcbiAgLy8gQWRkIHNlY3VyaXR5IHV0aWxzIGNvbnRyYWN0IG1ldGhvZHMgaGVyZVxuICB3cml0ZToge1xuICAgIHZlcmlmeUhhc2g6IChwYXJhbXM6IHtcbiAgICAgIGFyZ3M6IFtoYXNoOiBzdHJpbmcsIHNpZ25hdHVyZTogc3RyaW5nXSxcbiAgICAgIGNoYWluSWQ/OiBudW1iZXJcbiAgICB9KSA9PiBQcm9taXNlPHsgd2FpdDogKCkgPT4gUHJvbWlzZTx2b2lkPiB9PjtcbiAgfTtcbn1cblxuZXhwb3J0IGNvbnN0IHVzZUNvbnRyYWN0ID0gKCkgPT4ge1xuICBjb25zdCB7IGFkZHJlc3M6IGFjY291bnQgfSA9IHVzZUFjY291bnQoKTtcbiAgY29uc3QgcHVibGljQ2xpZW50ID0gdXNlUHVibGljQ2xpZW50KCk7XG4gIGNvbnN0IHsgZGF0YTogd2FsbGV0Q2xpZW50IH0gPSB1c2VXYWxsZXRDbGllbnQoKTtcbiAgY29uc3QgY2hhaW5JZCA9IHVzZUNoYWluSWQoKTtcbiAgY29uc3QgeyBjb25uZWN0IH0gPSB1c2VDb25uZWN0KCk7XG4gIGNvbnN0IHRvYXN0ID0gdXNlVG9hc3QoKTtcbiAgXG4gIGNvbnN0IFtzdGF0ZSwgc2V0U3RhdGVdID0gdXNlU3RhdGUoe1xuICAgIGV4YW1NYW5hZ2VtZW50Q29udHJhY3Q6IG51bGwgYXMgRXhhbU1hbmFnZW1lbnRDb250cmFjdCB8IG51bGwsXG4gICAgY2VydGlmaWNhdGVzQ29udHJhY3Q6IG51bGwgYXMgQ2VydGlmaWNhdGVzQ29udHJhY3QgfCBudWxsLFxuICAgIGV4YW1pbmF0aW9uc0NvbnRyYWN0OiBudWxsIGFzIEV4YW1pbmF0aW9uc0NvbnRyYWN0IHwgbnVsbCxcbiAgICBpZGVudGl0eUNvbnRyYWN0OiBudWxsIGFzIElkZW50aXR5Q29udHJhY3QgfCBudWxsLFxuICAgIHNlY3VyaXR5VXRpbHNDb250cmFjdDogbnVsbCBhcyBTZWN1cml0eVV0aWxzQ29udHJhY3QgfCBudWxsLFxuICAgIGlzQ29ubmVjdGVkOiBmYWxzZSxcbiAgICBpc0luaXRpYWxpemVkOiBmYWxzZSxcbiAgICBpc0xvYWRpbmc6IGZhbHNlLFxuICAgIG5ldHdvcmtTd2l0Y2hBdHRlbXB0ZWQ6IGZhbHNlLFxuICAgIGluaXRpYWxpemF0aW9uQXR0ZW1wdGVkOiBmYWxzZSxcbiAgICBpbml0aWFsaXphdGlvbkVycm9yOiBudWxsIGFzIHN0cmluZyB8IG51bGwsXG4gICAgcmV0cnlDb3VudDogMCxcbiAgICBsYXN0SW5pdEF0dGVtcHRUaW1lOiAwXG4gIH0pO1xuXG4gIC8vIEhhbmRsZSBpbml0aWFsIGNvbm5lY3Rpb24gY2hlY2tcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBjb25zdCBjaGVja0Nvbm5lY3Rpb24gPSBhc3luYyAoKSA9PiB7XG4gICAgICBpZiAoIWFjY291bnQgJiYgIXN0YXRlLmluaXRpYWxpemF0aW9uQXR0ZW1wdGVkKSB7XG4gICAgICAgIHRvYXN0KHtcbiAgICAgICAgICB0aXRsZTogJ9mK2LHYrNmJINiq2YjYtdmK2YQg2KfZhNmF2K3Zgdi42KkgfCBQbGVhc2UgQ29ubmVjdCBXYWxsZXQnLFxuICAgICAgICAgIGRlc2NyaXB0aW9uOiAn2YrYrNioINiq2YjYtdmK2YQg2KfZhNmF2K3Zgdi42Kkg2YTZhNmF2KrYp9io2LnYqSB8IFdhbGxldCBjb25uZWN0aW9uIGlzIHJlcXVpcmVkIHRvIGNvbnRpbnVlJyxcbiAgICAgICAgICBzdGF0dXM6ICd3YXJuaW5nJyxcbiAgICAgICAgICBkdXJhdGlvbjogNTAwMCxcbiAgICAgICAgICBpc0Nsb3NhYmxlOiB0cnVlLFxuICAgICAgICB9KTtcbiAgICAgICAgc2V0U3RhdGUocHJldiA9PiAoeyAuLi5wcmV2LCBpbml0aWFsaXphdGlvbkF0dGVtcHRlZDogdHJ1ZSB9KSk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIGNoZWNrQ29ubmVjdGlvbigpO1xuICB9LCBbYWNjb3VudCwgc3RhdGUuaW5pdGlhbGl6YXRpb25BdHRlbXB0ZWQsIHRvYXN0XSk7XG5cbiAgLy8gSW5pdGlhbGl6ZSBjb250cmFjdHMgb25seSB3aGVuIHdhbGxldCBpcyBjb25uZWN0ZWQgYW5kIG9uIGNvcnJlY3QgbmV0d29ya1xuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGxldCBpc01vdW50ZWQgPSB0cnVlO1xuICAgIGxldCByZXRyeVRpbWVvdXQ6IE5vZGVKUy5UaW1lb3V0O1xuXG4gICAgY29uc3QgaW5pdGlhbGl6ZSA9IGFzeW5jICgpID0+IHtcbiAgICAgIGlmICghaXNNb3VudGVkKSByZXR1cm47XG5cbiAgICAgIC8vIExvZyBhbGwgZGVwZW5kZW5jaWVzIHN0YXRlXG4gICAgICBjb25zb2xlLmxvZygnQ2hlY2tpbmcgZGVwZW5kZW5jaWVzOicsIHtcbiAgICAgICAgYWNjb3VudCxcbiAgICAgICAgY2hhaW5JZCxcbiAgICAgICAgaGFzV2FsbGV0Q2xpZW50OiAhIXdhbGxldENsaWVudCxcbiAgICAgICAgaGFzUHVibGljQ2xpZW50OiAhIXB1YmxpY0NsaWVudCxcbiAgICAgICAgdGFyZ2V0Q2hhaW5JZDogVEFSR0VUX0NIQUlOX0lELFxuICAgICAgICBpc0NvcnJlY3ROZXR3b3JrOiBjaGFpbklkID09PSBUQVJHRVRfQ0hBSU5fSURcbiAgICAgIH0pO1xuXG4gICAgICAvLyBXYWl0IGZvciBhbGwgcmVxdWlyZWQgZGVwZW5kZW5jaWVzXG4gICAgICBpZiAoIWFjY291bnQgfHwgIXdhbGxldENsaWVudCB8fCAhcHVibGljQ2xpZW50KSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdXYWl0aW5nIGZvciBkZXBlbmRlbmNpZXMuLi4nKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICAvLyBQcmV2ZW50IHJhcGlkIHJlLWluaXRpYWxpemF0aW9uIGF0dGVtcHRzXG4gICAgICBjb25zdCBub3cgPSBEYXRlLm5vdygpO1xuICAgICAgaWYgKG5vdyAtIHN0YXRlLmxhc3RJbml0QXR0ZW1wdFRpbWUgPCAyMDAwKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgc2V0U3RhdGUocHJldiA9PiAoeyAuLi5wcmV2LCBpc0xvYWRpbmc6IHRydWUsIGxhc3RJbml0QXR0ZW1wdFRpbWU6IG5vdyB9KSk7XG5cbiAgICAgIHRyeSB7XG4gICAgICAgIC8vIERvdWJsZSBjaGVjayBuZXR3b3JrIGFmdGVyIGRlcGVuZGVuY2llcyBhcmUgbG9hZGVkXG4gICAgICAgIGNvbnN0IG5ldHdvcmsgPSBhd2FpdCBwdWJsaWNDbGllbnQuZ2V0Q2hhaW5JZCgpO1xuICAgICAgICBjb25zb2xlLmxvZygnQ3VycmVudCBuZXR3b3JrOicsIG5ldHdvcmssICdFeHBlY3RlZDonLCBUQVJHRVRfQ0hBSU5fSUQpO1xuICAgICAgICBcbiAgICAgICAgY29uc3QgaXNDb3JyZWN0TmV0d29yayA9IG5ldHdvcmsgPT09IFRBUkdFVF9DSEFJTl9JRDtcbiAgICAgICAgaWYgKCFpc0NvcnJlY3ROZXR3b3JrKSB7XG4gICAgICAgICAgaWYgKHdpbmRvdy5ldGhlcmV1bSkge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgYXdhaXQgd2luZG93LmV0aGVyZXVtLnJlcXVlc3Qoe1xuICAgICAgICAgICAgICAgIG1ldGhvZDogJ3dhbGxldF9zd2l0Y2hFdGhlcmV1bUNoYWluJyxcbiAgICAgICAgICAgICAgICBwYXJhbXM6IFt7IGNoYWluSWQ6IGAweCR7VEFSR0VUX0NIQUlOX0lELnRvU3RyaW5nKDE2KX1gIH1dXG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgLy8gV2FpdCBmb3IgbmV0d29yayBzd2l0Y2ggYW5kIHZlcmlmeVxuICAgICAgICAgICAgICBhd2FpdCBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHNldFRpbWVvdXQocmVzb2x2ZSwgMjAwMCkpO1xuICAgICAgICAgICAgICBjb25zdCBuZXdDaGFpbklkID0gYXdhaXQgcHVibGljQ2xpZW50LmdldENoYWluSWQoKTtcbiAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgIGlmIChuZXdDaGFpbklkICE9PSBUQVJHRVRfQ0hBSU5fSUQpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ9mB2LTZhCDZgdmKINiq2KjYr9mK2YQg2KfZhNi02KjZg9ipIHwgTmV0d29yayBzd2l0Y2ggZmFpbGVkJyk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gY2F0Y2ggKHN3aXRjaEVycm9yOiBhbnkpIHtcbiAgICAgICAgICAgICAgaWYgKHN3aXRjaEVycm9yLmNvZGUgPT09IDQ5MDIpIHtcbiAgICAgICAgICAgICAgICBhd2FpdCB3aW5kb3cuZXRoZXJldW0ucmVxdWVzdCh7XG4gICAgICAgICAgICAgICAgICBtZXRob2Q6ICd3YWxsZXRfYWRkRXRoZXJldW1DaGFpbicsXG4gICAgICAgICAgICAgICAgICBwYXJhbXM6IFt7XG4gICAgICAgICAgICAgICAgICAgIGNoYWluSWQ6IGAweCR7VEFSR0VUX0NIQUlOX0lELnRvU3RyaW5nKDE2KX1gLFxuICAgICAgICAgICAgICAgICAgICBjaGFpbk5hbWU6ICdHYW5hY2hlIExvY2FsJyxcbiAgICAgICAgICAgICAgICAgICAgcnBjVXJsczogWydodHRwOi8vMTI3LjAuMC4xOjc1NDUnXSxcbiAgICAgICAgICAgICAgICAgICAgbmF0aXZlQ3VycmVuY3k6IHtcbiAgICAgICAgICAgICAgICAgICAgICBuYW1lOiAnRVRIJyxcbiAgICAgICAgICAgICAgICAgICAgICBzeW1ib2w6ICdFVEgnLFxuICAgICAgICAgICAgICAgICAgICAgIGRlY2ltYWxzOiAxOFxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICB9XVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcign2YrYsdis2Ykg2KrYutmK2YrYsSDYp9mE2LTYqNmD2Kkg2KXZhNmJINin2YTYtNio2YPYqSDYp9mE2YXYrdmE2YrYqSB8IFBsZWFzZSBzd2l0Y2ggdG8gbG9jYWwgbmV0d29yaycpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcign2YrYsdis2Ykg2KrYq9io2YrYqiBNZXRhTWFzayB8IFBsZWFzZSBpbnN0YWxsIE1ldGFNYXNrJyk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCFFWEFNX01BTkFHRU1FTlRfQUREUkVTUykge1xuICAgICAgICAgIHRocm93IG5ldyBFcnJvcign2LnZhtmI2KfZhiDYp9mE2LnZgtivINi62YrYsSDZhdiq2YjZgdixIHwgQ29udHJhY3QgYWRkcmVzcyBub3QgYXZhaWxhYmxlJyk7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zb2xlLmxvZygnSW5pdGlhbGl6aW5nIEV4YW1NYW5hZ2VtZW50IGNvbnRyYWN0IGF0OicsIEVYQU1fTUFOQUdFTUVOVF9BRERSRVNTKTtcblxuICAgICAgICAvLyBJbml0aWFsaXplIHJlYWQgY29udHJhY3RcbiAgICAgICAgY29uc3QgZXhhbU1hbmFnZW1lbnQgPSBnZXRDb250cmFjdCh7XG4gICAgICAgICAgYWRkcmVzczogRVhBTV9NQU5BR0VNRU5UX0FERFJFU1MgYXMgYDB4JHtzdHJpbmd9YCxcbiAgICAgICAgICBhYmk6IEV4YW1NYW5hZ2VtZW50QUJJLmFiaSxcbiAgICAgICAgICBjbGllbnQ6IHB1YmxpY0NsaWVudCxcbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gVmVyaWZ5IGNvbnRyYWN0IGV4aXN0c1xuICAgICAgICBjb25zdCBjb2RlID0gYXdhaXQgcHVibGljQ2xpZW50LmdldEJ5dGVjb2RlKHsgYWRkcmVzczogRVhBTV9NQU5BR0VNRU5UX0FERFJFU1MgYXMgYDB4JHtzdHJpbmd9YCB9KTtcbiAgICAgICAgaWYgKCFjb2RlIHx8IGNvZGUgPT09ICcweCcpIHtcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ9in2YTYudmC2K8g2LrZitixINmF2YjYrNmI2K8g2LnZhNmJINmH2LDYpyDYp9mE2LnZhtmI2KfZhiB8IENvbnRyYWN0IG5vdCBmb3VuZCBhdCBhZGRyZXNzJyk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBDcmVhdGUgYmFzZSBjb250cmFjdCB3aXRoIHJlYWQgbWV0aG9kc1xuICAgICAgICBjb25zdCBiYXNlQ29udHJhY3QgPSB7XG4gICAgICAgICAgaXNJbnN0aXR1dGlvbjogYXN5bmMgKGFkZHJlc3M6IHN0cmluZykgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIGF3YWl0IGV4YW1NYW5hZ2VtZW50LnJlYWQuaXNJbnN0aXR1dGlvbihbYWRkcmVzc10pIGFzIFByb21pc2U8Ym9vbGVhbj47XG4gICAgICAgICAgfSxcbiAgICAgICAgICBnZXRJbnN0aXR1dGlvbjogYXN5bmMgKGFkZHJlc3M6IHN0cmluZykgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIGF3YWl0IGV4YW1NYW5hZ2VtZW50LnJlYWQuZ2V0SW5zdGl0dXRpb24oW2FkZHJlc3NdKSBhcyBQcm9taXNlPGFueT47XG4gICAgICAgICAgfSxcbiAgICAgICAgICBnZXRJbnN0aXR1dGlvbkV4YW1zOiBhc3luYyAoYWRkcmVzczogc3RyaW5nKSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gYXdhaXQgZXhhbU1hbmFnZW1lbnQucmVhZC5nZXRJbnN0aXR1dGlvbkV4YW1zKFthZGRyZXNzXSkgYXMgUHJvbWlzZTxhbnlbXT47XG4gICAgICAgICAgfSxcbiAgICAgICAgICBnZXRFeGFtUmVzdWx0czogYXN5bmMgKGV4YW1JZDogc3RyaW5nKSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gYXdhaXQgZXhhbU1hbmFnZW1lbnQucmVhZC5nZXRFeGFtUmVzdWx0cyhbZXhhbUlkXSkgYXMgUHJvbWlzZTxhbnlbXT47XG4gICAgICAgICAgfSxcbiAgICAgICAgICB3cml0ZToge30gYXMgRXhhbU1hbmFnZW1lbnRDb250cmFjdFsnd3JpdGUnXVxuICAgICAgICB9O1xuXG4gICAgICAgIC8vIEluaXRpYWxpemUgd3JpdGUgbWV0aG9kcyBpZiB3YWxsZXQgaXMgY29ubmVjdGVkXG4gICAgICAgIGlmICh3YWxsZXRDbGllbnQpIHtcbiAgICAgICAgICBjb25zb2xlLmxvZygnSW5pdGlhbGl6aW5nIHdyaXRlIG1ldGhvZHMuLi4nKTtcbiAgICAgICAgICBjb25zdCBleGFtTWFuYWdlbWVudFdyaXRlID0gZ2V0Q29udHJhY3Qoe1xuICAgICAgICAgICAgYWRkcmVzczogRVhBTV9NQU5BR0VNRU5UX0FERFJFU1MgYXMgYDB4JHtzdHJpbmd9YCxcbiAgICAgICAgICAgIGFiaTogRXhhbU1hbmFnZW1lbnRBQkkuYWJpLFxuICAgICAgICAgICAgY2xpZW50OiB3YWxsZXRDbGllbnQsXG4gICAgICAgICAgfSk7XG5cbiAgICAgICAgICBiYXNlQ29udHJhY3Qud3JpdGUgPSB7XG4gICAgICAgICAgICB1cGRhdGVJbnN0aXR1dGlvblByb2ZpbGU6IGFzeW5jIChwYXJhbXM6IGFueSkgPT4ge1xuICAgICAgICAgICAgICBjb25zdCBoYXNoID0gYXdhaXQgZXhhbU1hbmFnZW1lbnRXcml0ZS53cml0ZS51cGRhdGVJbnN0aXR1dGlvblByb2ZpbGUocGFyYW1zLmFyZ3MpO1xuICAgICAgICAgICAgICByZXR1cm4geyB3YWl0OiBhc3luYyAoKSA9PiB7IGF3YWl0IHB1YmxpY0NsaWVudC53YWl0Rm9yVHJhbnNhY3Rpb25SZWNlaXB0KHsgaGFzaCB9KTsgfSB9O1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHN1Ym1pdEV4YW1SZXN1bHRzOiBhc3luYyAocGFyYW1zOiBhbnkpID0+IHtcbiAgICAgICAgICAgICAgY29uc3QgaGFzaCA9IGF3YWl0IGV4YW1NYW5hZ2VtZW50V3JpdGUud3JpdGUuc3VibWl0RXhhbVJlc3VsdHMocGFyYW1zLmFyZ3MpO1xuICAgICAgICAgICAgICByZXR1cm4geyB3YWl0OiBhc3luYyAoKSA9PiB7IGF3YWl0IHB1YmxpY0NsaWVudC53YWl0Rm9yVHJhbnNhY3Rpb25SZWNlaXB0KHsgaGFzaCB9KTsgfSB9O1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHJlZ2lzdGVyU3R1ZGVudHM6IGFzeW5jIChwYXJhbXM6IGFueSkgPT4ge1xuICAgICAgICAgICAgICBjb25zdCBoYXNoID0gYXdhaXQgZXhhbU1hbmFnZW1lbnRXcml0ZS53cml0ZS5yZWdpc3RlclN0dWRlbnRzKHBhcmFtcy5hcmdzKTtcbiAgICAgICAgICAgICAgcmV0dXJuIHsgd2FpdDogYXN5bmMgKCkgPT4geyBhd2FpdCBwdWJsaWNDbGllbnQud2FpdEZvclRyYW5zYWN0aW9uUmVjZWlwdCh7IGhhc2ggfSk7IH0gfTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB1cGRhdGVFeGFtU3RhdHVzOiBhc3luYyAocGFyYW1zOiBhbnkpID0+IHtcbiAgICAgICAgICAgICAgY29uc3QgaGFzaCA9IGF3YWl0IGV4YW1NYW5hZ2VtZW50V3JpdGUud3JpdGUudXBkYXRlRXhhbVN0YXR1cyhwYXJhbXMuYXJncyk7XG4gICAgICAgICAgICAgIHJldHVybiB7IHdhaXQ6IGFzeW5jICgpID0+IHsgYXdhaXQgcHVibGljQ2xpZW50LndhaXRGb3JUcmFuc2FjdGlvblJlY2VpcHQoeyBoYXNoIH0pOyB9IH07XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgY3JlYXRlRXhhbTogYXN5bmMgKHBhcmFtczogYW55KSA9PiB7XG4gICAgICAgICAgICAgIGNvbnN0IGhhc2ggPSBhd2FpdCBleGFtTWFuYWdlbWVudFdyaXRlLndyaXRlLmNyZWF0ZUV4YW0ocGFyYW1zLmFyZ3MpO1xuICAgICAgICAgICAgICByZXR1cm4geyB3YWl0OiBhc3luYyAoKSA9PiB7IGF3YWl0IHB1YmxpY0NsaWVudC53YWl0Rm9yVHJhbnNhY3Rpb25SZWNlaXB0KHsgaGFzaCB9KTsgfSB9O1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGlzc3VlQ2VydGlmaWNhdGU6IGFzeW5jIChwYXJhbXM6IGFueSkgPT4ge1xuICAgICAgICAgICAgICBjb25zdCBoYXNoID0gYXdhaXQgZXhhbU1hbmFnZW1lbnRXcml0ZS53cml0ZS5pc3N1ZUNlcnRpZmljYXRlKHBhcmFtcy5hcmdzKTtcbiAgICAgICAgICAgICAgcmV0dXJuIHsgd2FpdDogYXN5bmMgKCkgPT4geyBhd2FpdCBwdWJsaWNDbGllbnQud2FpdEZvclRyYW5zYWN0aW9uUmVjZWlwdCh7IGhhc2ggfSk7IH0gfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9IGFzIEV4YW1NYW5hZ2VtZW50Q29udHJhY3RbJ3dyaXRlJ107XG4gICAgICAgIH1cblxuICAgICAgICAvLyBUZXN0IGNvbnRyYWN0IGJ5IGNhbGxpbmcgYSByZWFkIG1ldGhvZFxuICAgICAgICB0cnkge1xuICAgICAgICAgIGF3YWl0IGJhc2VDb250cmFjdC5pc0luc3RpdHV0aW9uKGFjY291bnQpO1xuICAgICAgICAgIGNvbnNvbGUubG9nKCdDb250cmFjdCByZWFkIHRlc3Qgc3VjY2Vzc2Z1bCcpO1xuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0NvbnRyYWN0IHJlYWQgdGVzdCBmYWlsZWQ6JywgZXJyb3IpO1xuICAgICAgICAgIHRocm93IG5ldyBFcnJvcign2YHYtNmEINmB2Yog2KfZhNin2KrYtdin2YQg2KjYp9mE2LnZgtivIHwgRmFpbGVkIHRvIGNvbm5lY3QgdG8gY29udHJhY3QnKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChpc01vdW50ZWQpIHtcbiAgICAgICAgICBzZXRTdGF0ZShwcmV2ID0+ICh7XG4gICAgICAgICAgICAuLi5wcmV2LFxuICAgICAgICAgICAgZXhhbU1hbmFnZW1lbnRDb250cmFjdDogYmFzZUNvbnRyYWN0IGFzIEV4YW1NYW5hZ2VtZW50Q29udHJhY3QsXG4gICAgICAgICAgICBpc0Nvbm5lY3RlZDogdHJ1ZSxcbiAgICAgICAgICAgIGlzSW5pdGlhbGl6ZWQ6IHRydWUsXG4gICAgICAgICAgICBpc0xvYWRpbmc6IGZhbHNlLFxuICAgICAgICAgICAgaW5pdGlhbGl6YXRpb25FcnJvcjogbnVsbCxcbiAgICAgICAgICAgIHJldHJ5Q291bnQ6IDBcbiAgICAgICAgICB9KSk7XG4gICAgICAgICAgY29uc29sZS5sb2coJ0NvbnRyYWN0IGluaXRpYWxpemF0aW9uIHN1Y2Nlc3NmdWwnKTtcbiAgICAgICAgfVxuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcignQ29udHJhY3QgaW5pdGlhbGl6YXRpb24gZXJyb3I6JywgZXJyb3IpO1xuICAgICAgICBcbiAgICAgICAgaWYgKGlzTW91bnRlZCkge1xuICAgICAgICAgIGlmIChzdGF0ZS5yZXRyeUNvdW50IDwgMykge1xuICAgICAgICAgICAgY29uc3QgZGVsYXkgPSBNYXRoLm1pbigyMDAwICogTWF0aC5wb3coMiwgc3RhdGUucmV0cnlDb3VudCksIDgwMDApO1xuICAgICAgICAgICAgY29uc29sZS5sb2coYFJldHJ5aW5nIGluICR7ZGVsYXl9bXMuLi4gKEF0dGVtcHQgJHtzdGF0ZS5yZXRyeUNvdW50ICsgMX0vMylgKTtcbiAgICAgICAgICAgIHJldHJ5VGltZW91dCA9IHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgICBzZXRTdGF0ZShwcmV2ID0+ICh7IFxuICAgICAgICAgICAgICAgIC4uLnByZXYsXG4gICAgICAgICAgICAgICAgcmV0cnlDb3VudDogcHJldi5yZXRyeUNvdW50ICsgMSxcbiAgICAgICAgICAgICAgICBpc0xvYWRpbmc6IGZhbHNlXG4gICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgIH0sIGRlbGF5KTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgc2V0U3RhdGUocHJldiA9PiAoeyBcbiAgICAgICAgICAgICAgLi4ucHJldiwgXG4gICAgICAgICAgICAgIGlzSW5pdGlhbGl6ZWQ6IGZhbHNlLFxuICAgICAgICAgICAgICBpc0xvYWRpbmc6IGZhbHNlLFxuICAgICAgICAgICAgICBpbml0aWFsaXphdGlvbkVycm9yOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdVbmtub3duIGVycm9yJyxcbiAgICAgICAgICAgICAgcmV0cnlDb3VudDogMFxuICAgICAgICAgICAgfSkpO1xuXG4gICAgICAgICAgICB0b2FzdCh7XG4gICAgICAgICAgICAgIHRpdGxlOiAn2K7Yt9ijINmB2Yog2KrZh9mK2KbYqSDYp9mE2LnZgtmI2K8gfCBDb250cmFjdCBJbml0aWFsaXphdGlvbiBFcnJvcicsXG4gICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBgJHtlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdVbmtub3duIGVycm9yJ30gfCDZitix2KzZiSDYp9mE2KrYo9mD2K8g2YXZhiDYp9iq2LXYp9mEINin2YTZhdit2YHYuNipINmI2KfZhNi02KjZg9ipINin2YTYtdit2YrYrdipYCxcbiAgICAgICAgICAgICAgc3RhdHVzOiAnZXJyb3InLFxuICAgICAgICAgICAgICBkdXJhdGlvbjogODAwMCxcbiAgICAgICAgICAgICAgaXNDbG9zYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH07XG5cbiAgICBpbml0aWFsaXplKCk7XG5cbiAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgaXNNb3VudGVkID0gZmFsc2U7XG4gICAgICBpZiAocmV0cnlUaW1lb3V0KSB7XG4gICAgICAgIGNsZWFyVGltZW91dChyZXRyeVRpbWVvdXQpO1xuICAgICAgfVxuICAgIH07XG4gIH0sIFthY2NvdW50LCBjaGFpbklkLCB3YWxsZXRDbGllbnQsIHB1YmxpY0NsaWVudCwgc3RhdGUucmV0cnlDb3VudCwgc3RhdGUubGFzdEluaXRBdHRlbXB0VGltZSwgdG9hc3RdKTtcblxuICAvLyBFdmVudCBsaXN0ZW5lciBmb3IgbmV0d29yayBjaGFuZ2VzXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnICYmIHdpbmRvdy5ldGhlcmV1bT8ub24pIHtcbiAgICAgIGNvbnN0IGhhbmRsZUNoYWluQ2hhbmdlZCA9IGFzeW5jIChuZXdDaGFpbklkOiBzdHJpbmcpID0+IHtcbiAgICAgICAgY29uc29sZS5sb2coJ05ldHdvcmsgY2hhbmdlZCB0bzonLCBuZXdDaGFpbklkKTtcbiAgICAgICAgY29uc3QgZXhwZWN0ZWRDaGFpbklkID0gYDB4JHtUQVJHRVRfQ0hBSU5fSUQudG9TdHJpbmcoMTYpfWA7XG4gICAgICAgIFxuICAgICAgICBpZiAobmV3Q2hhaW5JZCAhPT0gZXhwZWN0ZWRDaGFpbklkKSB7XG4gICAgICAgICAgY29uc29sZS5sb2coJ1dyb25nIG5ldHdvcmsgZGV0ZWN0ZWQsIHJlc2V0dGluZyBjb250cmFjdHMuLi4nKTtcbiAgICAgICAgICBzZXRTdGF0ZShwcmV2ID0+ICh7XG4gICAgICAgICAgICAuLi5wcmV2LFxuICAgICAgICAgICAgZXhhbU1hbmFnZW1lbnRDb250cmFjdDogbnVsbCxcbiAgICAgICAgICAgIGNlcnRpZmljYXRlc0NvbnRyYWN0OiBudWxsLFxuICAgICAgICAgICAgZXhhbWluYXRpb25zQ29udHJhY3Q6IG51bGwsXG4gICAgICAgICAgICBpZGVudGl0eUNvbnRyYWN0OiBudWxsLFxuICAgICAgICAgICAgc2VjdXJpdHlVdGlsc0NvbnRyYWN0OiBudWxsLFxuICAgICAgICAgICAgaXNJbml0aWFsaXplZDogZmFsc2UsXG4gICAgICAgICAgICBpbml0aWFsaXphdGlvbkF0dGVtcHRlZDogZmFsc2UsXG4gICAgICAgICAgICBpbml0aWFsaXphdGlvbkVycm9yOiAn2YrYsdis2Ykg2KrYutmK2YrYsSDYp9mE2LTYqNmD2Kkg2KXZhNmJINin2YTYtNio2YPYqSDYp9mE2YXYrdmE2YrYqSB8IFBsZWFzZSBzd2l0Y2ggdG8gbG9jYWwgbmV0d29yaycsXG4gICAgICAgICAgICByZXRyeUNvdW50OiAwXG4gICAgICAgICAgfSkpO1xuICAgICAgICAgIFxuICAgICAgICAgIC8vIFJlbG9hZCB0aGUgcGFnZSB0byBlbnN1cmUgY2xlYW4gc3RhdGVcbiAgICAgICAgICB3aW5kb3cubG9jYXRpb24ucmVsb2FkKCk7XG4gICAgICAgIH1cbiAgICAgIH07XG5cbiAgICAgIHdpbmRvdy5ldGhlcmV1bS5vbignY2hhaW5DaGFuZ2VkJywgaGFuZGxlQ2hhaW5DaGFuZ2VkKTtcblxuICAgICAgcmV0dXJuICgpID0+IHtcbiAgICAgICAgaWYgKHdpbmRvdy5ldGhlcmV1bT8ucmVtb3ZlTGlzdGVuZXIpIHtcbiAgICAgICAgICB3aW5kb3cuZXRoZXJldW0ucmVtb3ZlTGlzdGVuZXIoJ2NoYWluQ2hhbmdlZCcsIGhhbmRsZUNoYWluQ2hhbmdlZCk7XG4gICAgICAgIH1cbiAgICAgIH07XG4gICAgfVxuICB9LCBbXSk7XG5cbiAgcmV0dXJuIHtcbiAgICBleGFtTWFuYWdlbWVudENvbnRyYWN0OiBzdGF0ZS5leGFtTWFuYWdlbWVudENvbnRyYWN0LFxuICAgIGNlcnRpZmljYXRlc0NvbnRyYWN0OiBzdGF0ZS5jZXJ0aWZpY2F0ZXNDb250cmFjdCxcbiAgICBleGFtaW5hdGlvbnNDb250cmFjdDogc3RhdGUuZXhhbWluYXRpb25zQ29udHJhY3QsXG4gICAgaWRlbnRpdHlDb250cmFjdDogc3RhdGUuaWRlbnRpdHlDb250cmFjdCxcbiAgICBzZWN1cml0eVV0aWxzQ29udHJhY3Q6IHN0YXRlLnNlY3VyaXR5VXRpbHNDb250cmFjdCxcbiAgICBhY2NvdW50LFxuICAgIGlzQ29ubmVjdGVkOiBzdGF0ZS5pc0Nvbm5lY3RlZCxcbiAgICBpc0luaXRpYWxpemVkOiBzdGF0ZS5pc0luaXRpYWxpemVkLFxuICAgIGlzTG9hZGluZzogc3RhdGUuaXNMb2FkaW5nLFxuICAgIGlzQ29ycmVjdE5ldHdvcms6IGNoYWluSWQgPT09IFRBUkdFVF9DSEFJTl9JRCxcbiAgICBpbml0aWFsaXphdGlvbkVycm9yOiBzdGF0ZS5pbml0aWFsaXphdGlvbkVycm9yXG4gIH07XG59OyAiXSwibmFtZXMiOlsidXNlRWZmZWN0IiwidXNlU3RhdGUiLCJ1c2VBY2NvdW50IiwidXNlUHVibGljQ2xpZW50IiwidXNlV2FsbGV0Q2xpZW50IiwidXNlQ2hhaW5JZCIsInVzZUNvbm5lY3QiLCJnZXRDb250cmFjdCIsIkV4YW1NYW5hZ2VtZW50QUJJIiwidXNlVG9hc3QiLCJFWEFNX01BTkFHRU1FTlRfQUREUkVTUyIsInByb2Nlc3MiLCJlbnYiLCJORVhUX1BVQkxJQ19FWEFNX01BTkFHRU1FTlRfQ09OVFJBQ1RfQUREUkVTUyIsIkNFUlRJRklDQVRFU19BRERSRVNTIiwiTkVYVF9QVUJMSUNfQ0VSVElGSUNBVEVTX0NPTlRSQUNUX0FERFJFU1MiLCJFWEFNSU5BVElPTlNfQUREUkVTUyIsIk5FWFRfUFVCTElDX0VYQU1JTkFUSU9OU19DT05UUkFDVF9BRERSRVNTIiwiSURFTlRJVFlfQUREUkVTUyIsIk5FWFRfUFVCTElDX0lERU5USVRZX0NPTlRSQUNUX0FERFJFU1MiLCJTRUNVUklUWV9VVElMU19BRERSRVNTIiwiTkVYVF9QVUJMSUNfU0VDVVJJVFlfVVRJTFNfQ09OVFJBQ1RfQUREUkVTUyIsIlRBUkdFVF9DSEFJTl9JRCIsInVzZUNvbnRyYWN0IiwiYWRkcmVzcyIsImFjY291bnQiLCJwdWJsaWNDbGllbnQiLCJkYXRhIiwid2FsbGV0Q2xpZW50IiwiY2hhaW5JZCIsImNvbm5lY3QiLCJ0b2FzdCIsInN0YXRlIiwic2V0U3RhdGUiLCJleGFtTWFuYWdlbWVudENvbnRyYWN0IiwiY2VydGlmaWNhdGVzQ29udHJhY3QiLCJleGFtaW5hdGlvbnNDb250cmFjdCIsImlkZW50aXR5Q29udHJhY3QiLCJzZWN1cml0eVV0aWxzQ29udHJhY3QiLCJpc0Nvbm5lY3RlZCIsImlzSW5pdGlhbGl6ZWQiLCJpc0xvYWRpbmciLCJuZXR3b3JrU3dpdGNoQXR0ZW1wdGVkIiwiaW5pdGlhbGl6YXRpb25BdHRlbXB0ZWQiLCJpbml0aWFsaXphdGlvbkVycm9yIiwicmV0cnlDb3VudCIsImxhc3RJbml0QXR0ZW1wdFRpbWUiLCJjaGVja0Nvbm5lY3Rpb24iLCJ0aXRsZSIsImRlc2NyaXB0aW9uIiwic3RhdHVzIiwiZHVyYXRpb24iLCJpc0Nsb3NhYmxlIiwicHJldiIsImlzTW91bnRlZCIsInJldHJ5VGltZW91dCIsImluaXRpYWxpemUiLCJjb25zb2xlIiwibG9nIiwiaGFzV2FsbGV0Q2xpZW50IiwiaGFzUHVibGljQ2xpZW50IiwidGFyZ2V0Q2hhaW5JZCIsImlzQ29ycmVjdE5ldHdvcmsiLCJub3ciLCJEYXRlIiwibmV0d29yayIsImdldENoYWluSWQiLCJ3aW5kb3ciLCJldGhlcmV1bSIsInJlcXVlc3QiLCJtZXRob2QiLCJwYXJhbXMiLCJ0b1N0cmluZyIsIlByb21pc2UiLCJyZXNvbHZlIiwic2V0VGltZW91dCIsIm5ld0NoYWluSWQiLCJFcnJvciIsInN3aXRjaEVycm9yIiwiY29kZSIsImNoYWluTmFtZSIsInJwY1VybHMiLCJuYXRpdmVDdXJyZW5jeSIsIm5hbWUiLCJzeW1ib2wiLCJkZWNpbWFscyIsImV4YW1NYW5hZ2VtZW50IiwiYWJpIiwiY2xpZW50IiwiZ2V0Qnl0ZWNvZGUiLCJiYXNlQ29udHJhY3QiLCJpc0luc3RpdHV0aW9uIiwicmVhZCIsImdldEluc3RpdHV0aW9uIiwiZ2V0SW5zdGl0dXRpb25FeGFtcyIsImdldEV4YW1SZXN1bHRzIiwiZXhhbUlkIiwid3JpdGUiLCJleGFtTWFuYWdlbWVudFdyaXRlIiwidXBkYXRlSW5zdGl0dXRpb25Qcm9maWxlIiwiaGFzaCIsImFyZ3MiLCJ3YWl0Iiwid2FpdEZvclRyYW5zYWN0aW9uUmVjZWlwdCIsInN1Ym1pdEV4YW1SZXN1bHRzIiwicmVnaXN0ZXJTdHVkZW50cyIsInVwZGF0ZUV4YW1TdGF0dXMiLCJjcmVhdGVFeGFtIiwiaXNzdWVDZXJ0aWZpY2F0ZSIsImVycm9yIiwiZGVsYXkiLCJNYXRoIiwibWluIiwicG93IiwibWVzc2FnZSIsImNsZWFyVGltZW91dCIsIm9uIiwiaGFuZGxlQ2hhaW5DaGFuZ2VkIiwiZXhwZWN0ZWRDaGFpbklkIiwibG9jYXRpb24iLCJyZWxvYWQiLCJyZW1vdmVMaXN0ZW5lciJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./hooks/useContract.ts\n"));

/***/ })

});