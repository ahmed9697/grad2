"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("pages/dashboard/institution",{

/***/ "./hooks/useContract.ts":
/*!******************************!*\
  !*** ./hooks/useContract.ts ***!
  \******************************/
/***/ (function(module, __webpack_exports__, __webpack_require__) {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   useContract: function() { return /* binding */ useContract; }\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"./node_modules/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var wagmi__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! wagmi */ \"./node_modules/wagmi/dist/esm/exports/index.js\");\n/* harmony import */ var viem__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! viem */ \"./node_modules/viem/_esm/index.js\");\n/* harmony import */ var _contracts_ExamManagement_json__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../contracts/ExamManagement.json */ \"./contracts/ExamManagement.json\");\n/* harmony import */ var _chakra_ui_react__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @chakra-ui/react */ \"./node_modules/@chakra-ui/react/dist/index.mjs\");\n\n\n\n\n\nconst EXAM_MANAGEMENT_ADDRESS = \"0x15B70b2C305c684Ef6335b64b0CA430e481c3ac5\" || 0;\nconst CERTIFICATES_ADDRESS = \"0x91F73a8778C82983253fEC5C0a63f87beA461AFd\" || 0;\nconst EXAMINATIONS_ADDRESS = \"0x1cE1DF501cF629b04c6B647e5A7BDE8245BcE02A\" || 0;\nconst IDENTITY_ADDRESS = \"0xb8F6dE405c3A2876d0a14Fa08Ee5D92793bFbbA1\" || 0;\nconst SECURITY_UTILS_ADDRESS = \"0x705D62Df2879E56545e9A9A6381c6a8e200e390c\" || 0;\nconst TARGET_CHAIN_ID = 1337; // Local network chain ID\nconst useContract = ()=>{\n    const { address: account } = (0,wagmi__WEBPACK_IMPORTED_MODULE_2__.useAccount)();\n    const publicClient = (0,wagmi__WEBPACK_IMPORTED_MODULE_2__.usePublicClient)();\n    const { data: walletClient } = (0,wagmi__WEBPACK_IMPORTED_MODULE_2__.useWalletClient)();\n    const chainId = (0,wagmi__WEBPACK_IMPORTED_MODULE_2__.useChainId)();\n    const { connect } = (0,wagmi__WEBPACK_IMPORTED_MODULE_2__.useConnect)();\n    const toast = (0,_chakra_ui_react__WEBPACK_IMPORTED_MODULE_3__.useToast)();\n    const [state, setState] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)({\n        examManagementContract: null,\n        certificatesContract: null,\n        examinationsContract: null,\n        identityContract: null,\n        securityUtilsContract: null,\n        isConnected: false,\n        isInitialized: false,\n        isLoading: false,\n        networkSwitchAttempted: false,\n        initializationAttempted: false,\n        initializationError: null,\n        retryCount: 0,\n        lastInitAttemptTime: 0,\n        networkValidated: false\n    });\n    // Reset state when account changes\n    (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(()=>{\n        if (!account) {\n            setState((prev)=>({\n                    ...prev,\n                    examManagementContract: null,\n                    certificatesContract: null,\n                    examinationsContract: null,\n                    identityContract: null,\n                    securityUtilsContract: null,\n                    isConnected: false,\n                    isInitialized: false,\n                    networkSwitchAttempted: false,\n                    initializationAttempted: false,\n                    networkValidated: false\n                }));\n        }\n    }, [\n        account\n    ]);\n    // Handle network validation and switching\n    (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(()=>{\n        let isMounted = true;\n        const validateNetwork = async ()=>{\n            if (!account || !publicClient || state.networkValidated) return;\n            try {\n                const network = await publicClient.getChainId();\n                console.log(\"Network validation - Current:\", network, \"Expected:\", TARGET_CHAIN_ID);\n                if (network !== TARGET_CHAIN_ID && !state.networkSwitchAttempted) {\n                    if (!window.ethereum) {\n                        throw new Error(\"MetaMask not installed\");\n                    }\n                    setState((prev)=>({\n                            ...prev,\n                            networkSwitchAttempted: true\n                        }));\n                    try {\n                        await window.ethereum.request({\n                            method: \"wallet_switchEthereumChain\",\n                            params: [\n                                {\n                                    chainId: \"0x\".concat(TARGET_CHAIN_ID.toString(16))\n                                }\n                            ]\n                        });\n                    } catch (switchError) {\n                        if (switchError.code === 4902) {\n                            await window.ethereum.request({\n                                method: \"wallet_addEthereumChain\",\n                                params: [\n                                    {\n                                        chainId: \"0x\".concat(TARGET_CHAIN_ID.toString(16)),\n                                        chainName: \"Ganache Local\",\n                                        rpcUrls: [\n                                            \"http://127.0.0.1:7545\"\n                                        ],\n                                        nativeCurrency: {\n                                            name: \"ETH\",\n                                            symbol: \"ETH\",\n                                            decimals: 18\n                                        }\n                                    }\n                                ]\n                            });\n                        } else {\n                            throw switchError;\n                        }\n                    }\n                    // Wait for network switch to complete\n                    await new Promise((resolve)=>setTimeout(resolve, 2000));\n                    // Verify the switch\n                    const newNetwork = await publicClient.getChainId();\n                    if (newNetwork !== TARGET_CHAIN_ID) {\n                        throw new Error(\"Network switch failed\");\n                    }\n                }\n                if (isMounted) {\n                    setState((prev)=>({\n                            ...prev,\n                            networkValidated: true\n                        }));\n                }\n            } catch (error) {\n                console.error(\"Network validation error:\", error);\n                if (isMounted) {\n                    setState((prev)=>({\n                            ...prev,\n                            networkValidated: false,\n                            initializationError: error instanceof Error ? error.message : \"Network validation failed\"\n                        }));\n                    toast({\n                        title: \"خطأ في التحقق من الشبكة | Network Validation Error\",\n                        description: \"\".concat(error instanceof Error ? error.message : \"Unknown error\", \" | يرجى التأكد من اتصال المحفظة والشبكة الصحيحة\"),\n                        status: \"error\",\n                        duration: 5000,\n                        isClosable: true\n                    });\n                }\n            }\n        };\n        validateNetwork();\n        return ()=>{\n            isMounted = false;\n        };\n    }, [\n        account,\n        publicClient,\n        state.networkValidated,\n        state.networkSwitchAttempted,\n        toast\n    ]);\n    // Initialize contracts only after network validation\n    (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(()=>{\n        let isMounted = true;\n        let retryTimeout;\n        const initialize = async ()=>{\n            if (!isMounted || !account || !walletClient || !publicClient) {\n                console.log(\"Waiting for dependencies...\");\n                return;\n            }\n            try {\n                // Verify network first\n                const network = await publicClient.getChainId();\n                console.log(\"Network validation - Current:\", network, \"Expected:\", TARGET_CHAIN_ID);\n                if (network !== TARGET_CHAIN_ID) {\n                    if (!window.ethereum) {\n                        throw new Error(\"MetaMask not installed\");\n                    }\n                    console.log(\"Attempting to switch network...\");\n                    try {\n                        await window.ethereum.request({\n                            method: \"wallet_switchEthereumChain\",\n                            params: [\n                                {\n                                    chainId: \"0x\".concat(TARGET_CHAIN_ID.toString(16))\n                                }\n                            ]\n                        });\n                        // Wait for network switch to complete\n                        await new Promise((resolve)=>setTimeout(resolve, 2000));\n                        // Verify the switch\n                        const newNetwork = await publicClient.getChainId();\n                        if (newNetwork !== TARGET_CHAIN_ID) {\n                            throw new Error(\"Network switch verification failed\");\n                        }\n                        console.log(\"Successfully switched to correct network\");\n                    } catch (switchError) {\n                        if (switchError.code === 4902) {\n                            console.log(\"Network not found, adding...\");\n                            await window.ethereum.request({\n                                method: \"wallet_addEthereumChain\",\n                                params: [\n                                    {\n                                        chainId: \"0x\".concat(TARGET_CHAIN_ID.toString(16)),\n                                        chainName: \"Ganache Local\",\n                                        rpcUrls: [\n                                            \"http://127.0.0.1:7545\"\n                                        ],\n                                        nativeCurrency: {\n                                            name: \"ETH\",\n                                            symbol: \"ETH\",\n                                            decimals: 18\n                                        }\n                                    }\n                                ]\n                            });\n                            // Wait and verify again\n                            await new Promise((resolve)=>setTimeout(resolve, 2000));\n                            const finalNetwork = await publicClient.getChainId();\n                            if (finalNetwork !== TARGET_CHAIN_ID) {\n                                throw new Error(\"Network add verification failed\");\n                            }\n                        } else {\n                            throw switchError;\n                        }\n                    }\n                }\n                // Initialize contracts\n                console.log(\"Initializing contracts...\");\n                if (!EXAM_MANAGEMENT_ADDRESS) {\n                    throw new Error(\"Contract address not configured\");\n                }\n                // Verify contract exists\n                const code = await publicClient.getBytecode({\n                    address: EXAM_MANAGEMENT_ADDRESS\n                });\n                if (!code || code === \"0x\") {\n                    throw new Error(\"Contract not deployed at address\");\n                }\n                // Initialize contract\n                const examManagement = (0,viem__WEBPACK_IMPORTED_MODULE_4__.getContract)({\n                    address: EXAM_MANAGEMENT_ADDRESS,\n                    abi: _contracts_ExamManagement_json__WEBPACK_IMPORTED_MODULE_1__.abi,\n                    client: publicClient\n                });\n                // Test contract connection\n                try {\n                    await examManagement.read.isInstitution([\n                        account\n                    ]);\n                    console.log(\"Contract connection test successful\");\n                } catch (error) {\n                    console.error(\"Contract connection test failed:\", error);\n                    throw new Error(\"Contract connection failed\");\n                }\n                if (isMounted) {\n                    setState((prev)=>({\n                            ...prev,\n                            examManagementContract: examManagement,\n                            isConnected: true,\n                            isInitialized: true,\n                            isLoading: false,\n                            initializationError: null\n                        }));\n                }\n            } catch (error) {\n                console.error(\"Contract initialization error:\", error);\n                if (isMounted) {\n                    setState((prev)=>({\n                            ...prev,\n                            isLoading: false,\n                            initializationError: error instanceof Error ? error.message : \"Unknown error\",\n                            isInitialized: false\n                        }));\n                    toast({\n                        title: \"خطأ في تهيئة العقود | Contract Initialization Error\",\n                        description: error instanceof Error ? \"\".concat(error.message, \" | يرجى التأكد من اتصال المحفظة والشبكة الصحيحة\") : \"حدث خطأ غير معروف | An unknown error occurred\",\n                        status: \"error\",\n                        duration: 5000,\n                        isClosable: true\n                    });\n                }\n            }\n        };\n        initialize();\n        return ()=>{\n            isMounted = false;\n            if (retryTimeout) {\n                clearTimeout(retryTimeout);\n            }\n        };\n    }, [\n        account,\n        walletClient,\n        publicClient,\n        toast\n    ]);\n    // Reset state on network change\n    (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(()=>{\n        var _window_ethereum;\n        if ( true && ((_window_ethereum = window.ethereum) === null || _window_ethereum === void 0 ? void 0 : _window_ethereum.on)) {\n            const handleChainChanged = ()=>{\n                setState((prev)=>({\n                        ...prev,\n                        examManagementContract: null,\n                        certificatesContract: null,\n                        examinationsContract: null,\n                        identityContract: null,\n                        securityUtilsContract: null,\n                        isInitialized: false,\n                        isConnected: false,\n                        initializationError: null\n                    }));\n            };\n            window.ethereum.on(\"chainChanged\", handleChainChanged);\n            return ()=>{\n                var _window_ethereum;\n                if ((_window_ethereum = window.ethereum) === null || _window_ethereum === void 0 ? void 0 : _window_ethereum.removeListener) {\n                    window.ethereum.removeListener(\"chainChanged\", handleChainChanged);\n                }\n            };\n        }\n    }, []);\n    return {\n        examManagementContract: state.examManagementContract,\n        certificatesContract: state.certificatesContract,\n        examinationsContract: state.examinationsContract,\n        identityContract: state.identityContract,\n        securityUtilsContract: state.securityUtilsContract,\n        account,\n        isConnected: state.isConnected,\n        isInitialized: state.isInitialized,\n        isLoading: state.isLoading,\n        isCorrectNetwork: chainId === TARGET_CHAIN_ID,\n        initializationError: state.initializationError\n    };\n};\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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T0MsUUFBUSxDQUFDcUMsY0FBYyxDQUFDLGdCQUFnQkQ7Z0JBQ2pEO1lBQ0Y7UUFDRjtJQUNGLEdBQUcsRUFBRTtJQUVMLE9BQU87UUFDTDFELHdCQUF3QkYsTUFBTUUsc0JBQXNCO1FBQ3BEQyxzQkFBc0JILE1BQU1HLG9CQUFvQjtRQUNoREMsc0JBQXNCSixNQUFNSSxvQkFBb0I7UUFDaERDLGtCQUFrQkwsTUFBTUssZ0JBQWdCO1FBQ3hDQyx1QkFBdUJOLE1BQU1NLHFCQUFxQjtRQUNsRGI7UUFDQWMsYUFBYVAsTUFBTU8sV0FBVztRQUM5QkMsZUFBZVIsTUFBTVEsYUFBYTtRQUNsQ0MsV0FBV1QsTUFBTVMsU0FBUztRQUMxQnFELGtCQUFrQmpFLFlBQVlQO1FBQzlCc0IscUJBQXFCWixNQUFNWSxtQkFBbUI7SUFDaEQ7QUFDRixFQUFFIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vX05fRS8uL2hvb2tzL3VzZUNvbnRyYWN0LnRzPzRmMzIiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgdXNlRWZmZWN0LCB1c2VTdGF0ZSB9IGZyb20gJ3JlYWN0JztcbmltcG9ydCB7IHVzZUFjY291bnQsIHVzZVB1YmxpY0NsaWVudCwgdXNlV2FsbGV0Q2xpZW50LCB1c2VDaGFpbklkLCB1c2VDb25uZWN0IH0gZnJvbSAnd2FnbWknO1xuaW1wb3J0IHsgZ2V0Q29udHJhY3QgfSBmcm9tICd2aWVtJztcbmltcG9ydCBFeGFtTWFuYWdlbWVudEFCSSBmcm9tICcuLi9jb250cmFjdHMvRXhhbU1hbmFnZW1lbnQuanNvbic7XG5pbXBvcnQgQ2VydGlmaWNhdGVzQUJJIGZyb20gJy4uL2NvbnRyYWN0cy9DZXJ0aWZpY2F0ZXMuanNvbic7XG5pbXBvcnQgRXhhbWluYXRpb25zQUJJIGZyb20gJy4uL2NvbnRyYWN0cy9FeGFtaW5hdGlvbnMuanNvbic7XG5pbXBvcnQgSWRlbnRpdHlBQkkgZnJvbSAnLi4vY29udHJhY3RzL0lkZW50aXR5Lmpzb24nO1xuaW1wb3J0IFNlY3VyaXR5VXRpbHNBQkkgZnJvbSAnLi4vY29udHJhY3RzL1NlY3VyaXR5VXRpbHMuanNvbic7XG5pbXBvcnQgeyB1c2VUb2FzdCB9IGZyb20gJ0BjaGFrcmEtdWkvcmVhY3QnO1xuXG5jb25zdCBFWEFNX01BTkFHRU1FTlRfQUREUkVTUyA9IHByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX0VYQU1fTUFOQUdFTUVOVF9DT05UUkFDVF9BRERSRVNTIHx8ICcnO1xuY29uc3QgQ0VSVElGSUNBVEVTX0FERFJFU1MgPSBwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19DRVJUSUZJQ0FURVNfQ09OVFJBQ1RfQUREUkVTUyB8fCAnJztcbmNvbnN0IEVYQU1JTkFUSU9OU19BRERSRVNTID0gcHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfRVhBTUlOQVRJT05TX0NPTlRSQUNUX0FERFJFU1MgfHwgJyc7XG5jb25zdCBJREVOVElUWV9BRERSRVNTID0gcHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfSURFTlRJVFlfQ09OVFJBQ1RfQUREUkVTUyB8fCAnJztcbmNvbnN0IFNFQ1VSSVRZX1VUSUxTX0FERFJFU1MgPSBwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19TRUNVUklUWV9VVElMU19DT05UUkFDVF9BRERSRVNTIHx8ICcnO1xuY29uc3QgVEFSR0VUX0NIQUlOX0lEID0gMTMzNzsgLy8gTG9jYWwgbmV0d29yayBjaGFpbiBJRFxuXG5pbnRlcmZhY2UgRXhhbU1hbmFnZW1lbnRDb250cmFjdCB7XG4gIGlzSW5zdGl0dXRpb246IChhZGRyZXNzOiBzdHJpbmcpID0+IFByb21pc2U8Ym9vbGVhbj47XG4gIGdldEluc3RpdHV0aW9uOiAoYWRkcmVzczogc3RyaW5nKSA9PiBQcm9taXNlPGFueT47XG4gIGdldEluc3RpdHV0aW9uRXhhbXM6IChhZGRyZXNzOiBzdHJpbmcpID0+IFByb21pc2U8YW55W10+O1xuICBnZXRFeGFtUmVzdWx0czogKGV4YW1JZDogc3RyaW5nKSA9PiBQcm9taXNlPGFueVtdPjtcbiAgcHJvdmlkZXI/OiBhbnk7XG4gIHJ1bm5lcj86IGFueTtcbiAgd3JpdGU6IHtcbiAgICB1cGRhdGVJbnN0aXR1dGlvblByb2ZpbGU6IChwYXJhbXM6IHtcbiAgICAgIGFyZ3M6IFtcbiAgICAgICAgbmFtZTogc3RyaW5nLFxuICAgICAgICBtaW5pc3RyeTogc3RyaW5nLFxuICAgICAgICB1bml2ZXJzaXR5OiBzdHJpbmcsXG4gICAgICAgIGNvbGxlZ2U6IHN0cmluZyxcbiAgICAgICAgZGVzY3JpcHRpb246IHN0cmluZyxcbiAgICAgICAgbG9nbzogc3RyaW5nLFxuICAgICAgICB3ZWJzaXRlOiBzdHJpbmcsXG4gICAgICAgIGVtYWlsOiBzdHJpbmcsXG4gICAgICAgIHBob25lOiBzdHJpbmdcbiAgICAgIF1cbiAgICB9KSA9PiBQcm9taXNlPHsgd2FpdDogKCkgPT4gUHJvbWlzZTx2b2lkPiB9PjtcbiAgICBzdWJtaXRFeGFtUmVzdWx0czogKHBhcmFtczoge1xuICAgICAgYXJnczogW2V4YW1JZDogc3RyaW5nLCByZXN1bHRzOiBhbnlbXV0sXG4gICAgICBjaGFpbklkPzogbnVtYmVyXG4gICAgfSkgPT4gUHJvbWlzZTx7IHdhaXQ6ICgpID0+IFByb21pc2U8dm9pZD4gfT47XG4gICAgcmVnaXN0ZXJTdHVkZW50czogKHBhcmFtczoge1xuICAgICAgYXJnczogW2V4YW1JZDogc3RyaW5nLCBzdHVkZW50czogc3RyaW5nW11dLFxuICAgICAgY2hhaW5JZD86IG51bWJlclxuICAgIH0pID0+IFByb21pc2U8eyB3YWl0OiAoKSA9PiBQcm9taXNlPHZvaWQ+IH0+O1xuICAgIHVwZGF0ZUV4YW1TdGF0dXM6IChwYXJhbXM6IHtcbiAgICAgIGFyZ3M6IFtleGFtSWQ6IHN0cmluZywgc3RhdHVzOiBzdHJpbmddLFxuICAgICAgY2hhaW5JZD86IG51bWJlclxuICAgIH0pID0+IFByb21pc2U8eyB3YWl0OiAoKSA9PiBQcm9taXNlPHZvaWQ+IH0+O1xuICAgIGNyZWF0ZUV4YW06IChwYXJhbXM6IHtcbiAgICAgIGFyZ3M6IFt0aXRsZTogc3RyaW5nLCBkZXNjcmlwdGlvbjogc3RyaW5nLCBkYXRlOiBudW1iZXJdLFxuICAgICAgY2hhaW5JZD86IG51bWJlclxuICAgIH0pID0+IFByb21pc2U8eyB3YWl0OiAoKSA9PiBQcm9taXNlPHZvaWQ+IH0+O1xuICAgIGlzc3VlQ2VydGlmaWNhdGU6IChwYXJhbXM6IHtcbiAgICAgIGFyZ3M6IFtzdHVkZW50OiBzdHJpbmcsIHRpdGxlOiBzdHJpbmcsIGRlc2NyaXB0aW9uOiBzdHJpbmddLFxuICAgICAgY2hhaW5JZD86IG51bWJlclxuICAgIH0pID0+IFByb21pc2U8eyB3YWl0OiAoKSA9PiBQcm9taXNlPHZvaWQ+IH0+O1xuICB9O1xufVxuXG5pbnRlcmZhY2UgQ2VydGlmaWNhdGVzQ29udHJhY3Qge1xuICBnZXRJbnN0aXR1dGlvbkNlcnRpZmljYXRlczogKGFkZHJlc3M6IHN0cmluZykgPT4gUHJvbWlzZTxhbnlbXT47XG4gIHdyaXRlOiB7XG4gICAgaXNzdWVDZXJ0aWZpY2F0ZTogKHBhcmFtczoge1xuICAgICAgYXJnczogW3N0dWRlbnRBZGRyZXNzOiBzdHJpbmcsIHRpdGxlOiBzdHJpbmcsIGRlc2NyaXB0aW9uOiBzdHJpbmddLFxuICAgICAgY2hhaW5JZD86IG51bWJlclxuICAgIH0pID0+IFByb21pc2U8eyB3YWl0OiAoKSA9PiBQcm9taXNlPHZvaWQ+IH0+O1xuICB9O1xufVxuXG5pbnRlcmZhY2UgRXhhbWluYXRpb25zQ29udHJhY3Qge1xuICAvLyBBZGQgZXhhbWluYXRpb24gY29udHJhY3QgbWV0aG9kcyBoZXJlXG4gIHdyaXRlOiB7XG4gICAgY3JlYXRlRXhhbWluYXRpb246IChwYXJhbXM6IHtcbiAgICAgIGFyZ3M6IFtpcGZzSGFzaDogc3RyaW5nLCBzdGFydFRpbWU6IG51bWJlciwgZW5kVGltZTogbnVtYmVyXSxcbiAgICAgIGNoYWluSWQ/OiBudW1iZXJcbiAgICB9KSA9PiBQcm9taXNlPHsgd2FpdDogKCkgPT4gUHJvbWlzZTx2b2lkPiB9PjtcbiAgICByZWdpc3RlckZvckV4YW06IChwYXJhbXM6IHtcbiAgICAgIGFyZ3M6IFtleGFtSWQ6IHN0cmluZ10sXG4gICAgICBjaGFpbklkPzogbnVtYmVyXG4gICAgfSkgPT4gUHJvbWlzZTx7IHdhaXQ6ICgpID0+IFByb21pc2U8dm9pZD4gfT47XG4gIH07XG59XG5cbmludGVyZmFjZSBJZGVudGl0eUNvbnRyYWN0IHtcbiAgLy8gQWRkIGlkZW50aXR5IGNvbnRyYWN0IG1ldGhvZHMgaGVyZVxuICB3cml0ZToge1xuICAgIHJlZ2lzdGVySWRlbnRpdHk6IChwYXJhbXM6IHtcbiAgICAgIGFyZ3M6IFtuYW1lOiBzdHJpbmcsIGVtYWlsOiBzdHJpbmddLFxuICAgICAgY2hhaW5JZD86IG51bWJlclxuICAgIH0pID0+IFByb21pc2U8eyB3YWl0OiAoKSA9PiBQcm9taXNlPHZvaWQ+IH0+O1xuICB9O1xufVxuXG5pbnRlcmZhY2UgU2VjdXJpdHlVdGlsc0NvbnRyYWN0IHtcbiAgLy8gQWRkIHNlY3VyaXR5IHV0aWxzIGNvbnRyYWN0IG1ldGhvZHMgaGVyZVxuICB3cml0ZToge1xuICAgIHZlcmlmeUhhc2g6IChwYXJhbXM6IHtcbiAgICAgIGFyZ3M6IFtoYXNoOiBzdHJpbmcsIHNpZ25hdHVyZTogc3RyaW5nXSxcbiAgICAgIGNoYWluSWQ/OiBudW1iZXJcbiAgICB9KSA9PiBQcm9taXNlPHsgd2FpdDogKCkgPT4gUHJvbWlzZTx2b2lkPiB9PjtcbiAgfTtcbn1cblxuZXhwb3J0IGNvbnN0IHVzZUNvbnRyYWN0ID0gKCkgPT4ge1xuICBjb25zdCB7IGFkZHJlc3M6IGFjY291bnQgfSA9IHVzZUFjY291bnQoKTtcbiAgY29uc3QgcHVibGljQ2xpZW50ID0gdXNlUHVibGljQ2xpZW50KCk7XG4gIGNvbnN0IHsgZGF0YTogd2FsbGV0Q2xpZW50IH0gPSB1c2VXYWxsZXRDbGllbnQoKTtcbiAgY29uc3QgY2hhaW5JZCA9IHVzZUNoYWluSWQoKTtcbiAgY29uc3QgeyBjb25uZWN0IH0gPSB1c2VDb25uZWN0KCk7XG4gIGNvbnN0IHRvYXN0ID0gdXNlVG9hc3QoKTtcbiAgXG4gIGNvbnN0IFtzdGF0ZSwgc2V0U3RhdGVdID0gdXNlU3RhdGUoe1xuICAgIGV4YW1NYW5hZ2VtZW50Q29udHJhY3Q6IG51bGwgYXMgRXhhbU1hbmFnZW1lbnRDb250cmFjdCB8IG51bGwsXG4gICAgY2VydGlmaWNhdGVzQ29udHJhY3Q6IG51bGwgYXMgQ2VydGlmaWNhdGVzQ29udHJhY3QgfCBudWxsLFxuICAgIGV4YW1pbmF0aW9uc0NvbnRyYWN0OiBudWxsIGFzIEV4YW1pbmF0aW9uc0NvbnRyYWN0IHwgbnVsbCxcbiAgICBpZGVudGl0eUNvbnRyYWN0OiBudWxsIGFzIElkZW50aXR5Q29udHJhY3QgfCBudWxsLFxuICAgIHNlY3VyaXR5VXRpbHNDb250cmFjdDogbnVsbCBhcyBTZWN1cml0eVV0aWxzQ29udHJhY3QgfCBudWxsLFxuICAgIGlzQ29ubmVjdGVkOiBmYWxzZSxcbiAgICBpc0luaXRpYWxpemVkOiBmYWxzZSxcbiAgICBpc0xvYWRpbmc6IGZhbHNlLFxuICAgIG5ldHdvcmtTd2l0Y2hBdHRlbXB0ZWQ6IGZhbHNlLFxuICAgIGluaXRpYWxpemF0aW9uQXR0ZW1wdGVkOiBmYWxzZSxcbiAgICBpbml0aWFsaXphdGlvbkVycm9yOiBudWxsIGFzIHN0cmluZyB8IG51bGwsXG4gICAgcmV0cnlDb3VudDogMCxcbiAgICBsYXN0SW5pdEF0dGVtcHRUaW1lOiAwLFxuICAgIG5ldHdvcmtWYWxpZGF0ZWQ6IGZhbHNlXG4gIH0pO1xuXG4gIC8vIFJlc2V0IHN0YXRlIHdoZW4gYWNjb3VudCBjaGFuZ2VzXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKCFhY2NvdW50KSB7XG4gICAgICBzZXRTdGF0ZShwcmV2ID0+ICh7XG4gICAgICAgIC4uLnByZXYsXG4gICAgICAgIGV4YW1NYW5hZ2VtZW50Q29udHJhY3Q6IG51bGwsXG4gICAgICAgIGNlcnRpZmljYXRlc0NvbnRyYWN0OiBudWxsLFxuICAgICAgICBleGFtaW5hdGlvbnNDb250cmFjdDogbnVsbCxcbiAgICAgICAgaWRlbnRpdHlDb250cmFjdDogbnVsbCxcbiAgICAgICAgc2VjdXJpdHlVdGlsc0NvbnRyYWN0OiBudWxsLFxuICAgICAgICBpc0Nvbm5lY3RlZDogZmFsc2UsXG4gICAgICAgIGlzSW5pdGlhbGl6ZWQ6IGZhbHNlLFxuICAgICAgICBuZXR3b3JrU3dpdGNoQXR0ZW1wdGVkOiBmYWxzZSxcbiAgICAgICAgaW5pdGlhbGl6YXRpb25BdHRlbXB0ZWQ6IGZhbHNlLFxuICAgICAgICBuZXR3b3JrVmFsaWRhdGVkOiBmYWxzZVxuICAgICAgfSkpO1xuICAgIH1cbiAgfSwgW2FjY291bnRdKTtcblxuICAvLyBIYW5kbGUgbmV0d29yayB2YWxpZGF0aW9uIGFuZCBzd2l0Y2hpbmdcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBsZXQgaXNNb3VudGVkID0gdHJ1ZTtcbiAgICBcbiAgICBjb25zdCB2YWxpZGF0ZU5ldHdvcmsgPSBhc3luYyAoKSA9PiB7XG4gICAgICBpZiAoIWFjY291bnQgfHwgIXB1YmxpY0NsaWVudCB8fCBzdGF0ZS5uZXR3b3JrVmFsaWRhdGVkKSByZXR1cm47XG4gICAgICBcbiAgICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IG5ldHdvcmsgPSBhd2FpdCBwdWJsaWNDbGllbnQuZ2V0Q2hhaW5JZCgpO1xuICAgICAgICBjb25zb2xlLmxvZygnTmV0d29yayB2YWxpZGF0aW9uIC0gQ3VycmVudDonLCBuZXR3b3JrLCAnRXhwZWN0ZWQ6JywgVEFSR0VUX0NIQUlOX0lEKTtcbiAgICAgICAgXG4gICAgICAgIGlmIChuZXR3b3JrICE9PSBUQVJHRVRfQ0hBSU5fSUQgJiYgIXN0YXRlLm5ldHdvcmtTd2l0Y2hBdHRlbXB0ZWQpIHtcbiAgICAgICAgICBpZiAoIXdpbmRvdy5ldGhlcmV1bSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdNZXRhTWFzayBub3QgaW5zdGFsbGVkJyk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgc2V0U3RhdGUocHJldiA9PiAoeyAuLi5wcmV2LCBuZXR3b3JrU3dpdGNoQXR0ZW1wdGVkOiB0cnVlIH0pKTtcbiAgICAgICAgICBcbiAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgYXdhaXQgd2luZG93LmV0aGVyZXVtLnJlcXVlc3Qoe1xuICAgICAgICAgICAgICBtZXRob2Q6ICd3YWxsZXRfc3dpdGNoRXRoZXJldW1DaGFpbicsXG4gICAgICAgICAgICAgIHBhcmFtczogW3sgY2hhaW5JZDogYDB4JHtUQVJHRVRfQ0hBSU5fSUQudG9TdHJpbmcoMTYpfWAgfV1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH0gY2F0Y2ggKHN3aXRjaEVycm9yOiBhbnkpIHtcbiAgICAgICAgICAgIGlmIChzd2l0Y2hFcnJvci5jb2RlID09PSA0OTAyKSB7XG4gICAgICAgICAgICAgIGF3YWl0IHdpbmRvdy5ldGhlcmV1bS5yZXF1ZXN0KHtcbiAgICAgICAgICAgICAgICBtZXRob2Q6ICd3YWxsZXRfYWRkRXRoZXJldW1DaGFpbicsXG4gICAgICAgICAgICAgICAgcGFyYW1zOiBbe1xuICAgICAgICAgICAgICAgICAgY2hhaW5JZDogYDB4JHtUQVJHRVRfQ0hBSU5fSUQudG9TdHJpbmcoMTYpfWAsXG4gICAgICAgICAgICAgICAgICBjaGFpbk5hbWU6ICdHYW5hY2hlIExvY2FsJyxcbiAgICAgICAgICAgICAgICAgIHJwY1VybHM6IFsnaHR0cDovLzEyNy4wLjAuMTo3NTQ1J10sXG4gICAgICAgICAgICAgICAgICBuYXRpdmVDdXJyZW5jeToge1xuICAgICAgICAgICAgICAgICAgICBuYW1lOiAnRVRIJyxcbiAgICAgICAgICAgICAgICAgICAgc3ltYm9sOiAnRVRIJyxcbiAgICAgICAgICAgICAgICAgICAgZGVjaW1hbHM6IDE4XG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfV1cbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICB0aHJvdyBzd2l0Y2hFcnJvcjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgXG4gICAgICAgICAgLy8gV2FpdCBmb3IgbmV0d29yayBzd2l0Y2ggdG8gY29tcGxldGVcbiAgICAgICAgICBhd2FpdCBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHNldFRpbWVvdXQocmVzb2x2ZSwgMjAwMCkpO1xuICAgICAgICAgIFxuICAgICAgICAgIC8vIFZlcmlmeSB0aGUgc3dpdGNoXG4gICAgICAgICAgY29uc3QgbmV3TmV0d29yayA9IGF3YWl0IHB1YmxpY0NsaWVudC5nZXRDaGFpbklkKCk7XG4gICAgICAgICAgaWYgKG5ld05ldHdvcmsgIT09IFRBUkdFVF9DSEFJTl9JRCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdOZXR3b3JrIHN3aXRjaCBmYWlsZWQnKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIGlmIChpc01vdW50ZWQpIHtcbiAgICAgICAgICBzZXRTdGF0ZShwcmV2ID0+ICh7IC4uLnByZXYsIG5ldHdvcmtWYWxpZGF0ZWQ6IHRydWUgfSkpO1xuICAgICAgICB9XG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICBjb25zb2xlLmVycm9yKCdOZXR3b3JrIHZhbGlkYXRpb24gZXJyb3I6JywgZXJyb3IpO1xuICAgICAgICBpZiAoaXNNb3VudGVkKSB7XG4gICAgICAgICAgc2V0U3RhdGUocHJldiA9PiAoe1xuICAgICAgICAgICAgLi4ucHJldixcbiAgICAgICAgICAgIG5ldHdvcmtWYWxpZGF0ZWQ6IGZhbHNlLFxuICAgICAgICAgICAgaW5pdGlhbGl6YXRpb25FcnJvcjogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnTmV0d29yayB2YWxpZGF0aW9uIGZhaWxlZCdcbiAgICAgICAgICB9KSk7XG4gICAgICAgICAgXG4gICAgICAgICAgdG9hc3Qoe1xuICAgICAgICAgICAgdGl0bGU6ICfYrti32KMg2YHZiiDYp9mE2KrYrdmC2YIg2YXZhiDYp9mE2LTYqNmD2KkgfCBOZXR3b3JrIFZhbGlkYXRpb24gRXJyb3InLFxuICAgICAgICAgICAgZGVzY3JpcHRpb246IGAke2Vycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ1Vua25vd24gZXJyb3InfSB8INmK2LHYrNmJINin2YTYqtij2YPYryDZhdmGINin2KrYtdin2YQg2KfZhNmF2K3Zgdi42Kkg2YjYp9mE2LTYqNmD2Kkg2KfZhNi12K3Zitit2KlgLFxuICAgICAgICAgICAgc3RhdHVzOiAnZXJyb3InLFxuICAgICAgICAgICAgZHVyYXRpb246IDUwMDAsXG4gICAgICAgICAgICBpc0Nsb3NhYmxlOiB0cnVlLFxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfTtcblxuICAgIHZhbGlkYXRlTmV0d29yaygpO1xuICAgIFxuICAgIHJldHVybiAoKSA9PiB7XG4gICAgICBpc01vdW50ZWQgPSBmYWxzZTtcbiAgICB9O1xuICB9LCBbYWNjb3VudCwgcHVibGljQ2xpZW50LCBzdGF0ZS5uZXR3b3JrVmFsaWRhdGVkLCBzdGF0ZS5uZXR3b3JrU3dpdGNoQXR0ZW1wdGVkLCB0b2FzdF0pO1xuXG4gIC8vIEluaXRpYWxpemUgY29udHJhY3RzIG9ubHkgYWZ0ZXIgbmV0d29yayB2YWxpZGF0aW9uXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgbGV0IGlzTW91bnRlZCA9IHRydWU7XG4gICAgbGV0IHJldHJ5VGltZW91dDogTm9kZUpTLlRpbWVvdXQ7XG5cbiAgICBjb25zdCBpbml0aWFsaXplID0gYXN5bmMgKCkgPT4ge1xuICAgICAgaWYgKCFpc01vdW50ZWQgfHwgIWFjY291bnQgfHwgIXdhbGxldENsaWVudCB8fCAhcHVibGljQ2xpZW50KSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdXYWl0aW5nIGZvciBkZXBlbmRlbmNpZXMuLi4nKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICB0cnkge1xuICAgICAgICAvLyBWZXJpZnkgbmV0d29yayBmaXJzdFxuICAgICAgICBjb25zdCBuZXR3b3JrID0gYXdhaXQgcHVibGljQ2xpZW50LmdldENoYWluSWQoKTtcbiAgICAgICAgY29uc29sZS5sb2coJ05ldHdvcmsgdmFsaWRhdGlvbiAtIEN1cnJlbnQ6JywgbmV0d29yaywgJ0V4cGVjdGVkOicsIFRBUkdFVF9DSEFJTl9JRCk7XG4gICAgICAgIFxuICAgICAgICBpZiAobmV0d29yayAhPT0gVEFSR0VUX0NIQUlOX0lEKSB7XG4gICAgICAgICAgaWYgKCF3aW5kb3cuZXRoZXJldW0pIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignTWV0YU1hc2sgbm90IGluc3RhbGxlZCcpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGNvbnNvbGUubG9nKCdBdHRlbXB0aW5nIHRvIHN3aXRjaCBuZXR3b3JrLi4uJyk7XG4gICAgICAgICAgXG4gICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGF3YWl0IHdpbmRvdy5ldGhlcmV1bS5yZXF1ZXN0KHtcbiAgICAgICAgICAgICAgbWV0aG9kOiAnd2FsbGV0X3N3aXRjaEV0aGVyZXVtQ2hhaW4nLFxuICAgICAgICAgICAgICBwYXJhbXM6IFt7IGNoYWluSWQ6IGAweCR7VEFSR0VUX0NIQUlOX0lELnRvU3RyaW5nKDE2KX1gIH1dXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gV2FpdCBmb3IgbmV0d29yayBzd2l0Y2ggdG8gY29tcGxldGVcbiAgICAgICAgICAgIGF3YWl0IG5ldyBQcm9taXNlKHJlc29sdmUgPT4gc2V0VGltZW91dChyZXNvbHZlLCAyMDAwKSk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIFZlcmlmeSB0aGUgc3dpdGNoXG4gICAgICAgICAgICBjb25zdCBuZXdOZXR3b3JrID0gYXdhaXQgcHVibGljQ2xpZW50LmdldENoYWluSWQoKTtcbiAgICAgICAgICAgIGlmIChuZXdOZXR3b3JrICE9PSBUQVJHRVRfQ0hBSU5fSUQpIHtcbiAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdOZXR3b3JrIHN3aXRjaCB2ZXJpZmljYXRpb24gZmFpbGVkJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdTdWNjZXNzZnVsbHkgc3dpdGNoZWQgdG8gY29ycmVjdCBuZXR3b3JrJyk7XG4gICAgICAgICAgfSBjYXRjaCAoc3dpdGNoRXJyb3I6IGFueSkge1xuICAgICAgICAgICAgaWYgKHN3aXRjaEVycm9yLmNvZGUgPT09IDQ5MDIpIHtcbiAgICAgICAgICAgICAgY29uc29sZS5sb2coJ05ldHdvcmsgbm90IGZvdW5kLCBhZGRpbmcuLi4nKTtcbiAgICAgICAgICAgICAgYXdhaXQgd2luZG93LmV0aGVyZXVtLnJlcXVlc3Qoe1xuICAgICAgICAgICAgICAgIG1ldGhvZDogJ3dhbGxldF9hZGRFdGhlcmV1bUNoYWluJyxcbiAgICAgICAgICAgICAgICBwYXJhbXM6IFt7XG4gICAgICAgICAgICAgICAgICBjaGFpbklkOiBgMHgke1RBUkdFVF9DSEFJTl9JRC50b1N0cmluZygxNil9YCxcbiAgICAgICAgICAgICAgICAgIGNoYWluTmFtZTogJ0dhbmFjaGUgTG9jYWwnLFxuICAgICAgICAgICAgICAgICAgcnBjVXJsczogWydodHRwOi8vMTI3LjAuMC4xOjc1NDUnXSxcbiAgICAgICAgICAgICAgICAgIG5hdGl2ZUN1cnJlbmN5OiB7XG4gICAgICAgICAgICAgICAgICAgIG5hbWU6ICdFVEgnLFxuICAgICAgICAgICAgICAgICAgICBzeW1ib2w6ICdFVEgnLFxuICAgICAgICAgICAgICAgICAgICBkZWNpbWFsczogMThcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XVxuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgIC8vIFdhaXQgYW5kIHZlcmlmeSBhZ2FpblxuICAgICAgICAgICAgICBhd2FpdCBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHNldFRpbWVvdXQocmVzb2x2ZSwgMjAwMCkpO1xuICAgICAgICAgICAgICBjb25zdCBmaW5hbE5ldHdvcmsgPSBhd2FpdCBwdWJsaWNDbGllbnQuZ2V0Q2hhaW5JZCgpO1xuICAgICAgICAgICAgICBpZiAoZmluYWxOZXR3b3JrICE9PSBUQVJHRVRfQ0hBSU5fSUQpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ05ldHdvcmsgYWRkIHZlcmlmaWNhdGlvbiBmYWlsZWQnKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgdGhyb3cgc3dpdGNoRXJyb3I7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgLy8gSW5pdGlhbGl6ZSBjb250cmFjdHNcbiAgICAgICAgY29uc29sZS5sb2coJ0luaXRpYWxpemluZyBjb250cmFjdHMuLi4nKTtcbiAgICAgICAgXG4gICAgICAgIGlmICghRVhBTV9NQU5BR0VNRU5UX0FERFJFU1MpIHtcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0NvbnRyYWN0IGFkZHJlc3Mgbm90IGNvbmZpZ3VyZWQnKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFZlcmlmeSBjb250cmFjdCBleGlzdHNcbiAgICAgICAgY29uc3QgY29kZSA9IGF3YWl0IHB1YmxpY0NsaWVudC5nZXRCeXRlY29kZSh7IFxuICAgICAgICAgIGFkZHJlc3M6IEVYQU1fTUFOQUdFTUVOVF9BRERSRVNTIGFzIGAweCR7c3RyaW5nfWAgXG4gICAgICAgIH0pO1xuICAgICAgICBcbiAgICAgICAgaWYgKCFjb2RlIHx8IGNvZGUgPT09ICcweCcpIHtcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0NvbnRyYWN0IG5vdCBkZXBsb3llZCBhdCBhZGRyZXNzJyk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBJbml0aWFsaXplIGNvbnRyYWN0XG4gICAgICAgIGNvbnN0IGV4YW1NYW5hZ2VtZW50ID0gZ2V0Q29udHJhY3Qoe1xuICAgICAgICAgIGFkZHJlc3M6IEVYQU1fTUFOQUdFTUVOVF9BRERSRVNTIGFzIGAweCR7c3RyaW5nfWAsXG4gICAgICAgICAgYWJpOiBFeGFtTWFuYWdlbWVudEFCSS5hYmksXG4gICAgICAgICAgY2xpZW50OiBwdWJsaWNDbGllbnQsXG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIFRlc3QgY29udHJhY3QgY29ubmVjdGlvblxuICAgICAgICB0cnkge1xuICAgICAgICAgIGF3YWl0IGV4YW1NYW5hZ2VtZW50LnJlYWQuaXNJbnN0aXR1dGlvbihbYWNjb3VudF0pO1xuICAgICAgICAgIGNvbnNvbGUubG9nKCdDb250cmFjdCBjb25uZWN0aW9uIHRlc3Qgc3VjY2Vzc2Z1bCcpO1xuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0NvbnRyYWN0IGNvbm5lY3Rpb24gdGVzdCBmYWlsZWQ6JywgZXJyb3IpO1xuICAgICAgICAgIHRocm93IG5ldyBFcnJvcignQ29udHJhY3QgY29ubmVjdGlvbiBmYWlsZWQnKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChpc01vdW50ZWQpIHtcbiAgICAgICAgICBzZXRTdGF0ZShwcmV2ID0+ICh7XG4gICAgICAgICAgICAuLi5wcmV2LFxuICAgICAgICAgICAgZXhhbU1hbmFnZW1lbnRDb250cmFjdDogZXhhbU1hbmFnZW1lbnQgYXMgRXhhbU1hbmFnZW1lbnRDb250cmFjdCxcbiAgICAgICAgICAgIGlzQ29ubmVjdGVkOiB0cnVlLFxuICAgICAgICAgICAgaXNJbml0aWFsaXplZDogdHJ1ZSxcbiAgICAgICAgICAgIGlzTG9hZGluZzogZmFsc2UsXG4gICAgICAgICAgICBpbml0aWFsaXphdGlvbkVycm9yOiBudWxsXG4gICAgICAgICAgfSkpO1xuICAgICAgICB9XG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICBjb25zb2xlLmVycm9yKCdDb250cmFjdCBpbml0aWFsaXphdGlvbiBlcnJvcjonLCBlcnJvcik7XG4gICAgICAgIGlmIChpc01vdW50ZWQpIHtcbiAgICAgICAgICBzZXRTdGF0ZShwcmV2ID0+ICh7XG4gICAgICAgICAgICAuLi5wcmV2LFxuICAgICAgICAgICAgaXNMb2FkaW5nOiBmYWxzZSxcbiAgICAgICAgICAgIGluaXRpYWxpemF0aW9uRXJyb3I6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ1Vua25vd24gZXJyb3InLFxuICAgICAgICAgICAgaXNJbml0aWFsaXplZDogZmFsc2VcbiAgICAgICAgICB9KSk7XG4gICAgICAgICAgXG4gICAgICAgICAgdG9hc3Qoe1xuICAgICAgICAgICAgdGl0bGU6ICfYrti32KMg2YHZiiDYqtmH2YrYptipINin2YTYudmC2YjYryB8IENvbnRyYWN0IEluaXRpYWxpemF0aW9uIEVycm9yJyxcbiAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yIFxuICAgICAgICAgICAgICA/IGAke2Vycm9yLm1lc3NhZ2V9IHwg2YrYsdis2Ykg2KfZhNiq2KPZg9ivINmF2YYg2KfYqti12KfZhCDYp9mE2YXYrdmB2LjYqSDZiNin2YTYtNio2YPYqSDYp9mE2LXYrdmK2K3YqWBcbiAgICAgICAgICAgICAgOiAn2K3Yr9irINiu2LfYoyDYutmK2LEg2YXYudix2YjZgSB8IEFuIHVua25vd24gZXJyb3Igb2NjdXJyZWQnLFxuICAgICAgICAgICAgc3RhdHVzOiAnZXJyb3InLFxuICAgICAgICAgICAgZHVyYXRpb246IDUwMDAsXG4gICAgICAgICAgICBpc0Nsb3NhYmxlOiB0cnVlLFxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfTtcblxuICAgIGluaXRpYWxpemUoKTtcblxuICAgIHJldHVybiAoKSA9PiB7XG4gICAgICBpc01vdW50ZWQgPSBmYWxzZTtcbiAgICAgIGlmIChyZXRyeVRpbWVvdXQpIHtcbiAgICAgICAgY2xlYXJUaW1lb3V0KHJldHJ5VGltZW91dCk7XG4gICAgICB9XG4gICAgfTtcbiAgfSwgW2FjY291bnQsIHdhbGxldENsaWVudCwgcHVibGljQ2xpZW50LCB0b2FzdF0pO1xuXG4gIC8vIFJlc2V0IHN0YXRlIG9uIG5ldHdvcmsgY2hhbmdlXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnICYmIHdpbmRvdy5ldGhlcmV1bT8ub24pIHtcbiAgICAgIGNvbnN0IGhhbmRsZUNoYWluQ2hhbmdlZCA9ICgpID0+IHtcbiAgICAgICAgc2V0U3RhdGUocHJldiA9PiAoe1xuICAgICAgICAgIC4uLnByZXYsXG4gICAgICAgICAgZXhhbU1hbmFnZW1lbnRDb250cmFjdDogbnVsbCxcbiAgICAgICAgICBjZXJ0aWZpY2F0ZXNDb250cmFjdDogbnVsbCxcbiAgICAgICAgICBleGFtaW5hdGlvbnNDb250cmFjdDogbnVsbCxcbiAgICAgICAgICBpZGVudGl0eUNvbnRyYWN0OiBudWxsLFxuICAgICAgICAgIHNlY3VyaXR5VXRpbHNDb250cmFjdDogbnVsbCxcbiAgICAgICAgICBpc0luaXRpYWxpemVkOiBmYWxzZSxcbiAgICAgICAgICBpc0Nvbm5lY3RlZDogZmFsc2UsXG4gICAgICAgICAgaW5pdGlhbGl6YXRpb25FcnJvcjogbnVsbFxuICAgICAgICB9KSk7XG4gICAgICB9O1xuXG4gICAgICB3aW5kb3cuZXRoZXJldW0ub24oJ2NoYWluQ2hhbmdlZCcsIGhhbmRsZUNoYWluQ2hhbmdlZCk7XG4gICAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgICBpZiAod2luZG93LmV0aGVyZXVtPy5yZW1vdmVMaXN0ZW5lcikge1xuICAgICAgICAgIHdpbmRvdy5ldGhlcmV1bS5yZW1vdmVMaXN0ZW5lcignY2hhaW5DaGFuZ2VkJywgaGFuZGxlQ2hhaW5DaGFuZ2VkKTtcbiAgICAgICAgfVxuICAgICAgfTtcbiAgICB9XG4gIH0sIFtdKTtcblxuICByZXR1cm4ge1xuICAgIGV4YW1NYW5hZ2VtZW50Q29udHJhY3Q6IHN0YXRlLmV4YW1NYW5hZ2VtZW50Q29udHJhY3QsXG4gICAgY2VydGlmaWNhdGVzQ29udHJhY3Q6IHN0YXRlLmNlcnRpZmljYXRlc0NvbnRyYWN0LFxuICAgIGV4YW1pbmF0aW9uc0NvbnRyYWN0OiBzdGF0ZS5leGFtaW5hdGlvbnNDb250cmFjdCxcbiAgICBpZGVudGl0eUNvbnRyYWN0OiBzdGF0ZS5pZGVudGl0eUNvbnRyYWN0LFxuICAgIHNlY3VyaXR5VXRpbHNDb250cmFjdDogc3RhdGUuc2VjdXJpdHlVdGlsc0NvbnRyYWN0LFxuICAgIGFjY291bnQsXG4gICAgaXNDb25uZWN0ZWQ6IHN0YXRlLmlzQ29ubmVjdGVkLFxuICAgIGlzSW5pdGlhbGl6ZWQ6IHN0YXRlLmlzSW5pdGlhbGl6ZWQsXG4gICAgaXNMb2FkaW5nOiBzdGF0ZS5pc0xvYWRpbmcsXG4gICAgaXNDb3JyZWN0TmV0d29yazogY2hhaW5JZCA9PT0gVEFSR0VUX0NIQUlOX0lELFxuICAgIGluaXRpYWxpemF0aW9uRXJyb3I6IHN0YXRlLmluaXRpYWxpemF0aW9uRXJyb3JcbiAgfTtcbn07ICJdLCJuYW1lcyI6WyJ1c2VFZmZlY3QiLCJ1c2VTdGF0ZSIsInVzZUFjY291bnQiLCJ1c2VQdWJsaWNDbGllbnQiLCJ1c2VXYWxsZXRDbGllbnQiLCJ1c2VDaGFpbklkIiwidXNlQ29ubmVjdCIsImdldENvbnRyYWN0IiwiRXhhbU1hbmFnZW1lbnRBQkkiLCJ1c2VUb2FzdCIsIkVYQU1fTUFOQUdFTUVOVF9BRERSRVNTIiwicHJvY2VzcyIsImVudiIsIk5FWFRfUFVCTElDX0VYQU1fTUFOQUdFTUVOVF9DT05UUkFDVF9BRERSRVNTIiwiQ0VSVElGSUNBVEVTX0FERFJFU1MiLCJORVhUX1BVQkxJQ19DRVJUSUZJQ0FURVNfQ09OVFJBQ1RfQUREUkVTUyIsIkVYQU1JTkFUSU9OU19BRERSRVNTIiwiTkVYVF9QVUJMSUNfRVhBTUlOQVRJT05TX0NPTlRSQUNUX0FERFJFU1MiLCJJREVOVElUWV9BRERSRVNTIiwiTkVYVF9QVUJMSUNfSURFTlRJVFlfQ09OVFJBQ1RfQUREUkVTUyIsIlNFQ1VSSVRZX1VUSUxTX0FERFJFU1MiLCJORVhUX1BVQkxJQ19TRUNVUklUWV9VVElMU19DT05UUkFDVF9BRERSRVNTIiwiVEFSR0VUX0NIQUlOX0lEIiwidXNlQ29udHJhY3QiLCJhZGRyZXNzIiwiYWNjb3VudCIsInB1YmxpY0NsaWVudCIsImRhdGEiLCJ3YWxsZXRDbGllbnQiLCJjaGFpbklkIiwiY29ubmVjdCIsInRvYXN0Iiwic3RhdGUiLCJzZXRTdGF0ZSIsImV4YW1NYW5hZ2VtZW50Q29udHJhY3QiLCJjZXJ0aWZpY2F0ZXNDb250cmFjdCIsImV4YW1pbmF0aW9uc0NvbnRyYWN0IiwiaWRlbnRpdHlDb250cmFjdCIsInNlY3VyaXR5VXRpbHNDb250cmFjdCIsImlzQ29ubmVjdGVkIiwiaXNJbml0aWFsaXplZCIsImlzTG9hZGluZyIsIm5ldHdvcmtTd2l0Y2hBdHRlbXB0ZWQiLCJpbml0aWFsaXphdGlvbkF0dGVtcHRlZCIsImluaXRpYWxpemF0aW9uRXJyb3IiLCJyZXRyeUNvdW50IiwibGFzdEluaXRBdHRlbXB0VGltZSIsIm5ldHdvcmtWYWxpZGF0ZWQiLCJwcmV2IiwiaXNNb3VudGVkIiwidmFsaWRhdGVOZXR3b3JrIiwibmV0d29yayIsImdldENoYWluSWQiLCJjb25zb2xlIiwibG9nIiwid2luZG93IiwiZXRoZXJldW0iLCJFcnJvciIsInJlcXVlc3QiLCJtZXRob2QiLCJwYXJhbXMiLCJ0b1N0cmluZyIsInN3aXRjaEVycm9yIiwiY29kZSIsImNoYWluTmFtZSIsInJwY1VybHMiLCJuYXRpdmVDdXJyZW5jeSIsIm5hbWUiLCJzeW1ib2wiLCJkZWNpbWFscyIsIlByb21pc2UiLCJyZXNvbHZlIiwic2V0VGltZW91dCIsIm5ld05ldHdvcmsiLCJlcnJvciIsIm1lc3NhZ2UiLCJ0aXRsZSIsImRlc2NyaXB0aW9uIiwic3RhdHVzIiwiZHVyYXRpb24iLCJpc0Nsb3NhYmxlIiwicmV0cnlUaW1lb3V0IiwiaW5pdGlhbGl6ZSIsImZpbmFsTmV0d29yayIsImdldEJ5dGVjb2RlIiwiZXhhbU1hbmFnZW1lbnQiLCJhYmkiLCJjbGllbnQiLCJyZWFkIiwiaXNJbnN0aXR1dGlvbiIsImNsZWFyVGltZW91dCIsIm9uIiwiaGFuZGxlQ2hhaW5DaGFuZ2VkIiwicmVtb3ZlTGlzdGVuZXIiLCJpc0NvcnJlY3ROZXR3b3JrIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./hooks/useContract.ts\n"));

/***/ })

});