"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("pages/dashboard/institution",{

/***/ "./hooks/useContract.ts":
/*!******************************!*\
  !*** ./hooks/useContract.ts ***!
  \******************************/
/***/ (function(module, __webpack_exports__, __webpack_require__) {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   useContract: function() { return /* binding */ useContract; }\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"./node_modules/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var wagmi__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! wagmi */ \"./node_modules/wagmi/dist/esm/exports/index.js\");\n/* harmony import */ var viem__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! viem */ \"./node_modules/viem/_esm/index.js\");\n/* harmony import */ var _contracts_ExamManagement_json__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../contracts/ExamManagement.json */ \"./contracts/ExamManagement.json\");\n/* harmony import */ var _chakra_ui_react__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @chakra-ui/react */ \"./node_modules/@chakra-ui/react/dist/index.mjs\");\n\n\n\n\n\nconst EXAM_MANAGEMENT_ADDRESS = \"0x15B70b2C305c684Ef6335b64b0CA430e481c3ac5\" || 0;\nconst CERTIFICATES_ADDRESS = \"0x91F73a8778C82983253fEC5C0a63f87beA461AFd\" || 0;\nconst EXAMINATIONS_ADDRESS = \"0x1cE1DF501cF629b04c6B647e5A7BDE8245BcE02A\" || 0;\nconst IDENTITY_ADDRESS = \"0xb8F6dE405c3A2876d0a14Fa08Ee5D92793bFbbA1\" || 0;\nconst SECURITY_UTILS_ADDRESS = \"0x705D62Df2879E56545e9A9A6381c6a8e200e390c\" || 0;\nconst TARGET_CHAIN_ID = 1337; // Local network chain ID\nconst useContract = ()=>{\n    const { address: account } = (0,wagmi__WEBPACK_IMPORTED_MODULE_2__.useAccount)();\n    const publicClient = (0,wagmi__WEBPACK_IMPORTED_MODULE_2__.usePublicClient)();\n    const { data: walletClient } = (0,wagmi__WEBPACK_IMPORTED_MODULE_2__.useWalletClient)();\n    const chainId = (0,wagmi__WEBPACK_IMPORTED_MODULE_2__.useChainId)();\n    const { connect } = (0,wagmi__WEBPACK_IMPORTED_MODULE_2__.useConnect)();\n    const toast = (0,_chakra_ui_react__WEBPACK_IMPORTED_MODULE_3__.useToast)();\n    const [state, setState] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)({\n        examManagementContract: null,\n        certificatesContract: null,\n        examinationsContract: null,\n        identityContract: null,\n        securityUtilsContract: null,\n        isConnected: false,\n        isInitialized: false,\n        isLoading: false,\n        networkSwitchAttempted: false,\n        initializationAttempted: false,\n        initializationError: null\n    });\n    // Single effect to handle both network validation and contract initialization\n    (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(()=>{\n        let isMounted = true;\n        let switchAttempts = 0;\n        const MAX_SWITCH_ATTEMPTS = 3;\n        const verifyNetwork = async (expectedChainId)=>{\n            try {\n                const currentChainId = await (publicClient === null || publicClient === void 0 ? void 0 : publicClient.getChainId());\n                if (typeof currentChainId === \"undefined\") {\n                    console.error(\"Unable to get chain ID\");\n                    return false;\n                }\n                console.log(\"Verifying network - Current: \".concat(currentChainId, \", Expected: \").concat(expectedChainId));\n                return currentChainId === expectedChainId;\n            } catch (error) {\n                console.error(\"Network verification error:\", error);\n                return false;\n            }\n        };\n        const waitForNetworkSwitch = async (expectedChainId)=>{\n            const maxAttempts = 30; // Increase max attempts to 30 (15 seconds total)\n            const interval = 500; // Check every 500ms\n            let attempts = 0;\n            while(attempts < maxAttempts){\n                const isCorrectNetwork = await verifyNetwork(expectedChainId);\n                if (isCorrectNetwork) {\n                    console.log(\"Network switch verified successfully\");\n                    return true;\n                }\n                await new Promise((resolve)=>setTimeout(resolve, interval));\n                attempts++;\n                console.log(\"Waiting for network switch... Attempt \".concat(attempts, \"/\").concat(maxAttempts));\n            }\n            console.error(\"تجاوز الحد الأقصى لمحاولات التحقق من تبديل الشبكة | Maximum network switch verification attempts exceeded\");\n            return false;\n        };\n        const switchNetwork = async ()=>{\n            if (!window.ethereum) {\n                throw new Error(\"MetaMask غير مثبت | MetaMask is not installed\");\n            }\n            try {\n                console.log(\"Attempting to switch network...\");\n                // First try to switch\n                try {\n                    await window.ethereum.request({\n                        method: \"wallet_switchEthereumChain\",\n                        params: [\n                            {\n                                chainId: \"0x\".concat(TARGET_CHAIN_ID.toString(16))\n                            }\n                        ]\n                    });\n                } catch (switchError) {\n                    // If network doesn't exist, add it\n                    if (switchError.code === 4902) {\n                        console.log(\"Network not found, adding...\");\n                        await window.ethereum.request({\n                            method: \"wallet_addEthereumChain\",\n                            params: [\n                                {\n                                    chainId: \"0x\".concat(TARGET_CHAIN_ID.toString(16)),\n                                    chainName: \"Ganache Local\",\n                                    rpcUrls: [\n                                        \"http://127.0.0.1:7545\"\n                                    ],\n                                    nativeCurrency: {\n                                        name: \"ETH\",\n                                        symbol: \"ETH\",\n                                        decimals: 18\n                                    }\n                                }\n                            ]\n                        });\n                    } else {\n                        throw switchError;\n                    }\n                }\n                // Wait for network switch to complete\n                console.log(\"Waiting for network switch to complete...\");\n                await waitForNetworkSwitch(TARGET_CHAIN_ID);\n                console.log(\"Network switch completed successfully\");\n            } catch (error) {\n                console.error(\"Network switch failed:\", error);\n                throw error;\n            }\n        };\n        const initializeContracts = async ()=>{\n            if (!isMounted || !account || !walletClient || !publicClient) {\n                console.log(\"Waiting for dependencies...\", {\n                    hasAccount: !!account,\n                    hasWalletClient: !!walletClient,\n                    hasPublicClient: !!publicClient\n                });\n                return;\n            }\n            setState((prev)=>({\n                    ...prev,\n                    isLoading: true\n                }));\n            try {\n                // 1. Network Validation\n                const isCorrectNetwork = await verifyNetwork(TARGET_CHAIN_ID);\n                if (!isCorrectNetwork) {\n                    if (switchAttempts >= MAX_SWITCH_ATTEMPTS) {\n                        throw new Error(\"تجاوز الحد الأقصى لمحاولات تبديل الشبكة | Maximum network switch attempts exceeded\");\n                    }\n                    switchAttempts++;\n                    console.log(\"Attempting network switch (\".concat(switchAttempts, \"/\").concat(MAX_SWITCH_ATTEMPTS, \")...\"));\n                    await switchNetwork();\n                    // After successful switch, verify one more time\n                    const finalCheck = await verifyNetwork(TARGET_CHAIN_ID);\n                    if (!finalCheck) {\n                        throw new Error(\"فشل في التحقق النهائي من الشبكة | Final network verification failed\");\n                    }\n                }\n                // 2. Contract Initialization\n                if (!EXAM_MANAGEMENT_ADDRESS) {\n                    throw new Error(\"عنوان العقد غير متوفر | Contract address not available\");\n                }\n                console.log(\"Verifying contract deployment...\");\n                const code = await publicClient.getBytecode({\n                    address: EXAM_MANAGEMENT_ADDRESS\n                });\n                if (!code || code === \"0x\") {\n                    throw new Error(\"العقد غير موجود على هذا العنوان | Contract not found at address\");\n                }\n                console.log(\"Initializing contract...\");\n                const examManagement = (0,viem__WEBPACK_IMPORTED_MODULE_4__.getContract)({\n                    address: EXAM_MANAGEMENT_ADDRESS,\n                    abi: _contracts_ExamManagement_json__WEBPACK_IMPORTED_MODULE_1__.abi,\n                    client: publicClient\n                });\n                // Create contract interface with write methods\n                const contract = {\n                    isInstitution: async (address)=>{\n                        return await examManagement.read.isInstitution([\n                            address\n                        ]);\n                    },\n                    getInstitution: async (address)=>{\n                        return await examManagement.read.getInstitution([\n                            address\n                        ]);\n                    },\n                    getInstitutionExams: async (address)=>{\n                        return await examManagement.read.getInstitutionExams([\n                            address\n                        ]);\n                    },\n                    getExamResults: async (examId)=>{\n                        return await examManagement.read.getExamResults([\n                            examId\n                        ]);\n                    },\n                    write: {\n                        updateInstitutionProfile: async (params)=>{\n                            const hash = await examManagement.write.updateInstitutionProfile(params.args);\n                            return {\n                                wait: async ()=>{\n                                    await publicClient.waitForTransactionReceipt({\n                                        hash\n                                    });\n                                }\n                            };\n                        },\n                        submitExamResults: async (params)=>{\n                            const hash = await examManagement.write.submitExamResults(params.args);\n                            return {\n                                wait: async ()=>{\n                                    await publicClient.waitForTransactionReceipt({\n                                        hash\n                                    });\n                                }\n                            };\n                        },\n                        registerStudents: async (params)=>{\n                            const hash = await examManagement.write.registerStudents(params.args);\n                            return {\n                                wait: async ()=>{\n                                    await publicClient.waitForTransactionReceipt({\n                                        hash\n                                    });\n                                }\n                            };\n                        },\n                        updateExamStatus: async (params)=>{\n                            const hash = await examManagement.write.updateExamStatus(params.args);\n                            return {\n                                wait: async ()=>{\n                                    await publicClient.waitForTransactionReceipt({\n                                        hash\n                                    });\n                                }\n                            };\n                        },\n                        createExam: async (params)=>{\n                            const hash = await examManagement.write.createExam(params.args);\n                            return {\n                                wait: async ()=>{\n                                    await publicClient.waitForTransactionReceipt({\n                                        hash\n                                    });\n                                }\n                            };\n                        },\n                        issueCertificate: async (params)=>{\n                            const hash = await examManagement.write.issueCertificate(params.args);\n                            return {\n                                wait: async ()=>{\n                                    await publicClient.waitForTransactionReceipt({\n                                        hash\n                                    });\n                                }\n                            };\n                        }\n                    }\n                };\n                // Test contract\n                try {\n                    await contract.isInstitution(account);\n                    console.log(\"Contract test successful\");\n                } catch (error) {\n                    console.error(\"Contract test failed:\", error);\n                    throw new Error(\"فشل في الاتصال بالعقد | Contract connection failed\");\n                }\n                if (isMounted) {\n                    setState((prev)=>({\n                            ...prev,\n                            examManagementContract: contract,\n                            isConnected: true,\n                            isInitialized: true,\n                            isLoading: false,\n                            initializationError: null\n                        }));\n                    console.log(\"Contract initialization complete\");\n                }\n            } catch (error) {\n                console.error(\"Initialization error:\", error);\n                if (isMounted) {\n                    setState((prev)=>({\n                            ...prev,\n                            isLoading: false,\n                            isInitialized: false,\n                            initializationError: error instanceof Error ? error.message : \"Unknown error\"\n                        }));\n                    toast({\n                        title: \"خطأ في التهيئة | Initialization Error\",\n                        description: error instanceof Error ? \"\".concat(error.message, \" | يرجى التأكد من اتصال المحفظة والشبكة الصحيحة\") : \"حدث خطأ غير معروف | An unknown error occurred\",\n                        status: \"error\",\n                        duration: 5000,\n                        isClosable: true\n                    });\n                }\n            }\n        };\n        initializeContracts();\n        return ()=>{\n            isMounted = false;\n        };\n    }, [\n        account,\n        walletClient,\n        publicClient,\n        toast\n    ]);\n    // Handle network changes\n    (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(()=>{\n        var _window_ethereum;\n        if ( true && ((_window_ethereum = window.ethereum) === null || _window_ethereum === void 0 ? void 0 : _window_ethereum.on)) {\n            const handleChainChanged = ()=>{\n                console.log(\"Network changed, resetting state...\");\n                setState((prev)=>({\n                        ...prev,\n                        examManagementContract: null,\n                        certificatesContract: null,\n                        examinationsContract: null,\n                        identityContract: null,\n                        securityUtilsContract: null,\n                        isInitialized: false,\n                        isConnected: false,\n                        isLoading: false,\n                        initializationError: null\n                    }));\n            };\n            window.ethereum.on(\"chainChanged\", handleChainChanged);\n            return ()=>{\n                var _window_ethereum;\n                if ((_window_ethereum = window.ethereum) === null || _window_ethereum === void 0 ? void 0 : _window_ethereum.removeListener) {\n                    window.ethereum.removeListener(\"chainChanged\", handleChainChanged);\n                }\n            };\n        }\n    }, []);\n    return {\n        examManagementContract: state.examManagementContract,\n        certificatesContract: state.certificatesContract,\n        examinationsContract: state.examinationsContract,\n        identityContract: state.identityContract,\n        securityUtilsContract: state.securityUtilsContract,\n        account,\n        isConnected: state.isConnected,\n        isInitialized: state.isInitialized,\n        isLoading: state.isLoading,\n        isCorrectNetwork: chainId === TARGET_CHAIN_ID,\n        initializationError: state.initializationError\n    };\n};\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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dXNlQ29udHJhY3QudHM/NGYzMiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyB1c2VFZmZlY3QsIHVzZVN0YXRlIH0gZnJvbSAncmVhY3QnO1xuaW1wb3J0IHsgdXNlQWNjb3VudCwgdXNlUHVibGljQ2xpZW50LCB1c2VXYWxsZXRDbGllbnQsIHVzZUNoYWluSWQsIHVzZUNvbm5lY3QgfSBmcm9tICd3YWdtaSc7XG5pbXBvcnQgeyBnZXRDb250cmFjdCB9IGZyb20gJ3ZpZW0nO1xuaW1wb3J0IEV4YW1NYW5hZ2VtZW50QUJJIGZyb20gJy4uL2NvbnRyYWN0cy9FeGFtTWFuYWdlbWVudC5qc29uJztcbmltcG9ydCBDZXJ0aWZpY2F0ZXNBQkkgZnJvbSAnLi4vY29udHJhY3RzL0NlcnRpZmljYXRlcy5qc29uJztcbmltcG9ydCBFeGFtaW5hdGlvbnNBQkkgZnJvbSAnLi4vY29udHJhY3RzL0V4YW1pbmF0aW9ucy5qc29uJztcbmltcG9ydCBJZGVudGl0eUFCSSBmcm9tICcuLi9jb250cmFjdHMvSWRlbnRpdHkuanNvbic7XG5pbXBvcnQgU2VjdXJpdHlVdGlsc0FCSSBmcm9tICcuLi9jb250cmFjdHMvU2VjdXJpdHlVdGlscy5qc29uJztcbmltcG9ydCB7IHVzZVRvYXN0IH0gZnJvbSAnQGNoYWtyYS11aS9yZWFjdCc7XG5cbmNvbnN0IEVYQU1fTUFOQUdFTUVOVF9BRERSRVNTID0gcHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfRVhBTV9NQU5BR0VNRU5UX0NPTlRSQUNUX0FERFJFU1MgfHwgJyc7XG5jb25zdCBDRVJUSUZJQ0FURVNfQUREUkVTUyA9IHByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX0NFUlRJRklDQVRFU19DT05UUkFDVF9BRERSRVNTIHx8ICcnO1xuY29uc3QgRVhBTUlOQVRJT05TX0FERFJFU1MgPSBwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19FWEFNSU5BVElPTlNfQ09OVFJBQ1RfQUREUkVTUyB8fCAnJztcbmNvbnN0IElERU5USVRZX0FERFJFU1MgPSBwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19JREVOVElUWV9DT05UUkFDVF9BRERSRVNTIHx8ICcnO1xuY29uc3QgU0VDVVJJVFlfVVRJTFNfQUREUkVTUyA9IHByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX1NFQ1VSSVRZX1VUSUxTX0NPTlRSQUNUX0FERFJFU1MgfHwgJyc7XG5jb25zdCBUQVJHRVRfQ0hBSU5fSUQgPSAxMzM3OyAvLyBMb2NhbCBuZXR3b3JrIGNoYWluIElEXG5cbmludGVyZmFjZSBFeGFtTWFuYWdlbWVudENvbnRyYWN0IHtcbiAgaXNJbnN0aXR1dGlvbjogKGFkZHJlc3M6IHN0cmluZykgPT4gUHJvbWlzZTxib29sZWFuPjtcbiAgZ2V0SW5zdGl0dXRpb246IChhZGRyZXNzOiBzdHJpbmcpID0+IFByb21pc2U8YW55PjtcbiAgZ2V0SW5zdGl0dXRpb25FeGFtczogKGFkZHJlc3M6IHN0cmluZykgPT4gUHJvbWlzZTxhbnlbXT47XG4gIGdldEV4YW1SZXN1bHRzOiAoZXhhbUlkOiBzdHJpbmcpID0+IFByb21pc2U8YW55W10+O1xuICBwcm92aWRlcj86IGFueTtcbiAgcnVubmVyPzogYW55O1xuICB3cml0ZToge1xuICAgIHVwZGF0ZUluc3RpdHV0aW9uUHJvZmlsZTogKHBhcmFtczoge1xuICAgICAgYXJnczogW1xuICAgICAgICBuYW1lOiBzdHJpbmcsXG4gICAgICAgIG1pbmlzdHJ5OiBzdHJpbmcsXG4gICAgICAgIHVuaXZlcnNpdHk6IHN0cmluZyxcbiAgICAgICAgY29sbGVnZTogc3RyaW5nLFxuICAgICAgICBkZXNjcmlwdGlvbjogc3RyaW5nLFxuICAgICAgICBsb2dvOiBzdHJpbmcsXG4gICAgICAgIHdlYnNpdGU6IHN0cmluZyxcbiAgICAgICAgZW1haWw6IHN0cmluZyxcbiAgICAgICAgcGhvbmU6IHN0cmluZ1xuICAgICAgXVxuICAgIH0pID0+IFByb21pc2U8eyB3YWl0OiAoKSA9PiBQcm9taXNlPHZvaWQ+IH0+O1xuICAgIHN1Ym1pdEV4YW1SZXN1bHRzOiAocGFyYW1zOiB7XG4gICAgICBhcmdzOiBbZXhhbUlkOiBzdHJpbmcsIHJlc3VsdHM6IGFueVtdXSxcbiAgICAgIGNoYWluSWQ/OiBudW1iZXJcbiAgICB9KSA9PiBQcm9taXNlPHsgd2FpdDogKCkgPT4gUHJvbWlzZTx2b2lkPiB9PjtcbiAgICByZWdpc3RlclN0dWRlbnRzOiAocGFyYW1zOiB7XG4gICAgICBhcmdzOiBbZXhhbUlkOiBzdHJpbmcsIHN0dWRlbnRzOiBzdHJpbmdbXV0sXG4gICAgICBjaGFpbklkPzogbnVtYmVyXG4gICAgfSkgPT4gUHJvbWlzZTx7IHdhaXQ6ICgpID0+IFByb21pc2U8dm9pZD4gfT47XG4gICAgdXBkYXRlRXhhbVN0YXR1czogKHBhcmFtczoge1xuICAgICAgYXJnczogW2V4YW1JZDogc3RyaW5nLCBzdGF0dXM6IHN0cmluZ10sXG4gICAgICBjaGFpbklkPzogbnVtYmVyXG4gICAgfSkgPT4gUHJvbWlzZTx7IHdhaXQ6ICgpID0+IFByb21pc2U8dm9pZD4gfT47XG4gICAgY3JlYXRlRXhhbTogKHBhcmFtczoge1xuICAgICAgYXJnczogW3RpdGxlOiBzdHJpbmcsIGRlc2NyaXB0aW9uOiBzdHJpbmcsIGRhdGU6IG51bWJlcl0sXG4gICAgICBjaGFpbklkPzogbnVtYmVyXG4gICAgfSkgPT4gUHJvbWlzZTx7IHdhaXQ6ICgpID0+IFByb21pc2U8dm9pZD4gfT47XG4gICAgaXNzdWVDZXJ0aWZpY2F0ZTogKHBhcmFtczoge1xuICAgICAgYXJnczogW3N0dWRlbnQ6IHN0cmluZywgdGl0bGU6IHN0cmluZywgZGVzY3JpcHRpb246IHN0cmluZ10sXG4gICAgICBjaGFpbklkPzogbnVtYmVyXG4gICAgfSkgPT4gUHJvbWlzZTx7IHdhaXQ6ICgpID0+IFByb21pc2U8dm9pZD4gfT47XG4gIH07XG59XG5cbmludGVyZmFjZSBDZXJ0aWZpY2F0ZXNDb250cmFjdCB7XG4gIGdldEluc3RpdHV0aW9uQ2VydGlmaWNhdGVzOiAoYWRkcmVzczogc3RyaW5nKSA9PiBQcm9taXNlPGFueVtdPjtcbiAgd3JpdGU6IHtcbiAgICBpc3N1ZUNlcnRpZmljYXRlOiAocGFyYW1zOiB7XG4gICAgICBhcmdzOiBbc3R1ZGVudEFkZHJlc3M6IHN0cmluZywgdGl0bGU6IHN0cmluZywgZGVzY3JpcHRpb246IHN0cmluZ10sXG4gICAgICBjaGFpbklkPzogbnVtYmVyXG4gICAgfSkgPT4gUHJvbWlzZTx7IHdhaXQ6ICgpID0+IFByb21pc2U8dm9pZD4gfT47XG4gIH07XG59XG5cbmludGVyZmFjZSBFeGFtaW5hdGlvbnNDb250cmFjdCB7XG4gIC8vIEFkZCBleGFtaW5hdGlvbiBjb250cmFjdCBtZXRob2RzIGhlcmVcbiAgd3JpdGU6IHtcbiAgICBjcmVhdGVFeGFtaW5hdGlvbjogKHBhcmFtczoge1xuICAgICAgYXJnczogW2lwZnNIYXNoOiBzdHJpbmcsIHN0YXJ0VGltZTogbnVtYmVyLCBlbmRUaW1lOiBudW1iZXJdLFxuICAgICAgY2hhaW5JZD86IG51bWJlclxuICAgIH0pID0+IFByb21pc2U8eyB3YWl0OiAoKSA9PiBQcm9taXNlPHZvaWQ+IH0+O1xuICAgIHJlZ2lzdGVyRm9yRXhhbTogKHBhcmFtczoge1xuICAgICAgYXJnczogW2V4YW1JZDogc3RyaW5nXSxcbiAgICAgIGNoYWluSWQ/OiBudW1iZXJcbiAgICB9KSA9PiBQcm9taXNlPHsgd2FpdDogKCkgPT4gUHJvbWlzZTx2b2lkPiB9PjtcbiAgfTtcbn1cblxuaW50ZXJmYWNlIElkZW50aXR5Q29udHJhY3Qge1xuICAvLyBBZGQgaWRlbnRpdHkgY29udHJhY3QgbWV0aG9kcyBoZXJlXG4gIHdyaXRlOiB7XG4gICAgcmVnaXN0ZXJJZGVudGl0eTogKHBhcmFtczoge1xuICAgICAgYXJnczogW25hbWU6IHN0cmluZywgZW1haWw6IHN0cmluZ10sXG4gICAgICBjaGFpbklkPzogbnVtYmVyXG4gICAgfSkgPT4gUHJvbWlzZTx7IHdhaXQ6ICgpID0+IFByb21pc2U8dm9pZD4gfT47XG4gIH07XG59XG5cbmludGVyZmFjZSBTZWN1cml0eVV0aWxzQ29udHJhY3Qge1xuICAvLyBBZGQgc2VjdXJpdHkgdXRpbHMgY29udHJhY3QgbWV0aG9kcyBoZXJlXG4gIHdyaXRlOiB7XG4gICAgdmVyaWZ5SGFzaDogKHBhcmFtczoge1xuICAgICAgYXJnczogW2hhc2g6IHN0cmluZywgc2lnbmF0dXJlOiBzdHJpbmddLFxuICAgICAgY2hhaW5JZD86IG51bWJlclxuICAgIH0pID0+IFByb21pc2U8eyB3YWl0OiAoKSA9PiBQcm9taXNlPHZvaWQ+IH0+O1xuICB9O1xufVxuXG5leHBvcnQgY29uc3QgdXNlQ29udHJhY3QgPSAoKSA9PiB7XG4gIGNvbnN0IHsgYWRkcmVzczogYWNjb3VudCB9ID0gdXNlQWNjb3VudCgpO1xuICBjb25zdCBwdWJsaWNDbGllbnQgPSB1c2VQdWJsaWNDbGllbnQoKTtcbiAgY29uc3QgeyBkYXRhOiB3YWxsZXRDbGllbnQgfSA9IHVzZVdhbGxldENsaWVudCgpO1xuICBjb25zdCBjaGFpbklkID0gdXNlQ2hhaW5JZCgpO1xuICBjb25zdCB7IGNvbm5lY3QgfSA9IHVzZUNvbm5lY3QoKTtcbiAgY29uc3QgdG9hc3QgPSB1c2VUb2FzdCgpO1xuICBcbiAgY29uc3QgW3N0YXRlLCBzZXRTdGF0ZV0gPSB1c2VTdGF0ZSh7XG4gICAgZXhhbU1hbmFnZW1lbnRDb250cmFjdDogbnVsbCBhcyBFeGFtTWFuYWdlbWVudENvbnRyYWN0IHwgbnVsbCxcbiAgICBjZXJ0aWZpY2F0ZXNDb250cmFjdDogbnVsbCBhcyBDZXJ0aWZpY2F0ZXNDb250cmFjdCB8IG51bGwsXG4gICAgZXhhbWluYXRpb25zQ29udHJhY3Q6IG51bGwgYXMgRXhhbWluYXRpb25zQ29udHJhY3QgfCBudWxsLFxuICAgIGlkZW50aXR5Q29udHJhY3Q6IG51bGwgYXMgSWRlbnRpdHlDb250cmFjdCB8IG51bGwsXG4gICAgc2VjdXJpdHlVdGlsc0NvbnRyYWN0OiBudWxsIGFzIFNlY3VyaXR5VXRpbHNDb250cmFjdCB8IG51bGwsXG4gICAgaXNDb25uZWN0ZWQ6IGZhbHNlLFxuICAgIGlzSW5pdGlhbGl6ZWQ6IGZhbHNlLFxuICAgIGlzTG9hZGluZzogZmFsc2UsXG4gICAgbmV0d29ya1N3aXRjaEF0dGVtcHRlZDogZmFsc2UsXG4gICAgaW5pdGlhbGl6YXRpb25BdHRlbXB0ZWQ6IGZhbHNlLFxuICAgIGluaXRpYWxpemF0aW9uRXJyb3I6IG51bGwgYXMgc3RyaW5nIHwgbnVsbFxuICB9KTtcblxuICAvLyBTaW5nbGUgZWZmZWN0IHRvIGhhbmRsZSBib3RoIG5ldHdvcmsgdmFsaWRhdGlvbiBhbmQgY29udHJhY3QgaW5pdGlhbGl6YXRpb25cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBsZXQgaXNNb3VudGVkID0gdHJ1ZTtcbiAgICBsZXQgc3dpdGNoQXR0ZW1wdHMgPSAwO1xuICAgIGNvbnN0IE1BWF9TV0lUQ0hfQVRURU1QVFMgPSAzO1xuXG4gICAgY29uc3QgdmVyaWZ5TmV0d29yayA9IGFzeW5jIChleHBlY3RlZENoYWluSWQ6IG51bWJlcik6IFByb21pc2U8Ym9vbGVhbj4gPT4ge1xuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc3QgY3VycmVudENoYWluSWQgPSBhd2FpdCBwdWJsaWNDbGllbnQ/LmdldENoYWluSWQoKTtcbiAgICAgICAgaWYgKHR5cGVvZiBjdXJyZW50Q2hhaW5JZCA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICBjb25zb2xlLmVycm9yKCdVbmFibGUgdG8gZ2V0IGNoYWluIElEJyk7XG4gICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIGNvbnNvbGUubG9nKGBWZXJpZnlpbmcgbmV0d29yayAtIEN1cnJlbnQ6ICR7Y3VycmVudENoYWluSWR9LCBFeHBlY3RlZDogJHtleHBlY3RlZENoYWluSWR9YCk7XG4gICAgICAgIHJldHVybiBjdXJyZW50Q2hhaW5JZCA9PT0gZXhwZWN0ZWRDaGFpbklkO1xuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcignTmV0d29yayB2ZXJpZmljYXRpb24gZXJyb3I6JywgZXJyb3IpO1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgfTtcblxuICAgIGNvbnN0IHdhaXRGb3JOZXR3b3JrU3dpdGNoID0gYXN5bmMgKGV4cGVjdGVkQ2hhaW5JZDogbnVtYmVyKTogUHJvbWlzZTxib29sZWFuPiA9PiB7XG4gICAgICBjb25zdCBtYXhBdHRlbXB0cyA9IDMwOyAvLyBJbmNyZWFzZSBtYXggYXR0ZW1wdHMgdG8gMzAgKDE1IHNlY29uZHMgdG90YWwpXG4gICAgICBjb25zdCBpbnRlcnZhbCA9IDUwMDsgLy8gQ2hlY2sgZXZlcnkgNTAwbXNcbiAgICAgIGxldCBhdHRlbXB0cyA9IDA7XG5cbiAgICAgIHdoaWxlIChhdHRlbXB0cyA8IG1heEF0dGVtcHRzKSB7XG4gICAgICAgIGNvbnN0IGlzQ29ycmVjdE5ldHdvcmsgPSBhd2FpdCB2ZXJpZnlOZXR3b3JrKGV4cGVjdGVkQ2hhaW5JZCk7XG4gICAgICAgIGlmIChpc0NvcnJlY3ROZXR3b3JrKSB7XG4gICAgICAgICAgY29uc29sZS5sb2coJ05ldHdvcmsgc3dpdGNoIHZlcmlmaWVkIHN1Y2Nlc3NmdWxseScpO1xuICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGF3YWl0IG5ldyBQcm9taXNlKHJlc29sdmUgPT4gc2V0VGltZW91dChyZXNvbHZlLCBpbnRlcnZhbCkpO1xuICAgICAgICBhdHRlbXB0cysrO1xuICAgICAgICBjb25zb2xlLmxvZyhgV2FpdGluZyBmb3IgbmV0d29yayBzd2l0Y2guLi4gQXR0ZW1wdCAke2F0dGVtcHRzfS8ke21heEF0dGVtcHRzfWApO1xuICAgICAgfVxuXG4gICAgICBjb25zb2xlLmVycm9yKCfYqtis2KfZiNiyINin2YTYrdivINin2YTYo9mC2LXZiSDZhNmF2K3Yp9mI2YTYp9iqINin2YTYqtit2YLZgiDZhdmGINiq2KjYr9mK2YQg2KfZhNi02KjZg9ipIHwgTWF4aW11bSBuZXR3b3JrIHN3aXRjaCB2ZXJpZmljYXRpb24gYXR0ZW1wdHMgZXhjZWVkZWQnKTtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9O1xuXG4gICAgY29uc3Qgc3dpdGNoTmV0d29yayA9IGFzeW5jICgpOiBQcm9taXNlPHZvaWQ+ID0+IHtcbiAgICAgIGlmICghd2luZG93LmV0aGVyZXVtKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignTWV0YU1hc2sg2LrZitixINmF2KvYqNiqIHwgTWV0YU1hc2sgaXMgbm90IGluc3RhbGxlZCcpO1xuICAgICAgfVxuXG4gICAgICB0cnkge1xuICAgICAgICBjb25zb2xlLmxvZygnQXR0ZW1wdGluZyB0byBzd2l0Y2ggbmV0d29yay4uLicpO1xuICAgICAgICBcbiAgICAgICAgLy8gRmlyc3QgdHJ5IHRvIHN3aXRjaFxuICAgICAgICB0cnkge1xuICAgICAgICAgIGF3YWl0IHdpbmRvdy5ldGhlcmV1bS5yZXF1ZXN0KHtcbiAgICAgICAgICAgIG1ldGhvZDogJ3dhbGxldF9zd2l0Y2hFdGhlcmV1bUNoYWluJyxcbiAgICAgICAgICAgIHBhcmFtczogW3sgY2hhaW5JZDogYDB4JHtUQVJHRVRfQ0hBSU5fSUQudG9TdHJpbmcoMTYpfWAgfV1cbiAgICAgICAgICB9KTtcbiAgICAgICAgfSBjYXRjaCAoc3dpdGNoRXJyb3I6IGFueSkge1xuICAgICAgICAgIC8vIElmIG5ldHdvcmsgZG9lc24ndCBleGlzdCwgYWRkIGl0XG4gICAgICAgICAgaWYgKHN3aXRjaEVycm9yLmNvZGUgPT09IDQ5MDIpIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdOZXR3b3JrIG5vdCBmb3VuZCwgYWRkaW5nLi4uJyk7XG4gICAgICAgICAgICBhd2FpdCB3aW5kb3cuZXRoZXJldW0ucmVxdWVzdCh7XG4gICAgICAgICAgICAgIG1ldGhvZDogJ3dhbGxldF9hZGRFdGhlcmV1bUNoYWluJyxcbiAgICAgICAgICAgICAgcGFyYW1zOiBbe1xuICAgICAgICAgICAgICAgIGNoYWluSWQ6IGAweCR7VEFSR0VUX0NIQUlOX0lELnRvU3RyaW5nKDE2KX1gLFxuICAgICAgICAgICAgICAgIGNoYWluTmFtZTogJ0dhbmFjaGUgTG9jYWwnLFxuICAgICAgICAgICAgICAgIHJwY1VybHM6IFsnaHR0cDovLzEyNy4wLjAuMTo3NTQ1J10sXG4gICAgICAgICAgICAgICAgbmF0aXZlQ3VycmVuY3k6IHtcbiAgICAgICAgICAgICAgICAgIG5hbWU6ICdFVEgnLFxuICAgICAgICAgICAgICAgICAgc3ltYm9sOiAnRVRIJyxcbiAgICAgICAgICAgICAgICAgIGRlY2ltYWxzOiAxOFxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfV1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aHJvdyBzd2l0Y2hFcnJvcjtcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAvLyBXYWl0IGZvciBuZXR3b3JrIHN3aXRjaCB0byBjb21wbGV0ZVxuICAgICAgICBjb25zb2xlLmxvZygnV2FpdGluZyBmb3IgbmV0d29yayBzd2l0Y2ggdG8gY29tcGxldGUuLi4nKTtcbiAgICAgICAgYXdhaXQgd2FpdEZvck5ldHdvcmtTd2l0Y2goVEFSR0VUX0NIQUlOX0lEKTtcbiAgICAgICAgY29uc29sZS5sb2coJ05ldHdvcmsgc3dpdGNoIGNvbXBsZXRlZCBzdWNjZXNzZnVsbHknKTtcbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ05ldHdvcmsgc3dpdGNoIGZhaWxlZDonLCBlcnJvcik7XG4gICAgICAgIHRocm93IGVycm9yO1xuICAgICAgfVxuICAgIH07XG5cbiAgICBjb25zdCBpbml0aWFsaXplQ29udHJhY3RzID0gYXN5bmMgKCkgPT4ge1xuICAgICAgaWYgKCFpc01vdW50ZWQgfHwgIWFjY291bnQgfHwgIXdhbGxldENsaWVudCB8fCAhcHVibGljQ2xpZW50KSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdXYWl0aW5nIGZvciBkZXBlbmRlbmNpZXMuLi4nLCB7XG4gICAgICAgICAgaGFzQWNjb3VudDogISFhY2NvdW50LFxuICAgICAgICAgIGhhc1dhbGxldENsaWVudDogISF3YWxsZXRDbGllbnQsXG4gICAgICAgICAgaGFzUHVibGljQ2xpZW50OiAhIXB1YmxpY0NsaWVudFxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBzZXRTdGF0ZShwcmV2ID0+ICh7IC4uLnByZXYsIGlzTG9hZGluZzogdHJ1ZSB9KSk7XG5cbiAgICAgIHRyeSB7XG4gICAgICAgIC8vIDEuIE5ldHdvcmsgVmFsaWRhdGlvblxuICAgICAgICBjb25zdCBpc0NvcnJlY3ROZXR3b3JrID0gYXdhaXQgdmVyaWZ5TmV0d29yayhUQVJHRVRfQ0hBSU5fSUQpO1xuICAgICAgICBcbiAgICAgICAgaWYgKCFpc0NvcnJlY3ROZXR3b3JrKSB7XG4gICAgICAgICAgaWYgKHN3aXRjaEF0dGVtcHRzID49IE1BWF9TV0lUQ0hfQVRURU1QVFMpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcign2KrYrNin2YjYsiDYp9mE2K3YryDYp9mE2KPZgti12Ykg2YTZhdit2KfZiNmE2KfYqiDYqtio2K/ZitmEINin2YTYtNio2YPYqSB8IE1heGltdW0gbmV0d29yayBzd2l0Y2ggYXR0ZW1wdHMgZXhjZWVkZWQnKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgXG4gICAgICAgICAgc3dpdGNoQXR0ZW1wdHMrKztcbiAgICAgICAgICBjb25zb2xlLmxvZyhgQXR0ZW1wdGluZyBuZXR3b3JrIHN3aXRjaCAoJHtzd2l0Y2hBdHRlbXB0c30vJHtNQVhfU1dJVENIX0FUVEVNUFRTfSkuLi5gKTtcbiAgICAgICAgICBhd2FpdCBzd2l0Y2hOZXR3b3JrKCk7XG4gICAgICAgICAgXG4gICAgICAgICAgLy8gQWZ0ZXIgc3VjY2Vzc2Z1bCBzd2l0Y2gsIHZlcmlmeSBvbmUgbW9yZSB0aW1lXG4gICAgICAgICAgY29uc3QgZmluYWxDaGVjayA9IGF3YWl0IHZlcmlmeU5ldHdvcmsoVEFSR0VUX0NIQUlOX0lEKTtcbiAgICAgICAgICBpZiAoIWZpbmFsQ2hlY2spIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcign2YHYtNmEINmB2Yog2KfZhNiq2K3ZgtmCINin2YTZhtmH2KfYptmKINmF2YYg2KfZhNi02KjZg9ipIHwgRmluYWwgbmV0d29yayB2ZXJpZmljYXRpb24gZmFpbGVkJyk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgLy8gMi4gQ29udHJhY3QgSW5pdGlhbGl6YXRpb25cbiAgICAgICAgaWYgKCFFWEFNX01BTkFHRU1FTlRfQUREUkVTUykge1xuICAgICAgICAgIHRocm93IG5ldyBFcnJvcign2LnZhtmI2KfZhiDYp9mE2LnZgtivINi62YrYsSDZhdiq2YjZgdixIHwgQ29udHJhY3QgYWRkcmVzcyBub3QgYXZhaWxhYmxlJyk7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zb2xlLmxvZygnVmVyaWZ5aW5nIGNvbnRyYWN0IGRlcGxveW1lbnQuLi4nKTtcbiAgICAgICAgY29uc3QgY29kZSA9IGF3YWl0IHB1YmxpY0NsaWVudC5nZXRCeXRlY29kZSh7IFxuICAgICAgICAgIGFkZHJlc3M6IEVYQU1fTUFOQUdFTUVOVF9BRERSRVNTIGFzIGAweCR7c3RyaW5nfWAgXG4gICAgICAgIH0pO1xuXG4gICAgICAgIGlmICghY29kZSB8fCBjb2RlID09PSAnMHgnKSB7XG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCfYp9mE2LnZgtivINi62YrYsSDZhdmI2KzZiNivINi52YTZiSDZh9iw2Kcg2KfZhNi52YbZiNin2YYgfCBDb250cmFjdCBub3QgZm91bmQgYXQgYWRkcmVzcycpO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc29sZS5sb2coJ0luaXRpYWxpemluZyBjb250cmFjdC4uLicpO1xuICAgICAgICBjb25zdCBleGFtTWFuYWdlbWVudCA9IGdldENvbnRyYWN0KHtcbiAgICAgICAgICBhZGRyZXNzOiBFWEFNX01BTkFHRU1FTlRfQUREUkVTUyBhcyBgMHgke3N0cmluZ31gLFxuICAgICAgICAgIGFiaTogRXhhbU1hbmFnZW1lbnRBQkkuYWJpLFxuICAgICAgICAgIGNsaWVudDogcHVibGljQ2xpZW50LFxuICAgICAgICB9KTtcblxuICAgICAgICAvLyBDcmVhdGUgY29udHJhY3QgaW50ZXJmYWNlIHdpdGggd3JpdGUgbWV0aG9kc1xuICAgICAgICBjb25zdCBjb250cmFjdCA9IHtcbiAgICAgICAgICBpc0luc3RpdHV0aW9uOiBhc3luYyAoYWRkcmVzczogc3RyaW5nKSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gYXdhaXQgZXhhbU1hbmFnZW1lbnQucmVhZC5pc0luc3RpdHV0aW9uKFthZGRyZXNzXSkgYXMgUHJvbWlzZTxib29sZWFuPjtcbiAgICAgICAgICB9LFxuICAgICAgICAgIGdldEluc3RpdHV0aW9uOiBhc3luYyAoYWRkcmVzczogc3RyaW5nKSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gYXdhaXQgZXhhbU1hbmFnZW1lbnQucmVhZC5nZXRJbnN0aXR1dGlvbihbYWRkcmVzc10pIGFzIFByb21pc2U8YW55PjtcbiAgICAgICAgICB9LFxuICAgICAgICAgIGdldEluc3RpdHV0aW9uRXhhbXM6IGFzeW5jIChhZGRyZXNzOiBzdHJpbmcpID0+IHtcbiAgICAgICAgICAgIHJldHVybiBhd2FpdCBleGFtTWFuYWdlbWVudC5yZWFkLmdldEluc3RpdHV0aW9uRXhhbXMoW2FkZHJlc3NdKSBhcyBQcm9taXNlPGFueVtdPjtcbiAgICAgICAgICB9LFxuICAgICAgICAgIGdldEV4YW1SZXN1bHRzOiBhc3luYyAoZXhhbUlkOiBzdHJpbmcpID0+IHtcbiAgICAgICAgICAgIHJldHVybiBhd2FpdCBleGFtTWFuYWdlbWVudC5yZWFkLmdldEV4YW1SZXN1bHRzKFtleGFtSWRdKSBhcyBQcm9taXNlPGFueVtdPjtcbiAgICAgICAgICB9LFxuICAgICAgICAgIHdyaXRlOiB7XG4gICAgICAgICAgICB1cGRhdGVJbnN0aXR1dGlvblByb2ZpbGU6IGFzeW5jIChwYXJhbXM6IGFueSkgPT4ge1xuICAgICAgICAgICAgICBjb25zdCBoYXNoID0gYXdhaXQgZXhhbU1hbmFnZW1lbnQud3JpdGUudXBkYXRlSW5zdGl0dXRpb25Qcm9maWxlKHBhcmFtcy5hcmdzKTtcbiAgICAgICAgICAgICAgcmV0dXJuIHsgd2FpdDogYXN5bmMgKCkgPT4geyBhd2FpdCBwdWJsaWNDbGllbnQud2FpdEZvclRyYW5zYWN0aW9uUmVjZWlwdCh7IGhhc2ggfSk7IH0gfTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBzdWJtaXRFeGFtUmVzdWx0czogYXN5bmMgKHBhcmFtczogYW55KSA9PiB7XG4gICAgICAgICAgICAgIGNvbnN0IGhhc2ggPSBhd2FpdCBleGFtTWFuYWdlbWVudC53cml0ZS5zdWJtaXRFeGFtUmVzdWx0cyhwYXJhbXMuYXJncyk7XG4gICAgICAgICAgICAgIHJldHVybiB7IHdhaXQ6IGFzeW5jICgpID0+IHsgYXdhaXQgcHVibGljQ2xpZW50LndhaXRGb3JUcmFuc2FjdGlvblJlY2VpcHQoeyBoYXNoIH0pOyB9IH07XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgcmVnaXN0ZXJTdHVkZW50czogYXN5bmMgKHBhcmFtczogYW55KSA9PiB7XG4gICAgICAgICAgICAgIGNvbnN0IGhhc2ggPSBhd2FpdCBleGFtTWFuYWdlbWVudC53cml0ZS5yZWdpc3RlclN0dWRlbnRzKHBhcmFtcy5hcmdzKTtcbiAgICAgICAgICAgICAgcmV0dXJuIHsgd2FpdDogYXN5bmMgKCkgPT4geyBhd2FpdCBwdWJsaWNDbGllbnQud2FpdEZvclRyYW5zYWN0aW9uUmVjZWlwdCh7IGhhc2ggfSk7IH0gfTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB1cGRhdGVFeGFtU3RhdHVzOiBhc3luYyAocGFyYW1zOiBhbnkpID0+IHtcbiAgICAgICAgICAgICAgY29uc3QgaGFzaCA9IGF3YWl0IGV4YW1NYW5hZ2VtZW50LndyaXRlLnVwZGF0ZUV4YW1TdGF0dXMocGFyYW1zLmFyZ3MpO1xuICAgICAgICAgICAgICByZXR1cm4geyB3YWl0OiBhc3luYyAoKSA9PiB7IGF3YWl0IHB1YmxpY0NsaWVudC53YWl0Rm9yVHJhbnNhY3Rpb25SZWNlaXB0KHsgaGFzaCB9KTsgfSB9O1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGNyZWF0ZUV4YW06IGFzeW5jIChwYXJhbXM6IGFueSkgPT4ge1xuICAgICAgICAgICAgICBjb25zdCBoYXNoID0gYXdhaXQgZXhhbU1hbmFnZW1lbnQud3JpdGUuY3JlYXRlRXhhbShwYXJhbXMuYXJncyk7XG4gICAgICAgICAgICAgIHJldHVybiB7IHdhaXQ6IGFzeW5jICgpID0+IHsgYXdhaXQgcHVibGljQ2xpZW50LndhaXRGb3JUcmFuc2FjdGlvblJlY2VpcHQoeyBoYXNoIH0pOyB9IH07XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgaXNzdWVDZXJ0aWZpY2F0ZTogYXN5bmMgKHBhcmFtczogYW55KSA9PiB7XG4gICAgICAgICAgICAgIGNvbnN0IGhhc2ggPSBhd2FpdCBleGFtTWFuYWdlbWVudC53cml0ZS5pc3N1ZUNlcnRpZmljYXRlKHBhcmFtcy5hcmdzKTtcbiAgICAgICAgICAgICAgcmV0dXJuIHsgd2FpdDogYXN5bmMgKCkgPT4geyBhd2FpdCBwdWJsaWNDbGllbnQud2FpdEZvclRyYW5zYWN0aW9uUmVjZWlwdCh7IGhhc2ggfSk7IH0gfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgLy8gVGVzdCBjb250cmFjdFxuICAgICAgICB0cnkge1xuICAgICAgICAgIGF3YWl0IGNvbnRyYWN0LmlzSW5zdGl0dXRpb24oYWNjb3VudCk7XG4gICAgICAgICAgY29uc29sZS5sb2coJ0NvbnRyYWN0IHRlc3Qgc3VjY2Vzc2Z1bCcpO1xuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0NvbnRyYWN0IHRlc3QgZmFpbGVkOicsIGVycm9yKTtcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ9mB2LTZhCDZgdmKINin2YTYp9iq2LXYp9mEINio2KfZhNi52YLYryB8IENvbnRyYWN0IGNvbm5lY3Rpb24gZmFpbGVkJyk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoaXNNb3VudGVkKSB7XG4gICAgICAgICAgc2V0U3RhdGUocHJldiA9PiAoe1xuICAgICAgICAgICAgLi4ucHJldixcbiAgICAgICAgICAgIGV4YW1NYW5hZ2VtZW50Q29udHJhY3Q6IGNvbnRyYWN0IGFzIEV4YW1NYW5hZ2VtZW50Q29udHJhY3QsXG4gICAgICAgICAgICBpc0Nvbm5lY3RlZDogdHJ1ZSxcbiAgICAgICAgICAgIGlzSW5pdGlhbGl6ZWQ6IHRydWUsXG4gICAgICAgICAgICBpc0xvYWRpbmc6IGZhbHNlLFxuICAgICAgICAgICAgaW5pdGlhbGl6YXRpb25FcnJvcjogbnVsbFxuICAgICAgICAgIH0pKTtcbiAgICAgICAgICBjb25zb2xlLmxvZygnQ29udHJhY3QgaW5pdGlhbGl6YXRpb24gY29tcGxldGUnKTtcbiAgICAgICAgfVxuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcignSW5pdGlhbGl6YXRpb24gZXJyb3I6JywgZXJyb3IpO1xuICAgICAgICBpZiAoaXNNb3VudGVkKSB7XG4gICAgICAgICAgc2V0U3RhdGUocHJldiA9PiAoe1xuICAgICAgICAgICAgLi4ucHJldixcbiAgICAgICAgICAgIGlzTG9hZGluZzogZmFsc2UsXG4gICAgICAgICAgICBpc0luaXRpYWxpemVkOiBmYWxzZSxcbiAgICAgICAgICAgIGluaXRpYWxpemF0aW9uRXJyb3I6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ1Vua25vd24gZXJyb3InXG4gICAgICAgICAgfSkpO1xuXG4gICAgICAgICAgdG9hc3Qoe1xuICAgICAgICAgICAgdGl0bGU6ICfYrti32KMg2YHZiiDYp9mE2KrZh9mK2KbYqSB8IEluaXRpYWxpemF0aW9uIEVycm9yJyxcbiAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yIFxuICAgICAgICAgICAgICA/IGAke2Vycm9yLm1lc3NhZ2V9IHwg2YrYsdis2Ykg2KfZhNiq2KPZg9ivINmF2YYg2KfYqti12KfZhCDYp9mE2YXYrdmB2LjYqSDZiNin2YTYtNio2YPYqSDYp9mE2LXYrdmK2K3YqWBcbiAgICAgICAgICAgICAgOiAn2K3Yr9irINiu2LfYoyDYutmK2LEg2YXYudix2YjZgSB8IEFuIHVua25vd24gZXJyb3Igb2NjdXJyZWQnLFxuICAgICAgICAgICAgc3RhdHVzOiAnZXJyb3InLFxuICAgICAgICAgICAgZHVyYXRpb246IDUwMDAsXG4gICAgICAgICAgICBpc0Nsb3NhYmxlOiB0cnVlLFxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfTtcblxuICAgIGluaXRpYWxpemVDb250cmFjdHMoKTtcblxuICAgIHJldHVybiAoKSA9PiB7XG4gICAgICBpc01vdW50ZWQgPSBmYWxzZTtcbiAgICB9O1xuICB9LCBbYWNjb3VudCwgd2FsbGV0Q2xpZW50LCBwdWJsaWNDbGllbnQsIHRvYXN0XSk7XG5cbiAgLy8gSGFuZGxlIG5ldHdvcmsgY2hhbmdlc1xuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyAmJiB3aW5kb3cuZXRoZXJldW0/Lm9uKSB7XG4gICAgICBjb25zdCBoYW5kbGVDaGFpbkNoYW5nZWQgPSAoKSA9PiB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdOZXR3b3JrIGNoYW5nZWQsIHJlc2V0dGluZyBzdGF0ZS4uLicpO1xuICAgICAgICBzZXRTdGF0ZShwcmV2ID0+ICh7XG4gICAgICAgICAgLi4ucHJldixcbiAgICAgICAgICBleGFtTWFuYWdlbWVudENvbnRyYWN0OiBudWxsLFxuICAgICAgICAgIGNlcnRpZmljYXRlc0NvbnRyYWN0OiBudWxsLFxuICAgICAgICAgIGV4YW1pbmF0aW9uc0NvbnRyYWN0OiBudWxsLFxuICAgICAgICAgIGlkZW50aXR5Q29udHJhY3Q6IG51bGwsXG4gICAgICAgICAgc2VjdXJpdHlVdGlsc0NvbnRyYWN0OiBudWxsLFxuICAgICAgICAgIGlzSW5pdGlhbGl6ZWQ6IGZhbHNlLFxuICAgICAgICAgIGlzQ29ubmVjdGVkOiBmYWxzZSxcbiAgICAgICAgICBpc0xvYWRpbmc6IGZhbHNlLFxuICAgICAgICAgIGluaXRpYWxpemF0aW9uRXJyb3I6IG51bGxcbiAgICAgICAgfSkpO1xuICAgICAgfTtcblxuICAgICAgd2luZG93LmV0aGVyZXVtLm9uKCdjaGFpbkNoYW5nZWQnLCBoYW5kbGVDaGFpbkNoYW5nZWQpO1xuICAgICAgcmV0dXJuICgpID0+IHtcbiAgICAgICAgaWYgKHdpbmRvdy5ldGhlcmV1bT8ucmVtb3ZlTGlzdGVuZXIpIHtcbiAgICAgICAgICB3aW5kb3cuZXRoZXJldW0ucmVtb3ZlTGlzdGVuZXIoJ2NoYWluQ2hhbmdlZCcsIGhhbmRsZUNoYWluQ2hhbmdlZCk7XG4gICAgICAgIH1cbiAgICAgIH07XG4gICAgfVxuICB9LCBbXSk7XG5cbiAgcmV0dXJuIHtcbiAgICBleGFtTWFuYWdlbWVudENvbnRyYWN0OiBzdGF0ZS5leGFtTWFuYWdlbWVudENvbnRyYWN0LFxuICAgIGNlcnRpZmljYXRlc0NvbnRyYWN0OiBzdGF0ZS5jZXJ0aWZpY2F0ZXNDb250cmFjdCxcbiAgICBleGFtaW5hdGlvbnNDb250cmFjdDogc3RhdGUuZXhhbWluYXRpb25zQ29udHJhY3QsXG4gICAgaWRlbnRpdHlDb250cmFjdDogc3RhdGUuaWRlbnRpdHlDb250cmFjdCxcbiAgICBzZWN1cml0eVV0aWxzQ29udHJhY3Q6IHN0YXRlLnNlY3VyaXR5VXRpbHNDb250cmFjdCxcbiAgICBhY2NvdW50LFxuICAgIGlzQ29ubmVjdGVkOiBzdGF0ZS5pc0Nvbm5lY3RlZCxcbiAgICBpc0luaXRpYWxpemVkOiBzdGF0ZS5pc0luaXRpYWxpemVkLFxuICAgIGlzTG9hZGluZzogc3RhdGUuaXNMb2FkaW5nLFxuICAgIGlzQ29ycmVjdE5ldHdvcms6IGNoYWluSWQgPT09IFRBUkdFVF9DSEFJTl9JRCxcbiAgICBpbml0aWFsaXphdGlvbkVycm9yOiBzdGF0ZS5pbml0aWFsaXphdGlvbkVycm9yXG4gIH07XG59OyAiXSwibmFtZXMiOlsidXNlRWZmZWN0IiwidXNlU3RhdGUiLCJ1c2VBY2NvdW50IiwidXNlUHVibGljQ2xpZW50IiwidXNlV2FsbGV0Q2xpZW50IiwidXNlQ2hhaW5JZCIsInVzZUNvbm5lY3QiLCJnZXRDb250cmFjdCIsIkV4YW1NYW5hZ2VtZW50QUJJIiwidXNlVG9hc3QiLCJFWEFNX01BTkFHRU1FTlRfQUREUkVTUyIsInByb2Nlc3MiLCJlbnYiLCJORVhUX1BVQkxJQ19FWEFNX01BTkFHRU1FTlRfQ09OVFJBQ1RfQUREUkVTUyIsIkNFUlRJRklDQVRFU19BRERSRVNTIiwiTkVYVF9QVUJMSUNfQ0VSVElGSUNBVEVTX0NPTlRSQUNUX0FERFJFU1MiLCJFWEFNSU5BVElPTlNfQUREUkVTUyIsIk5FWFRfUFVCTElDX0VYQU1JTkFUSU9OU19DT05UUkFDVF9BRERSRVNTIiwiSURFTlRJVFlfQUREUkVTUyIsIk5FWFRfUFVCTElDX0lERU5USVRZX0NPTlRSQUNUX0FERFJFU1MiLCJTRUNVUklUWV9VVElMU19BRERSRVNTIiwiTkVYVF9QVUJMSUNfU0VDVVJJVFlfVVRJTFNfQ09OVFJBQ1RfQUREUkVTUyIsIlRBUkdFVF9DSEFJTl9JRCIsInVzZUNvbnRyYWN0IiwiYWRkcmVzcyIsImFjY291bnQiLCJwdWJsaWNDbGllbnQiLCJkYXRhIiwid2FsbGV0Q2xpZW50IiwiY2hhaW5JZCIsImNvbm5lY3QiLCJ0b2FzdCIsInN0YXRlIiwic2V0U3RhdGUiLCJleGFtTWFuYWdlbWVudENvbnRyYWN0IiwiY2VydGlmaWNhdGVzQ29udHJhY3QiLCJleGFtaW5hdGlvbnNDb250cmFjdCIsImlkZW50aXR5Q29udHJhY3QiLCJzZWN1cml0eVV0aWxzQ29udHJhY3QiLCJpc0Nvbm5lY3RlZCIsImlzSW5pdGlhbGl6ZWQiLCJpc0xvYWRpbmciLCJuZXR3b3JrU3dpdGNoQXR0ZW1wdGVkIiwiaW5pdGlhbGl6YXRpb25BdHRlbXB0ZWQiLCJpbml0aWFsaXphdGlvbkVycm9yIiwiaXNNb3VudGVkIiwic3dpdGNoQXR0ZW1wdHMiLCJNQVhfU1dJVENIX0FUVEVNUFRTIiwidmVyaWZ5TmV0d29yayIsImV4cGVjdGVkQ2hhaW5JZCIsImN1cnJlbnRDaGFpbklkIiwiZ2V0Q2hhaW5JZCIsImNvbnNvbGUiLCJlcnJvciIsImxvZyIsIndhaXRGb3JOZXR3b3JrU3dpdGNoIiwibWF4QXR0ZW1wdHMiLCJpbnRlcnZhbCIsImF0dGVtcHRzIiwiaXNDb3JyZWN0TmV0d29yayIsIlByb21pc2UiLCJyZXNvbHZlIiwic2V0VGltZW91dCIsInN3aXRjaE5ldHdvcmsiLCJ3aW5kb3ciLCJldGhlcmV1bSIsIkVycm9yIiwicmVxdWVzdCIsIm1ldGhvZCIsInBhcmFtcyIsInRvU3RyaW5nIiwic3dpdGNoRXJyb3IiLCJjb2RlIiwiY2hhaW5OYW1lIiwicnBjVXJscyIsIm5hdGl2ZUN1cnJlbmN5IiwibmFtZSIsInN5bWJvbCIsImRlY2ltYWxzIiwiaW5pdGlhbGl6ZUNvbnRyYWN0cyIsImhhc0FjY291bnQiLCJoYXNXYWxsZXRDbGllbnQiLCJoYXNQdWJsaWNDbGllbnQiLCJwcmV2IiwiZmluYWxDaGVjayIsImdldEJ5dGVjb2RlIiwiZXhhbU1hbmFnZW1lbnQiLCJhYmkiLCJjbGllbnQiLCJjb250cmFjdCIsImlzSW5zdGl0dXRpb24iLCJyZWFkIiwiZ2V0SW5zdGl0dXRpb24iLCJnZXRJbnN0aXR1dGlvbkV4YW1zIiwiZ2V0RXhhbVJlc3VsdHMiLCJleGFtSWQiLCJ3cml0ZSIsInVwZGF0ZUluc3RpdHV0aW9uUHJvZmlsZSIsImhhc2giLCJhcmdzIiwid2FpdCIsIndhaXRGb3JUcmFuc2FjdGlvblJlY2VpcHQiLCJzdWJtaXRFeGFtUmVzdWx0cyIsInJlZ2lzdGVyU3R1ZGVudHMiLCJ1cGRhdGVFeGFtU3RhdHVzIiwiY3JlYXRlRXhhbSIsImlzc3VlQ2VydGlmaWNhdGUiLCJtZXNzYWdlIiwidGl0bGUiLCJkZXNjcmlwdGlvbiIsInN0YXR1cyIsImR1cmF0aW9uIiwiaXNDbG9zYWJsZSIsIm9uIiwiaGFuZGxlQ2hhaW5DaGFuZ2VkIiwicmVtb3ZlTGlzdGVuZXIiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./hooks/useContract.ts\n"));

/***/ })

});