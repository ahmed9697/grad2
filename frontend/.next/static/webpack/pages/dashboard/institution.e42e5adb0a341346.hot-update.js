"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("pages/dashboard/institution",{

/***/ "./hooks/useContract.ts":
/*!******************************!*\
  !*** ./hooks/useContract.ts ***!
  \******************************/
/***/ (function(module, __webpack_exports__, __webpack_require__) {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   useContract: function() { return /* binding */ useContract; }\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"./node_modules/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var wagmi__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! wagmi */ \"./node_modules/wagmi/dist/esm/exports/index.js\");\n/* harmony import */ var viem__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! viem */ \"./node_modules/viem/_esm/index.js\");\n/* harmony import */ var _contracts_ExamManagement_json__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../contracts/ExamManagement.json */ \"./contracts/ExamManagement.json\");\n/* harmony import */ var _contracts_Certificates_json__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../contracts/Certificates.json */ \"./contracts/Certificates.json\");\n/* harmony import */ var _chakra_ui_react__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @chakra-ui/react */ \"./node_modules/@chakra-ui/react/dist/index.mjs\");\n\n\n\n\n\n\nconst EXAM_MANAGEMENT_ADDRESS = \"0x15B70b2C305c684Ef6335b64b0CA430e481c3ac5\" || 0;\nconst CERTIFICATES_ADDRESS = \"0x91F73a8778C82983253fEC5C0a63f87beA461AFd\" || 0;\nconst EXAMINATIONS_ADDRESS = \"0x1cE1DF501cF629b04c6B647e5A7BDE8245BcE02A\" || 0;\nconst IDENTITY_ADDRESS = \"0xb8F6dE405c3A2876d0a14Fa08Ee5D92793bFbbA1\" || 0;\nconst SECURITY_UTILS_ADDRESS = \"0x705D62Df2879E56545e9A9A6381c6a8e200e390c\" || 0;\nconst TARGET_CHAIN_ID = 1337; // Local network chain ID\nconst useContract = ()=>{\n    const { address: account } = (0,wagmi__WEBPACK_IMPORTED_MODULE_3__.useAccount)();\n    const publicClient = (0,wagmi__WEBPACK_IMPORTED_MODULE_3__.usePublicClient)();\n    const { data: walletClient } = (0,wagmi__WEBPACK_IMPORTED_MODULE_3__.useWalletClient)();\n    const chainId = (0,wagmi__WEBPACK_IMPORTED_MODULE_3__.useChainId)();\n    const { connect } = (0,wagmi__WEBPACK_IMPORTED_MODULE_3__.useConnect)();\n    const toast = (0,_chakra_ui_react__WEBPACK_IMPORTED_MODULE_4__.useToast)();\n    // Separate initialization states\n    const [initState, setInitState] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)({\n        isLoading: true,\n        hasAttemptedConnection: false,\n        hasAttemptedNetworkSwitch: false,\n        hasVerifiedNetwork: false,\n        hasVerifiedContracts: false,\n        error: null,\n        retryCount: 0\n    });\n    // Contract states\n    const [contracts, setContracts] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)({\n        examManagementContract: null,\n        certificatesContract: null,\n        examinationsContract: null,\n        identityContract: null,\n        securityUtilsContract: null\n    });\n    // Network verification\n    const verifyNetwork = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(async ()=>{\n        if (!publicClient) return false;\n        try {\n            const currentChainId = await publicClient.getChainId();\n            console.log(\"Network verification - Current: \".concat(currentChainId, \", Target: \").concat(TARGET_CHAIN_ID));\n            return currentChainId === TARGET_CHAIN_ID;\n        } catch (error) {\n            console.error(\"Network verification failed:\", error);\n            return false;\n        }\n    }, [\n        publicClient\n    ]);\n    // Network switching\n    const switchNetwork = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(async ()=>{\n        if (!window.ethereum) {\n            throw new Error(\"MetaMask غير مثبت | MetaMask is not installed\");\n        }\n        try {\n            await window.ethereum.request({\n                method: \"wallet_switchEthereumChain\",\n                params: [\n                    {\n                        chainId: \"0x\".concat(TARGET_CHAIN_ID.toString(16))\n                    }\n                ]\n            });\n        } catch (error) {\n            if (error.code === 4902) {\n                await window.ethereum.request({\n                    method: \"wallet_addEthereumChain\",\n                    params: [\n                        {\n                            chainId: \"0x\".concat(TARGET_CHAIN_ID.toString(16)),\n                            chainName: \"Ganache Local\",\n                            rpcUrls: [\n                                \"http://127.0.0.1:7545\"\n                            ],\n                            nativeCurrency: {\n                                name: \"ETH\",\n                                symbol: \"ETH\",\n                                decimals: 18\n                            }\n                        }\n                    ]\n                });\n            } else {\n                throw error;\n            }\n        }\n    }, []);\n    // Contract verification\n    const verifyContracts = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(async ()=>{\n        if (!publicClient) return false;\n        try {\n            const [examCode, certCode] = await Promise.all([\n                publicClient.getBytecode({\n                    address: EXAM_MANAGEMENT_ADDRESS\n                }),\n                publicClient.getBytecode({\n                    address: CERTIFICATES_ADDRESS\n                })\n            ]);\n            if (!examCode || examCode === \"0x\") {\n                throw new Error(\"عقد إدارة الاختبارات غير موجود | Exam Management contract not found\");\n            }\n            if (!certCode || certCode === \"0x\") {\n                throw new Error(\"عقد الشهادات غير موجود | Certificates contract not found\");\n            }\n            return true;\n        } catch (error) {\n            console.error(\"Contract verification failed:\", error);\n            return false;\n        }\n    }, [\n        publicClient\n    ]);\n    // Contract initialization\n    const initializeContracts = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(async ()=>{\n        if (!publicClient || !walletClient || !account) {\n            throw new Error(\"المتطلبات الأساسية غير متوفرة | Core requirements not available\");\n        }\n        // Create contract instances\n        const examManagement = (0,viem__WEBPACK_IMPORTED_MODULE_5__.getContract)({\n            address: EXAM_MANAGEMENT_ADDRESS,\n            abi: _contracts_ExamManagement_json__WEBPACK_IMPORTED_MODULE_1__.abi,\n            client: publicClient,\n            walletClient\n        });\n        const certificates = (0,viem__WEBPACK_IMPORTED_MODULE_5__.getContract)({\n            address: CERTIFICATES_ADDRESS,\n            abi: _contracts_Certificates_json__WEBPACK_IMPORTED_MODULE_2__.abi,\n            client: publicClient,\n            walletClient\n        });\n        // Test contract connections\n        try {\n            await Promise.all([\n                examManagement.read.isInstitution([\n                    account\n                ]),\n                certificates.read.getInstitutionCertificates([\n                    account\n                ])\n            ]);\n        } catch (error) {\n            console.error(\"Contract test failed:\", error);\n            throw new Error(\"فشل في اختبار الاتصال بالعقود | Contract connection test failed\");\n        }\n        return {\n            examManagement,\n            certificates\n        };\n    }, [\n        publicClient,\n        walletClient,\n        account\n    ]);\n    // Main initialization effect\n    (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(()=>{\n        let isMounted = true;\n        let retryTimeout;\n        const initialize = async ()=>{\n            if (!isMounted) return;\n            try {\n                // 1. Check dependencies\n                if (!account || !publicClient || !walletClient) {\n                    setInitState((prev)=>({\n                            ...prev,\n                            isLoading: false,\n                            error: \"يرجى توصيل المحفظة أولاً | Please connect wallet first\"\n                        }));\n                    return;\n                }\n                // 2. Verify network\n                const isCorrectNetwork = await verifyNetwork();\n                if (!isCorrectNetwork) {\n                    if (initState.retryCount >= 3) {\n                        throw new Error(\"فشل في تبديل الشبكة | Network switch failed\");\n                    }\n                    try {\n                        await switchNetwork();\n                        setInitState((prev)=>({\n                                ...prev,\n                                hasAttemptedNetworkSwitch: true,\n                                retryCount: prev.retryCount + 1\n                            }));\n                        // Retry after network switch\n                        retryTimeout = setTimeout(initialize, 1000);\n                        return;\n                    } catch (error) {\n                        throw new Error(\"فشل في تبديل الشبكة | Network switch failed\");\n                    }\n                }\n                // 3. Verify contracts\n                const contractsVerified = await verifyContracts();\n                if (!contractsVerified) {\n                    throw new Error(\"فشل في التحقق من العقود | Contract verification failed\");\n                }\n                // 4. Initialize contracts\n                const { examManagement, certificates } = await initializeContracts();\n                // 5. Update state with initialized contracts\n                if (isMounted) {\n                    setContracts({\n                        examManagementContract: {\n                            isInstitution: async (address)=>{\n                                const result = await examManagement.read.isInstitution([\n                                    address\n                                ]);\n                                return result === true;\n                            },\n                            getInstitution: async (address)=>{\n                                return await examManagement.read.getInstitution([\n                                    address\n                                ]);\n                            },\n                            getInstitutionExams: async (address)=>{\n                                var _ref;\n                                return (_ref = await examManagement.read.getInstitutionExams([\n                                    address\n                                ])) !== null && _ref !== void 0 ? _ref : [];\n                            },\n                            getExamResults: async (examId)=>{\n                                var _ref;\n                                return (_ref = await examManagement.read.getExamResults([\n                                    examId\n                                ])) !== null && _ref !== void 0 ? _ref : [];\n                            },\n                            write: {\n                                updateInstitutionProfile: async (params)=>{\n                                    const hash = await examManagement.write.updateInstitutionProfile(params.args);\n                                    return {\n                                        wait: async ()=>{\n                                            await publicClient.waitForTransactionReceipt({\n                                                hash\n                                            });\n                                        }\n                                    };\n                                },\n                                submitExamResults: async (params)=>{\n                                    const hash = await examManagement.write.submitExamResults(params.args);\n                                    return {\n                                        wait: async ()=>{\n                                            await publicClient.waitForTransactionReceipt({\n                                                hash\n                                            });\n                                        }\n                                    };\n                                },\n                                registerStudents: async (params)=>{\n                                    const hash = await examManagement.write.registerStudents(params.args);\n                                    return {\n                                        wait: async ()=>{\n                                            await publicClient.waitForTransactionReceipt({\n                                                hash\n                                            });\n                                        }\n                                    };\n                                },\n                                updateExamStatus: async (params)=>{\n                                    const hash = await examManagement.write.updateExamStatus(params.args);\n                                    return {\n                                        wait: async ()=>{\n                                            await publicClient.waitForTransactionReceipt({\n                                                hash\n                                            });\n                                        }\n                                    };\n                                },\n                                createExam: async (params)=>{\n                                    const hash = await examManagement.write.createExam(params.args);\n                                    return {\n                                        wait: async ()=>{\n                                            await publicClient.waitForTransactionReceipt({\n                                                hash\n                                            });\n                                        }\n                                    };\n                                },\n                                issueCertificate: async (params)=>{\n                                    const hash = await examManagement.write.issueCertificate(params.args);\n                                    return {\n                                        wait: async ()=>{\n                                            await publicClient.waitForTransactionReceipt({\n                                                hash\n                                            });\n                                        }\n                                    };\n                                }\n                            }\n                        },\n                        certificatesContract: {\n                            getInstitutionCertificates: async (address)=>{\n                                var _ref;\n                                return (_ref = await certificates.read.getInstitutionCertificates([\n                                    address\n                                ])) !== null && _ref !== void 0 ? _ref : [];\n                            },\n                            write: {\n                                issueCertificate: async (params)=>{\n                                    const hash = await certificates.write.issueCertificate(params.args);\n                                    return {\n                                        wait: async ()=>{\n                                            await publicClient.waitForTransactionReceipt({\n                                                hash\n                                            });\n                                        }\n                                    };\n                                }\n                            }\n                        },\n                        examinationsContract: null,\n                        identityContract: null,\n                        securityUtilsContract: null\n                    });\n                    setInitState((prev)=>({\n                            ...prev,\n                            isLoading: false,\n                            hasVerifiedNetwork: true,\n                            hasVerifiedContracts: true,\n                            error: null\n                        }));\n                }\n            } catch (error) {\n                console.error(\"Initialization error:\", error);\n                if (isMounted) {\n                    setInitState((prev)=>({\n                            ...prev,\n                            isLoading: false,\n                            error: error instanceof Error ? error.message : \"Unknown error\"\n                        }));\n                    setContracts({\n                        examManagementContract: null,\n                        certificatesContract: null,\n                        examinationsContract: null,\n                        identityContract: null,\n                        securityUtilsContract: null\n                    });\n                    toast({\n                        title: \"خطأ في التهيئة | Initialization Error\",\n                        description: error instanceof Error ? \"\".concat(error.message, \" | يرجى التأكد من اتصال المحفظة والشبكة الصحيحة\") : \"حدث خطأ غير معروف | An unknown error occurred\",\n                        status: \"error\",\n                        duration: 5000,\n                        isClosable: true\n                    });\n                }\n            }\n        };\n        initialize();\n        return ()=>{\n            isMounted = false;\n            if (retryTimeout) {\n                clearTimeout(retryTimeout);\n            }\n        };\n    }, [\n        account,\n        publicClient,\n        walletClient,\n        chainId,\n        verifyNetwork,\n        verifyContracts,\n        initializeContracts,\n        toast,\n        initState.retryCount\n    ]);\n    // Network change handler\n    (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(()=>{\n        var _window_ethereum;\n        if ( true && ((_window_ethereum = window.ethereum) === null || _window_ethereum === void 0 ? void 0 : _window_ethereum.on)) {\n            const handleChainChanged = ()=>{\n                console.log(\"Network changed, resetting state...\");\n                setInitState((prev)=>({\n                        ...prev,\n                        isLoading: true,\n                        hasVerifiedNetwork: false,\n                        hasVerifiedContracts: false,\n                        error: null,\n                        retryCount: 0\n                    }));\n                setContracts({\n                    examManagementContract: null,\n                    certificatesContract: null,\n                    examinationsContract: null,\n                    identityContract: null,\n                    securityUtilsContract: null\n                });\n            };\n            window.ethereum.on(\"chainChanged\", handleChainChanged);\n            return ()=>{\n                var _window_ethereum;\n                if ((_window_ethereum = window.ethereum) === null || _window_ethereum === void 0 ? void 0 : _window_ethereum.removeListener) {\n                    window.ethereum.removeListener(\"chainChanged\", handleChainChanged);\n                }\n            };\n        }\n    }, []);\n    return {\n        ...contracts,\n        account,\n        isConnected: !!account && initState.hasVerifiedNetwork && initState.hasVerifiedContracts,\n        isInitialized: initState.hasVerifiedContracts,\n        isLoading: initState.isLoading,\n        isCorrectNetwork: chainId === TARGET_CHAIN_ID,\n        initializationError: initState.error\n    };\n};\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QyxRQUFRLGNBQWZELHVDQUFBQSxpQkFBaUIwRCxFQUFFLEdBQUU7WUFDeEQsTUFBTUMscUJBQXFCO2dCQUN6QjlELFFBQVFDLEdBQUcsQ0FBQztnQkFDWm5CLGFBQWFvRCxDQUFBQSxPQUFTO3dCQUNwQixHQUFHQSxJQUFJO3dCQUNQbkQsV0FBVzt3QkFDWEcsb0JBQW9CO3dCQUNwQkMsc0JBQXNCO3dCQUN0QkMsT0FBTzt3QkFDUEMsWUFBWTtvQkFDZDtnQkFFQUUsYUFBYTtvQkFDWEMsd0JBQXdCO29CQUN4QkMsc0JBQXNCO29CQUN0QkMsc0JBQXNCO29CQUN0QkMsa0JBQWtCO29CQUNsQkMsdUJBQXVCO2dCQUN6QjtZQUNGO1lBRUFPLE9BQU9DLFFBQVEsQ0FBQ3lELEVBQUUsQ0FBQyxnQkFBZ0JDO1lBQ25DLE9BQU87b0JBQ0QzRDtnQkFBSixLQUFJQSxtQkFBQUEsT0FBT0MsUUFBUSxjQUFmRCx1Q0FBQUEsaUJBQWlCNEQsY0FBYyxFQUFFO29CQUNuQzVELE9BQU9DLFFBQVEsQ0FBQzJELGNBQWMsQ0FBQyxnQkFBZ0JEO2dCQUNqRDtZQUNGO1FBQ0Y7SUFDRixHQUFHLEVBQUU7SUFFTCxPQUFPO1FBQ0wsR0FBR3hFLFNBQVM7UUFDWmhCO1FBQ0EwRixhQUFhLENBQUMsQ0FBQzFGLFdBQVdPLFVBQVVLLGtCQUFrQixJQUFJTCxVQUFVTSxvQkFBb0I7UUFDeEY4RSxlQUFlcEYsVUFBVU0sb0JBQW9CO1FBQzdDSixXQUFXRixVQUFVRSxTQUFTO1FBQzlCb0Qsa0JBQWtCekQsWUFBWVA7UUFDOUIrRixxQkFBcUJyRixVQUFVTyxLQUFLO0lBQ3RDO0FBQ0YsRUFBRSIsInNvdXJjZXMiOlsid2VicGFjazovL19OX0UvLi9ob29rcy91c2VDb250cmFjdC50cz80ZjMyIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHVzZUVmZmVjdCwgdXNlU3RhdGUsIHVzZUNhbGxiYWNrIH0gZnJvbSAncmVhY3QnO1xuaW1wb3J0IHsgdXNlQWNjb3VudCwgdXNlUHVibGljQ2xpZW50LCB1c2VXYWxsZXRDbGllbnQsIHVzZUNoYWluSWQsIHVzZUNvbm5lY3QgfSBmcm9tICd3YWdtaSc7XG5pbXBvcnQgeyBnZXRDb250cmFjdCB9IGZyb20gJ3ZpZW0nO1xuaW1wb3J0IEV4YW1NYW5hZ2VtZW50QUJJIGZyb20gJy4uL2NvbnRyYWN0cy9FeGFtTWFuYWdlbWVudC5qc29uJztcbmltcG9ydCBDZXJ0aWZpY2F0ZXNBQkkgZnJvbSAnLi4vY29udHJhY3RzL0NlcnRpZmljYXRlcy5qc29uJztcbmltcG9ydCBFeGFtaW5hdGlvbnNBQkkgZnJvbSAnLi4vY29udHJhY3RzL0V4YW1pbmF0aW9ucy5qc29uJztcbmltcG9ydCBJZGVudGl0eUFCSSBmcm9tICcuLi9jb250cmFjdHMvSWRlbnRpdHkuanNvbic7XG5pbXBvcnQgU2VjdXJpdHlVdGlsc0FCSSBmcm9tICcuLi9jb250cmFjdHMvU2VjdXJpdHlVdGlscy5qc29uJztcbmltcG9ydCB7IHVzZVRvYXN0IH0gZnJvbSAnQGNoYWtyYS11aS9yZWFjdCc7XG5cbmNvbnN0IEVYQU1fTUFOQUdFTUVOVF9BRERSRVNTID0gcHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfRVhBTV9NQU5BR0VNRU5UX0NPTlRSQUNUX0FERFJFU1MgfHwgJyc7XG5jb25zdCBDRVJUSUZJQ0FURVNfQUREUkVTUyA9IHByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX0NFUlRJRklDQVRFU19DT05UUkFDVF9BRERSRVNTIHx8ICcnO1xuY29uc3QgRVhBTUlOQVRJT05TX0FERFJFU1MgPSBwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19FWEFNSU5BVElPTlNfQ09OVFJBQ1RfQUREUkVTUyB8fCAnJztcbmNvbnN0IElERU5USVRZX0FERFJFU1MgPSBwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19JREVOVElUWV9DT05UUkFDVF9BRERSRVNTIHx8ICcnO1xuY29uc3QgU0VDVVJJVFlfVVRJTFNfQUREUkVTUyA9IHByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX1NFQ1VSSVRZX1VUSUxTX0NPTlRSQUNUX0FERFJFU1MgfHwgJyc7XG5jb25zdCBUQVJHRVRfQ0hBSU5fSUQgPSAxMzM3OyAvLyBMb2NhbCBuZXR3b3JrIGNoYWluIElEXG5cbmludGVyZmFjZSBFeGFtTWFuYWdlbWVudENvbnRyYWN0IHtcbiAgaXNJbnN0aXR1dGlvbjogKGFkZHJlc3M6IHN0cmluZykgPT4gUHJvbWlzZTxib29sZWFuPjtcbiAgZ2V0SW5zdGl0dXRpb246IChhZGRyZXNzOiBzdHJpbmcpID0+IFByb21pc2U8YW55PjtcbiAgZ2V0SW5zdGl0dXRpb25FeGFtczogKGFkZHJlc3M6IHN0cmluZykgPT4gUHJvbWlzZTxhbnlbXT47XG4gIGdldEV4YW1SZXN1bHRzOiAoZXhhbUlkOiBzdHJpbmcpID0+IFByb21pc2U8YW55W10+O1xuICBwcm92aWRlcj86IGFueTtcbiAgcnVubmVyPzogYW55O1xuICB3cml0ZToge1xuICAgIHVwZGF0ZUluc3RpdHV0aW9uUHJvZmlsZTogKHBhcmFtczoge1xuICAgICAgYXJnczogW1xuICAgICAgICBuYW1lOiBzdHJpbmcsXG4gICAgICAgIG1pbmlzdHJ5OiBzdHJpbmcsXG4gICAgICAgIHVuaXZlcnNpdHk6IHN0cmluZyxcbiAgICAgICAgY29sbGVnZTogc3RyaW5nLFxuICAgICAgICBkZXNjcmlwdGlvbjogc3RyaW5nLFxuICAgICAgICBsb2dvOiBzdHJpbmcsXG4gICAgICAgIHdlYnNpdGU6IHN0cmluZyxcbiAgICAgICAgZW1haWw6IHN0cmluZyxcbiAgICAgICAgcGhvbmU6IHN0cmluZ1xuICAgICAgXVxuICAgIH0pID0+IFByb21pc2U8eyB3YWl0OiAoKSA9PiBQcm9taXNlPHZvaWQ+IH0+O1xuICAgIHN1Ym1pdEV4YW1SZXN1bHRzOiAocGFyYW1zOiB7XG4gICAgICBhcmdzOiBbZXhhbUlkOiBzdHJpbmcsIHJlc3VsdHM6IGFueVtdXSxcbiAgICAgIGNoYWluSWQ/OiBudW1iZXJcbiAgICB9KSA9PiBQcm9taXNlPHsgd2FpdDogKCkgPT4gUHJvbWlzZTx2b2lkPiB9PjtcbiAgICByZWdpc3RlclN0dWRlbnRzOiAocGFyYW1zOiB7XG4gICAgICBhcmdzOiBbZXhhbUlkOiBzdHJpbmcsIHN0dWRlbnRzOiBzdHJpbmdbXV0sXG4gICAgICBjaGFpbklkPzogbnVtYmVyXG4gICAgfSkgPT4gUHJvbWlzZTx7IHdhaXQ6ICgpID0+IFByb21pc2U8dm9pZD4gfT47XG4gICAgdXBkYXRlRXhhbVN0YXR1czogKHBhcmFtczoge1xuICAgICAgYXJnczogW2V4YW1JZDogc3RyaW5nLCBzdGF0dXM6IHN0cmluZ10sXG4gICAgICBjaGFpbklkPzogbnVtYmVyXG4gICAgfSkgPT4gUHJvbWlzZTx7IHdhaXQ6ICgpID0+IFByb21pc2U8dm9pZD4gfT47XG4gICAgY3JlYXRlRXhhbTogKHBhcmFtczoge1xuICAgICAgYXJnczogW3RpdGxlOiBzdHJpbmcsIGRlc2NyaXB0aW9uOiBzdHJpbmcsIGRhdGU6IG51bWJlcl0sXG4gICAgICBjaGFpbklkPzogbnVtYmVyXG4gICAgfSkgPT4gUHJvbWlzZTx7IHdhaXQ6ICgpID0+IFByb21pc2U8dm9pZD4gfT47XG4gICAgaXNzdWVDZXJ0aWZpY2F0ZTogKHBhcmFtczoge1xuICAgICAgYXJnczogW3N0dWRlbnQ6IHN0cmluZywgdGl0bGU6IHN0cmluZywgZGVzY3JpcHRpb246IHN0cmluZ10sXG4gICAgICBjaGFpbklkPzogbnVtYmVyXG4gICAgfSkgPT4gUHJvbWlzZTx7IHdhaXQ6ICgpID0+IFByb21pc2U8dm9pZD4gfT47XG4gIH07XG59XG5cbmludGVyZmFjZSBDZXJ0aWZpY2F0ZXNDb250cmFjdCB7XG4gIGdldEluc3RpdHV0aW9uQ2VydGlmaWNhdGVzOiAoYWRkcmVzczogc3RyaW5nKSA9PiBQcm9taXNlPGFueVtdPjtcbiAgd3JpdGU6IHtcbiAgICBpc3N1ZUNlcnRpZmljYXRlOiAocGFyYW1zOiB7XG4gICAgICBhcmdzOiBbc3R1ZGVudEFkZHJlc3M6IHN0cmluZywgdGl0bGU6IHN0cmluZywgZGVzY3JpcHRpb246IHN0cmluZ10sXG4gICAgICBjaGFpbklkPzogbnVtYmVyXG4gICAgfSkgPT4gUHJvbWlzZTx7IHdhaXQ6ICgpID0+IFByb21pc2U8dm9pZD4gfT47XG4gIH07XG59XG5cbmludGVyZmFjZSBFeGFtaW5hdGlvbnNDb250cmFjdCB7XG4gIC8vIEFkZCBleGFtaW5hdGlvbiBjb250cmFjdCBtZXRob2RzIGhlcmVcbiAgd3JpdGU6IHtcbiAgICBjcmVhdGVFeGFtaW5hdGlvbjogKHBhcmFtczoge1xuICAgICAgYXJnczogW2lwZnNIYXNoOiBzdHJpbmcsIHN0YXJ0VGltZTogbnVtYmVyLCBlbmRUaW1lOiBudW1iZXJdLFxuICAgICAgY2hhaW5JZD86IG51bWJlclxuICAgIH0pID0+IFByb21pc2U8eyB3YWl0OiAoKSA9PiBQcm9taXNlPHZvaWQ+IH0+O1xuICAgIHJlZ2lzdGVyRm9yRXhhbTogKHBhcmFtczoge1xuICAgICAgYXJnczogW2V4YW1JZDogc3RyaW5nXSxcbiAgICAgIGNoYWluSWQ/OiBudW1iZXJcbiAgICB9KSA9PiBQcm9taXNlPHsgd2FpdDogKCkgPT4gUHJvbWlzZTx2b2lkPiB9PjtcbiAgfTtcbn1cblxuaW50ZXJmYWNlIElkZW50aXR5Q29udHJhY3Qge1xuICAvLyBBZGQgaWRlbnRpdHkgY29udHJhY3QgbWV0aG9kcyBoZXJlXG4gIHdyaXRlOiB7XG4gICAgcmVnaXN0ZXJJZGVudGl0eTogKHBhcmFtczoge1xuICAgICAgYXJnczogW25hbWU6IHN0cmluZywgZW1haWw6IHN0cmluZ10sXG4gICAgICBjaGFpbklkPzogbnVtYmVyXG4gICAgfSkgPT4gUHJvbWlzZTx7IHdhaXQ6ICgpID0+IFByb21pc2U8dm9pZD4gfT47XG4gIH07XG59XG5cbmludGVyZmFjZSBTZWN1cml0eVV0aWxzQ29udHJhY3Qge1xuICAvLyBBZGQgc2VjdXJpdHkgdXRpbHMgY29udHJhY3QgbWV0aG9kcyBoZXJlXG4gIHdyaXRlOiB7XG4gICAgdmVyaWZ5SGFzaDogKHBhcmFtczoge1xuICAgICAgYXJnczogW2hhc2g6IHN0cmluZywgc2lnbmF0dXJlOiBzdHJpbmddLFxuICAgICAgY2hhaW5JZD86IG51bWJlclxuICAgIH0pID0+IFByb21pc2U8eyB3YWl0OiAoKSA9PiBQcm9taXNlPHZvaWQ+IH0+O1xuICB9O1xufVxuXG5leHBvcnQgY29uc3QgdXNlQ29udHJhY3QgPSAoKSA9PiB7XG4gIGNvbnN0IHsgYWRkcmVzczogYWNjb3VudCB9ID0gdXNlQWNjb3VudCgpO1xuICBjb25zdCBwdWJsaWNDbGllbnQgPSB1c2VQdWJsaWNDbGllbnQoKTtcbiAgY29uc3QgeyBkYXRhOiB3YWxsZXRDbGllbnQgfSA9IHVzZVdhbGxldENsaWVudCgpO1xuICBjb25zdCBjaGFpbklkID0gdXNlQ2hhaW5JZCgpO1xuICBjb25zdCB7IGNvbm5lY3QgfSA9IHVzZUNvbm5lY3QoKTtcbiAgY29uc3QgdG9hc3QgPSB1c2VUb2FzdCgpO1xuICBcbiAgLy8gU2VwYXJhdGUgaW5pdGlhbGl6YXRpb24gc3RhdGVzXG4gIGNvbnN0IFtpbml0U3RhdGUsIHNldEluaXRTdGF0ZV0gPSB1c2VTdGF0ZSh7XG4gICAgaXNMb2FkaW5nOiB0cnVlLFxuICAgIGhhc0F0dGVtcHRlZENvbm5lY3Rpb246IGZhbHNlLFxuICAgIGhhc0F0dGVtcHRlZE5ldHdvcmtTd2l0Y2g6IGZhbHNlLFxuICAgIGhhc1ZlcmlmaWVkTmV0d29yazogZmFsc2UsXG4gICAgaGFzVmVyaWZpZWRDb250cmFjdHM6IGZhbHNlLFxuICAgIGVycm9yOiBudWxsIGFzIHN0cmluZyB8IG51bGwsXG4gICAgcmV0cnlDb3VudDogMFxuICB9KTtcblxuICAvLyBDb250cmFjdCBzdGF0ZXNcbiAgY29uc3QgW2NvbnRyYWN0cywgc2V0Q29udHJhY3RzXSA9IHVzZVN0YXRlKHtcbiAgICBleGFtTWFuYWdlbWVudENvbnRyYWN0OiBudWxsIGFzIEV4YW1NYW5hZ2VtZW50Q29udHJhY3QgfCBudWxsLFxuICAgIGNlcnRpZmljYXRlc0NvbnRyYWN0OiBudWxsIGFzIENlcnRpZmljYXRlc0NvbnRyYWN0IHwgbnVsbCxcbiAgICBleGFtaW5hdGlvbnNDb250cmFjdDogbnVsbCBhcyBFeGFtaW5hdGlvbnNDb250cmFjdCB8IG51bGwsXG4gICAgaWRlbnRpdHlDb250cmFjdDogbnVsbCBhcyBJZGVudGl0eUNvbnRyYWN0IHwgbnVsbCxcbiAgICBzZWN1cml0eVV0aWxzQ29udHJhY3Q6IG51bGwgYXMgU2VjdXJpdHlVdGlsc0NvbnRyYWN0IHwgbnVsbFxuICB9KTtcblxuICAvLyBOZXR3b3JrIHZlcmlmaWNhdGlvblxuICBjb25zdCB2ZXJpZnlOZXR3b3JrID0gdXNlQ2FsbGJhY2soYXN5bmMgKCkgPT4ge1xuICAgIGlmICghcHVibGljQ2xpZW50KSByZXR1cm4gZmFsc2U7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IGN1cnJlbnRDaGFpbklkID0gYXdhaXQgcHVibGljQ2xpZW50LmdldENoYWluSWQoKTtcbiAgICAgIGNvbnNvbGUubG9nKGBOZXR3b3JrIHZlcmlmaWNhdGlvbiAtIEN1cnJlbnQ6ICR7Y3VycmVudENoYWluSWR9LCBUYXJnZXQ6ICR7VEFSR0VUX0NIQUlOX0lEfWApO1xuICAgICAgcmV0dXJuIGN1cnJlbnRDaGFpbklkID09PSBUQVJHRVRfQ0hBSU5fSUQ7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ05ldHdvcmsgdmVyaWZpY2F0aW9uIGZhaWxlZDonLCBlcnJvcik7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICB9LCBbcHVibGljQ2xpZW50XSk7XG5cbiAgLy8gTmV0d29yayBzd2l0Y2hpbmdcbiAgY29uc3Qgc3dpdGNoTmV0d29yayA9IHVzZUNhbGxiYWNrKGFzeW5jICgpID0+IHtcbiAgICBpZiAoIXdpbmRvdy5ldGhlcmV1bSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNZXRhTWFzayDYutmK2LEg2YXYq9io2KogfCBNZXRhTWFzayBpcyBub3QgaW5zdGFsbGVkJyk7XG4gICAgfVxuXG4gICAgdHJ5IHtcbiAgICAgIGF3YWl0IHdpbmRvdy5ldGhlcmV1bS5yZXF1ZXN0KHtcbiAgICAgICAgbWV0aG9kOiAnd2FsbGV0X3N3aXRjaEV0aGVyZXVtQ2hhaW4nLFxuICAgICAgICBwYXJhbXM6IFt7IGNoYWluSWQ6IGAweCR7VEFSR0VUX0NIQUlOX0lELnRvU3RyaW5nKDE2KX1gIH1dXG4gICAgICB9KTtcbiAgICB9IGNhdGNoIChlcnJvcjogYW55KSB7XG4gICAgICBpZiAoZXJyb3IuY29kZSA9PT0gNDkwMikge1xuICAgICAgICBhd2FpdCB3aW5kb3cuZXRoZXJldW0ucmVxdWVzdCh7XG4gICAgICAgICAgbWV0aG9kOiAnd2FsbGV0X2FkZEV0aGVyZXVtQ2hhaW4nLFxuICAgICAgICAgIHBhcmFtczogW3tcbiAgICAgICAgICAgIGNoYWluSWQ6IGAweCR7VEFSR0VUX0NIQUlOX0lELnRvU3RyaW5nKDE2KX1gLFxuICAgICAgICAgICAgY2hhaW5OYW1lOiAnR2FuYWNoZSBMb2NhbCcsXG4gICAgICAgICAgICBycGNVcmxzOiBbJ2h0dHA6Ly8xMjcuMC4wLjE6NzU0NSddLFxuICAgICAgICAgICAgbmF0aXZlQ3VycmVuY3k6IHsgbmFtZTogJ0VUSCcsIHN5bWJvbDogJ0VUSCcsIGRlY2ltYWxzOiAxOCB9XG4gICAgICAgICAgfV1cbiAgICAgICAgfSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aHJvdyBlcnJvcjtcbiAgICAgIH1cbiAgICB9XG4gIH0sIFtdKTtcblxuICAvLyBDb250cmFjdCB2ZXJpZmljYXRpb25cbiAgY29uc3QgdmVyaWZ5Q29udHJhY3RzID0gdXNlQ2FsbGJhY2soYXN5bmMgKCkgPT4ge1xuICAgIGlmICghcHVibGljQ2xpZW50KSByZXR1cm4gZmFsc2U7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IFtleGFtQ29kZSwgY2VydENvZGVdID0gYXdhaXQgUHJvbWlzZS5hbGwoW1xuICAgICAgICBwdWJsaWNDbGllbnQuZ2V0Qnl0ZWNvZGUoeyBhZGRyZXNzOiBFWEFNX01BTkFHRU1FTlRfQUREUkVTUyBhcyBgMHgke3N0cmluZ31gIH0pLFxuICAgICAgICBwdWJsaWNDbGllbnQuZ2V0Qnl0ZWNvZGUoeyBhZGRyZXNzOiBDRVJUSUZJQ0FURVNfQUREUkVTUyBhcyBgMHgke3N0cmluZ31gIH0pXG4gICAgICBdKTtcblxuICAgICAgaWYgKCFleGFtQ29kZSB8fCBleGFtQ29kZSA9PT0gJzB4Jykge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ9i52YLYryDYpdiv2KfYsdipINin2YTYp9iu2KrYqNin2LHYp9iqINi62YrYsSDZhdmI2KzZiNivIHwgRXhhbSBNYW5hZ2VtZW50IGNvbnRyYWN0IG5vdCBmb3VuZCcpO1xuICAgICAgfVxuXG4gICAgICBpZiAoIWNlcnRDb2RlIHx8IGNlcnRDb2RlID09PSAnMHgnKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcign2LnZgtivINin2YTYtNmH2KfYr9in2Kog2LrZitixINmF2YjYrNmI2K8gfCBDZXJ0aWZpY2F0ZXMgY29udHJhY3Qgbm90IGZvdW5kJyk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdDb250cmFjdCB2ZXJpZmljYXRpb24gZmFpbGVkOicsIGVycm9yKTtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gIH0sIFtwdWJsaWNDbGllbnRdKTtcblxuICAvLyBDb250cmFjdCBpbml0aWFsaXphdGlvblxuICBjb25zdCBpbml0aWFsaXplQ29udHJhY3RzID0gdXNlQ2FsbGJhY2soYXN5bmMgKCkgPT4ge1xuICAgIGlmICghcHVibGljQ2xpZW50IHx8ICF3YWxsZXRDbGllbnQgfHwgIWFjY291bnQpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcign2KfZhNmF2KrYt9mE2KjYp9iqINin2YTYo9iz2KfYs9mK2Kkg2LrZitixINmF2KrZiNmB2LHYqSB8IENvcmUgcmVxdWlyZW1lbnRzIG5vdCBhdmFpbGFibGUnKTtcbiAgICB9XG5cbiAgICAvLyBDcmVhdGUgY29udHJhY3QgaW5zdGFuY2VzXG4gICAgY29uc3QgZXhhbU1hbmFnZW1lbnQgPSBnZXRDb250cmFjdCh7XG4gICAgICBhZGRyZXNzOiBFWEFNX01BTkFHRU1FTlRfQUREUkVTUyBhcyBgMHgke3N0cmluZ31gLFxuICAgICAgYWJpOiBFeGFtTWFuYWdlbWVudEFCSS5hYmksXG4gICAgICBjbGllbnQ6IHB1YmxpY0NsaWVudCxcbiAgICAgIHdhbGxldENsaWVudFxuICAgIH0pO1xuXG4gICAgY29uc3QgY2VydGlmaWNhdGVzID0gZ2V0Q29udHJhY3Qoe1xuICAgICAgYWRkcmVzczogQ0VSVElGSUNBVEVTX0FERFJFU1MgYXMgYDB4JHtzdHJpbmd9YCxcbiAgICAgIGFiaTogQ2VydGlmaWNhdGVzQUJJLmFiaSxcbiAgICAgIGNsaWVudDogcHVibGljQ2xpZW50LFxuICAgICAgd2FsbGV0Q2xpZW50XG4gICAgfSk7XG5cbiAgICAvLyBUZXN0IGNvbnRyYWN0IGNvbm5lY3Rpb25zXG4gICAgdHJ5IHtcbiAgICAgIGF3YWl0IFByb21pc2UuYWxsKFtcbiAgICAgICAgZXhhbU1hbmFnZW1lbnQucmVhZC5pc0luc3RpdHV0aW9uKFthY2NvdW50XSksXG4gICAgICAgIGNlcnRpZmljYXRlcy5yZWFkLmdldEluc3RpdHV0aW9uQ2VydGlmaWNhdGVzKFthY2NvdW50XSlcbiAgICAgIF0pO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdDb250cmFjdCB0ZXN0IGZhaWxlZDonLCBlcnJvcik7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ9mB2LTZhCDZgdmKINin2K7Yqtio2KfYsSDYp9mE2KfYqti12KfZhCDYqNin2YTYudmC2YjYryB8IENvbnRyYWN0IGNvbm5lY3Rpb24gdGVzdCBmYWlsZWQnKTtcbiAgICB9XG5cbiAgICByZXR1cm4ge1xuICAgICAgZXhhbU1hbmFnZW1lbnQsXG4gICAgICBjZXJ0aWZpY2F0ZXNcbiAgICB9O1xuICB9LCBbcHVibGljQ2xpZW50LCB3YWxsZXRDbGllbnQsIGFjY291bnRdKTtcblxuICAvLyBNYWluIGluaXRpYWxpemF0aW9uIGVmZmVjdFxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGxldCBpc01vdW50ZWQgPSB0cnVlO1xuICAgIGxldCByZXRyeVRpbWVvdXQ6IE5vZGVKUy5UaW1lb3V0O1xuXG4gICAgY29uc3QgaW5pdGlhbGl6ZSA9IGFzeW5jICgpID0+IHtcbiAgICAgIGlmICghaXNNb3VudGVkKSByZXR1cm47XG5cbiAgICAgIHRyeSB7XG4gICAgICAgIC8vIDEuIENoZWNrIGRlcGVuZGVuY2llc1xuICAgICAgICBpZiAoIWFjY291bnQgfHwgIXB1YmxpY0NsaWVudCB8fCAhd2FsbGV0Q2xpZW50KSB7XG4gICAgICAgICAgc2V0SW5pdFN0YXRlKHByZXYgPT4gKHtcbiAgICAgICAgICAgIC4uLnByZXYsXG4gICAgICAgICAgICBpc0xvYWRpbmc6IGZhbHNlLFxuICAgICAgICAgICAgZXJyb3I6ICfZitix2KzZiSDYqtmI2LXZitmEINin2YTZhdit2YHYuNipINij2YjZhNin2YsgfCBQbGVhc2UgY29ubmVjdCB3YWxsZXQgZmlyc3QnXG4gICAgICAgICAgfSkpO1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIDIuIFZlcmlmeSBuZXR3b3JrXG4gICAgICAgIGNvbnN0IGlzQ29ycmVjdE5ldHdvcmsgPSBhd2FpdCB2ZXJpZnlOZXR3b3JrKCk7XG4gICAgICAgIGlmICghaXNDb3JyZWN0TmV0d29yaykge1xuICAgICAgICAgIGlmIChpbml0U3RhdGUucmV0cnlDb3VudCA+PSAzKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ9mB2LTZhCDZgdmKINiq2KjYr9mK2YQg2KfZhNi02KjZg9ipIHwgTmV0d29yayBzd2l0Y2ggZmFpbGVkJyk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGF3YWl0IHN3aXRjaE5ldHdvcmsoKTtcbiAgICAgICAgICAgIHNldEluaXRTdGF0ZShwcmV2ID0+ICh7XG4gICAgICAgICAgICAgIC4uLnByZXYsXG4gICAgICAgICAgICAgIGhhc0F0dGVtcHRlZE5ldHdvcmtTd2l0Y2g6IHRydWUsXG4gICAgICAgICAgICAgIHJldHJ5Q291bnQ6IHByZXYucmV0cnlDb3VudCArIDFcbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gUmV0cnkgYWZ0ZXIgbmV0d29yayBzd2l0Y2hcbiAgICAgICAgICAgIHJldHJ5VGltZW91dCA9IHNldFRpbWVvdXQoaW5pdGlhbGl6ZSwgMTAwMCk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcign2YHYtNmEINmB2Yog2KrYqNiv2YrZhCDYp9mE2LTYqNmD2KkgfCBOZXR3b3JrIHN3aXRjaCBmYWlsZWQnKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAvLyAzLiBWZXJpZnkgY29udHJhY3RzXG4gICAgICAgIGNvbnN0IGNvbnRyYWN0c1ZlcmlmaWVkID0gYXdhaXQgdmVyaWZ5Q29udHJhY3RzKCk7XG4gICAgICAgIGlmICghY29udHJhY3RzVmVyaWZpZWQpIHtcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ9mB2LTZhCDZgdmKINin2YTYqtit2YLZgiDZhdmGINin2YTYudmC2YjYryB8IENvbnRyYWN0IHZlcmlmaWNhdGlvbiBmYWlsZWQnKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIDQuIEluaXRpYWxpemUgY29udHJhY3RzXG4gICAgICAgIGNvbnN0IHsgZXhhbU1hbmFnZW1lbnQsIGNlcnRpZmljYXRlcyB9ID0gYXdhaXQgaW5pdGlhbGl6ZUNvbnRyYWN0cygpO1xuXG4gICAgICAgIC8vIDUuIFVwZGF0ZSBzdGF0ZSB3aXRoIGluaXRpYWxpemVkIGNvbnRyYWN0c1xuICAgICAgICBpZiAoaXNNb3VudGVkKSB7XG4gICAgICAgICAgc2V0Q29udHJhY3RzKHtcbiAgICAgICAgICAgIGV4YW1NYW5hZ2VtZW50Q29udHJhY3Q6IHtcbiAgICAgICAgICAgICAgaXNJbnN0aXR1dGlvbjogYXN5bmMgKGFkZHJlc3M6IHN0cmluZykgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGV4YW1NYW5hZ2VtZW50LnJlYWQuaXNJbnN0aXR1dGlvbihbYWRkcmVzc10pO1xuICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHQgPT09IHRydWU7XG4gICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgIGdldEluc3RpdHV0aW9uOiBhc3luYyAoYWRkcmVzczogc3RyaW5nKSA9PiB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGF3YWl0IGV4YW1NYW5hZ2VtZW50LnJlYWQuZ2V0SW5zdGl0dXRpb24oW2FkZHJlc3NdKTtcbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgZ2V0SW5zdGl0dXRpb25FeGFtczogYXN5bmMgKGFkZHJlc3M6IHN0cmluZykgPT4ge1xuICAgICAgICAgICAgICAgIHJldHVybiBhd2FpdCBleGFtTWFuYWdlbWVudC5yZWFkLmdldEluc3RpdHV0aW9uRXhhbXMoW2FkZHJlc3NdKSA/PyBbXTtcbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgZ2V0RXhhbVJlc3VsdHM6IGFzeW5jIChleGFtSWQ6IHN0cmluZykgPT4ge1xuICAgICAgICAgICAgICAgIHJldHVybiBhd2FpdCBleGFtTWFuYWdlbWVudC5yZWFkLmdldEV4YW1SZXN1bHRzKFtleGFtSWRdKSA/PyBbXTtcbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgd3JpdGU6IHtcbiAgICAgICAgICAgICAgICB1cGRhdGVJbnN0aXR1dGlvblByb2ZpbGU6IGFzeW5jIChwYXJhbXM6IGFueSkgPT4ge1xuICAgICAgICAgICAgICAgICAgY29uc3QgaGFzaCA9IGF3YWl0IGV4YW1NYW5hZ2VtZW50LndyaXRlLnVwZGF0ZUluc3RpdHV0aW9uUHJvZmlsZShwYXJhbXMuYXJncyk7XG4gICAgICAgICAgICAgICAgICByZXR1cm4geyB3YWl0OiBhc3luYyAoKSA9PiB7IGF3YWl0IHB1YmxpY0NsaWVudC53YWl0Rm9yVHJhbnNhY3Rpb25SZWNlaXB0KHsgaGFzaCB9KTsgfSB9O1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgc3VibWl0RXhhbVJlc3VsdHM6IGFzeW5jIChwYXJhbXM6IGFueSkgPT4ge1xuICAgICAgICAgICAgICAgICAgY29uc3QgaGFzaCA9IGF3YWl0IGV4YW1NYW5hZ2VtZW50LndyaXRlLnN1Ym1pdEV4YW1SZXN1bHRzKHBhcmFtcy5hcmdzKTtcbiAgICAgICAgICAgICAgICAgIHJldHVybiB7IHdhaXQ6IGFzeW5jICgpID0+IHsgYXdhaXQgcHVibGljQ2xpZW50LndhaXRGb3JUcmFuc2FjdGlvblJlY2VpcHQoeyBoYXNoIH0pOyB9IH07XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICByZWdpc3RlclN0dWRlbnRzOiBhc3luYyAocGFyYW1zOiBhbnkpID0+IHtcbiAgICAgICAgICAgICAgICAgIGNvbnN0IGhhc2ggPSBhd2FpdCBleGFtTWFuYWdlbWVudC53cml0ZS5yZWdpc3RlclN0dWRlbnRzKHBhcmFtcy5hcmdzKTtcbiAgICAgICAgICAgICAgICAgIHJldHVybiB7IHdhaXQ6IGFzeW5jICgpID0+IHsgYXdhaXQgcHVibGljQ2xpZW50LndhaXRGb3JUcmFuc2FjdGlvblJlY2VpcHQoeyBoYXNoIH0pOyB9IH07XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB1cGRhdGVFeGFtU3RhdHVzOiBhc3luYyAocGFyYW1zOiBhbnkpID0+IHtcbiAgICAgICAgICAgICAgICAgIGNvbnN0IGhhc2ggPSBhd2FpdCBleGFtTWFuYWdlbWVudC53cml0ZS51cGRhdGVFeGFtU3RhdHVzKHBhcmFtcy5hcmdzKTtcbiAgICAgICAgICAgICAgICAgIHJldHVybiB7IHdhaXQ6IGFzeW5jICgpID0+IHsgYXdhaXQgcHVibGljQ2xpZW50LndhaXRGb3JUcmFuc2FjdGlvblJlY2VpcHQoeyBoYXNoIH0pOyB9IH07XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBjcmVhdGVFeGFtOiBhc3luYyAocGFyYW1zOiBhbnkpID0+IHtcbiAgICAgICAgICAgICAgICAgIGNvbnN0IGhhc2ggPSBhd2FpdCBleGFtTWFuYWdlbWVudC53cml0ZS5jcmVhdGVFeGFtKHBhcmFtcy5hcmdzKTtcbiAgICAgICAgICAgICAgICAgIHJldHVybiB7IHdhaXQ6IGFzeW5jICgpID0+IHsgYXdhaXQgcHVibGljQ2xpZW50LndhaXRGb3JUcmFuc2FjdGlvblJlY2VpcHQoeyBoYXNoIH0pOyB9IH07XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBpc3N1ZUNlcnRpZmljYXRlOiBhc3luYyAocGFyYW1zOiBhbnkpID0+IHtcbiAgICAgICAgICAgICAgICAgIGNvbnN0IGhhc2ggPSBhd2FpdCBleGFtTWFuYWdlbWVudC53cml0ZS5pc3N1ZUNlcnRpZmljYXRlKHBhcmFtcy5hcmdzKTtcbiAgICAgICAgICAgICAgICAgIHJldHVybiB7IHdhaXQ6IGFzeW5jICgpID0+IHsgYXdhaXQgcHVibGljQ2xpZW50LndhaXRGb3JUcmFuc2FjdGlvblJlY2VpcHQoeyBoYXNoIH0pOyB9IH07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGFzIEV4YW1NYW5hZ2VtZW50Q29udHJhY3QsXG4gICAgICAgICAgICBjZXJ0aWZpY2F0ZXNDb250cmFjdDoge1xuICAgICAgICAgICAgICBnZXRJbnN0aXR1dGlvbkNlcnRpZmljYXRlczogYXN5bmMgKGFkZHJlc3M6IHN0cmluZykgPT4ge1xuICAgICAgICAgICAgICAgIHJldHVybiBhd2FpdCBjZXJ0aWZpY2F0ZXMucmVhZC5nZXRJbnN0aXR1dGlvbkNlcnRpZmljYXRlcyhbYWRkcmVzc10pID8/IFtdO1xuICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICB3cml0ZToge1xuICAgICAgICAgICAgICAgIGlzc3VlQ2VydGlmaWNhdGU6IGFzeW5jIChwYXJhbXM6IGFueSkgPT4ge1xuICAgICAgICAgICAgICAgICAgY29uc3QgaGFzaCA9IGF3YWl0IGNlcnRpZmljYXRlcy53cml0ZS5pc3N1ZUNlcnRpZmljYXRlKHBhcmFtcy5hcmdzKTtcbiAgICAgICAgICAgICAgICAgIHJldHVybiB7IHdhaXQ6IGFzeW5jICgpID0+IHsgYXdhaXQgcHVibGljQ2xpZW50LndhaXRGb3JUcmFuc2FjdGlvblJlY2VpcHQoeyBoYXNoIH0pOyB9IH07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGFzIENlcnRpZmljYXRlc0NvbnRyYWN0LFxuICAgICAgICAgICAgZXhhbWluYXRpb25zQ29udHJhY3Q6IG51bGwsXG4gICAgICAgICAgICBpZGVudGl0eUNvbnRyYWN0OiBudWxsLFxuICAgICAgICAgICAgc2VjdXJpdHlVdGlsc0NvbnRyYWN0OiBudWxsXG4gICAgICAgICAgfSk7XG5cbiAgICAgICAgICBzZXRJbml0U3RhdGUocHJldiA9PiAoe1xuICAgICAgICAgICAgLi4ucHJldixcbiAgICAgICAgICAgIGlzTG9hZGluZzogZmFsc2UsXG4gICAgICAgICAgICBoYXNWZXJpZmllZE5ldHdvcms6IHRydWUsXG4gICAgICAgICAgICBoYXNWZXJpZmllZENvbnRyYWN0czogdHJ1ZSxcbiAgICAgICAgICAgIGVycm9yOiBudWxsXG4gICAgICAgICAgfSkpO1xuICAgICAgICB9XG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICBjb25zb2xlLmVycm9yKCdJbml0aWFsaXphdGlvbiBlcnJvcjonLCBlcnJvcik7XG4gICAgICAgIGlmIChpc01vdW50ZWQpIHtcbiAgICAgICAgICBzZXRJbml0U3RhdGUocHJldiA9PiAoe1xuICAgICAgICAgICAgLi4ucHJldixcbiAgICAgICAgICAgIGlzTG9hZGluZzogZmFsc2UsXG4gICAgICAgICAgICBlcnJvcjogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnVW5rbm93biBlcnJvcidcbiAgICAgICAgICB9KSk7XG5cbiAgICAgICAgICBzZXRDb250cmFjdHMoe1xuICAgICAgICAgICAgZXhhbU1hbmFnZW1lbnRDb250cmFjdDogbnVsbCxcbiAgICAgICAgICAgIGNlcnRpZmljYXRlc0NvbnRyYWN0OiBudWxsLFxuICAgICAgICAgICAgZXhhbWluYXRpb25zQ29udHJhY3Q6IG51bGwsXG4gICAgICAgICAgICBpZGVudGl0eUNvbnRyYWN0OiBudWxsLFxuICAgICAgICAgICAgc2VjdXJpdHlVdGlsc0NvbnRyYWN0OiBudWxsXG4gICAgICAgICAgfSk7XG5cbiAgICAgICAgICB0b2FzdCh7XG4gICAgICAgICAgICB0aXRsZTogJ9iu2LfYoyDZgdmKINin2YTYqtmH2YrYptipIHwgSW5pdGlhbGl6YXRpb24gRXJyb3InLFxuICAgICAgICAgICAgZGVzY3JpcHRpb246IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgXG4gICAgICAgICAgICAgID8gYCR7ZXJyb3IubWVzc2FnZX0gfCDZitix2KzZiSDYp9mE2KrYo9mD2K8g2YXZhiDYp9iq2LXYp9mEINin2YTZhdit2YHYuNipINmI2KfZhNi02KjZg9ipINin2YTYtdit2YrYrdipYFxuICAgICAgICAgICAgICA6ICfYrdiv2Ksg2K7Yt9ijINi62YrYsSDZhdi52LHZiNmBIHwgQW4gdW5rbm93biBlcnJvciBvY2N1cnJlZCcsXG4gICAgICAgICAgICBzdGF0dXM6ICdlcnJvcicsXG4gICAgICAgICAgICBkdXJhdGlvbjogNTAwMCxcbiAgICAgICAgICAgIGlzQ2xvc2FibGU6IHRydWUsXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9O1xuXG4gICAgaW5pdGlhbGl6ZSgpO1xuXG4gICAgcmV0dXJuICgpID0+IHtcbiAgICAgIGlzTW91bnRlZCA9IGZhbHNlO1xuICAgICAgaWYgKHJldHJ5VGltZW91dCkge1xuICAgICAgICBjbGVhclRpbWVvdXQocmV0cnlUaW1lb3V0KTtcbiAgICAgIH1cbiAgICB9O1xuICB9LCBbYWNjb3VudCwgcHVibGljQ2xpZW50LCB3YWxsZXRDbGllbnQsIGNoYWluSWQsIHZlcmlmeU5ldHdvcmssIHZlcmlmeUNvbnRyYWN0cywgaW5pdGlhbGl6ZUNvbnRyYWN0cywgdG9hc3QsIGluaXRTdGF0ZS5yZXRyeUNvdW50XSk7XG5cbiAgLy8gTmV0d29yayBjaGFuZ2UgaGFuZGxlclxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyAmJiB3aW5kb3cuZXRoZXJldW0/Lm9uKSB7XG4gICAgICBjb25zdCBoYW5kbGVDaGFpbkNoYW5nZWQgPSAoKSA9PiB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdOZXR3b3JrIGNoYW5nZWQsIHJlc2V0dGluZyBzdGF0ZS4uLicpO1xuICAgICAgICBzZXRJbml0U3RhdGUocHJldiA9PiAoe1xuICAgICAgICAgIC4uLnByZXYsXG4gICAgICAgICAgaXNMb2FkaW5nOiB0cnVlLFxuICAgICAgICAgIGhhc1ZlcmlmaWVkTmV0d29yazogZmFsc2UsXG4gICAgICAgICAgaGFzVmVyaWZpZWRDb250cmFjdHM6IGZhbHNlLFxuICAgICAgICAgIGVycm9yOiBudWxsLFxuICAgICAgICAgIHJldHJ5Q291bnQ6IDBcbiAgICAgICAgfSkpO1xuXG4gICAgICAgIHNldENvbnRyYWN0cyh7XG4gICAgICAgICAgZXhhbU1hbmFnZW1lbnRDb250cmFjdDogbnVsbCxcbiAgICAgICAgICBjZXJ0aWZpY2F0ZXNDb250cmFjdDogbnVsbCxcbiAgICAgICAgICBleGFtaW5hdGlvbnNDb250cmFjdDogbnVsbCxcbiAgICAgICAgICBpZGVudGl0eUNvbnRyYWN0OiBudWxsLFxuICAgICAgICAgIHNlY3VyaXR5VXRpbHNDb250cmFjdDogbnVsbFxuICAgICAgICB9KTtcbiAgICAgIH07XG5cbiAgICAgIHdpbmRvdy5ldGhlcmV1bS5vbignY2hhaW5DaGFuZ2VkJywgaGFuZGxlQ2hhaW5DaGFuZ2VkKTtcbiAgICAgIHJldHVybiAoKSA9PiB7XG4gICAgICAgIGlmICh3aW5kb3cuZXRoZXJldW0/LnJlbW92ZUxpc3RlbmVyKSB7XG4gICAgICAgICAgd2luZG93LmV0aGVyZXVtLnJlbW92ZUxpc3RlbmVyKCdjaGFpbkNoYW5nZWQnLCBoYW5kbGVDaGFpbkNoYW5nZWQpO1xuICAgICAgICB9XG4gICAgICB9O1xuICAgIH1cbiAgfSwgW10pO1xuXG4gIHJldHVybiB7XG4gICAgLi4uY29udHJhY3RzLFxuICAgIGFjY291bnQsXG4gICAgaXNDb25uZWN0ZWQ6ICEhYWNjb3VudCAmJiBpbml0U3RhdGUuaGFzVmVyaWZpZWROZXR3b3JrICYmIGluaXRTdGF0ZS5oYXNWZXJpZmllZENvbnRyYWN0cyxcbiAgICBpc0luaXRpYWxpemVkOiBpbml0U3RhdGUuaGFzVmVyaWZpZWRDb250cmFjdHMsXG4gICAgaXNMb2FkaW5nOiBpbml0U3RhdGUuaXNMb2FkaW5nLFxuICAgIGlzQ29ycmVjdE5ldHdvcms6IGNoYWluSWQgPT09IFRBUkdFVF9DSEFJTl9JRCxcbiAgICBpbml0aWFsaXphdGlvbkVycm9yOiBpbml0U3RhdGUuZXJyb3JcbiAgfTtcbn07ICJdLCJuYW1lcyI6WyJ1c2VFZmZlY3QiLCJ1c2VTdGF0ZSIsInVzZUNhbGxiYWNrIiwidXNlQWNjb3VudCIsInVzZVB1YmxpY0NsaWVudCIsInVzZVdhbGxldENsaWVudCIsInVzZUNoYWluSWQiLCJ1c2VDb25uZWN0IiwiZ2V0Q29udHJhY3QiLCJFeGFtTWFuYWdlbWVudEFCSSIsIkNlcnRpZmljYXRlc0FCSSIsInVzZVRvYXN0IiwiRVhBTV9NQU5BR0VNRU5UX0FERFJFU1MiLCJwcm9jZXNzIiwiZW52IiwiTkVYVF9QVUJMSUNfRVhBTV9NQU5BR0VNRU5UX0NPTlRSQUNUX0FERFJFU1MiLCJDRVJUSUZJQ0FURVNfQUREUkVTUyIsIk5FWFRfUFVCTElDX0NFUlRJRklDQVRFU19DT05UUkFDVF9BRERSRVNTIiwiRVhBTUlOQVRJT05TX0FERFJFU1MiLCJORVhUX1BVQkxJQ19FWEFNSU5BVElPTlNfQ09OVFJBQ1RfQUREUkVTUyIsIklERU5USVRZX0FERFJFU1MiLCJORVhUX1BVQkxJQ19JREVOVElUWV9DT05UUkFDVF9BRERSRVNTIiwiU0VDVVJJVFlfVVRJTFNfQUREUkVTUyIsIk5FWFRfUFVCTElDX1NFQ1VSSVRZX1VUSUxTX0NPTlRSQUNUX0FERFJFU1MiLCJUQVJHRVRfQ0hBSU5fSUQiLCJ1c2VDb250cmFjdCIsImFkZHJlc3MiLCJhY2NvdW50IiwicHVibGljQ2xpZW50IiwiZGF0YSIsIndhbGxldENsaWVudCIsImNoYWluSWQiLCJjb25uZWN0IiwidG9hc3QiLCJpbml0U3RhdGUiLCJzZXRJbml0U3RhdGUiLCJpc0xvYWRpbmciLCJoYXNBdHRlbXB0ZWRDb25uZWN0aW9uIiwiaGFzQXR0ZW1wdGVkTmV0d29ya1N3aXRjaCIsImhhc1ZlcmlmaWVkTmV0d29yayIsImhhc1ZlcmlmaWVkQ29udHJhY3RzIiwiZXJyb3IiLCJyZXRyeUNvdW50IiwiY29udHJhY3RzIiwic2V0Q29udHJhY3RzIiwiZXhhbU1hbmFnZW1lbnRDb250cmFjdCIsImNlcnRpZmljYXRlc0NvbnRyYWN0IiwiZXhhbWluYXRpb25zQ29udHJhY3QiLCJpZGVudGl0eUNvbnRyYWN0Iiwic2VjdXJpdHlVdGlsc0NvbnRyYWN0IiwidmVyaWZ5TmV0d29yayIsImN1cnJlbnRDaGFpbklkIiwiZ2V0Q2hhaW5JZCIsImNvbnNvbGUiLCJsb2ciLCJzd2l0Y2hOZXR3b3JrIiwid2luZG93IiwiZXRoZXJldW0iLCJFcnJvciIsInJlcXVlc3QiLCJtZXRob2QiLCJwYXJhbXMiLCJ0b1N0cmluZyIsImNvZGUiLCJjaGFpbk5hbWUiLCJycGNVcmxzIiwibmF0aXZlQ3VycmVuY3kiLCJuYW1lIiwic3ltYm9sIiwiZGVjaW1hbHMiLCJ2ZXJpZnlDb250cmFjdHMiLCJleGFtQ29kZSIsImNlcnRDb2RlIiwiUHJvbWlzZSIsImFsbCIsImdldEJ5dGVjb2RlIiwiaW5pdGlhbGl6ZUNvbnRyYWN0cyIsImV4YW1NYW5hZ2VtZW50IiwiYWJpIiwiY2xpZW50IiwiY2VydGlmaWNhdGVzIiwicmVhZCIsImlzSW5zdGl0dXRpb24iLCJnZXRJbnN0aXR1dGlvbkNlcnRpZmljYXRlcyIsImlzTW91bnRlZCIsInJldHJ5VGltZW91dCIsImluaXRpYWxpemUiLCJwcmV2IiwiaXNDb3JyZWN0TmV0d29yayIsInNldFRpbWVvdXQiLCJjb250cmFjdHNWZXJpZmllZCIsInJlc3VsdCIsImdldEluc3RpdHV0aW9uIiwiZ2V0SW5zdGl0dXRpb25FeGFtcyIsImdldEV4YW1SZXN1bHRzIiwiZXhhbUlkIiwid3JpdGUiLCJ1cGRhdGVJbnN0aXR1dGlvblByb2ZpbGUiLCJoYXNoIiwiYXJncyIsIndhaXQiLCJ3YWl0Rm9yVHJhbnNhY3Rpb25SZWNlaXB0Iiwic3VibWl0RXhhbVJlc3VsdHMiLCJyZWdpc3RlclN0dWRlbnRzIiwidXBkYXRlRXhhbVN0YXR1cyIsImNyZWF0ZUV4YW0iLCJpc3N1ZUNlcnRpZmljYXRlIiwibWVzc2FnZSIsInRpdGxlIiwiZGVzY3JpcHRpb24iLCJzdGF0dXMiLCJkdXJhdGlvbiIsImlzQ2xvc2FibGUiLCJjbGVhclRpbWVvdXQiLCJvbiIsImhhbmRsZUNoYWluQ2hhbmdlZCIsInJlbW92ZUxpc3RlbmVyIiwiaXNDb25uZWN0ZWQiLCJpc0luaXRpYWxpemVkIiwiaW5pdGlhbGl6YXRpb25FcnJvciJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./hooks/useContract.ts\n"));

/***/ })

});